/*! For license information please see javascript.js.LICENSE.txt */
(()=>{var __webpack_modules__={129:function(t){t.exports=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var u="undefined"!=typeof window&&void 0!==window.document,c=u?window:{},h=!(!u||!c.document.documentElement)&&"ontouchstart"in c.document.documentElement,l=!!u&&"PointerEvent"in c,f="cropper",d="all",p="crop",v="move",g="zoom",m="e",y="w",b="s",w="n",_="ne",E="nw",k="se",I="sw",T="".concat(f,"-crop"),S="".concat(f,"-disabled"),A="".concat(f,"-hidden"),C="".concat(f,"-hide"),D="".concat(f,"-invisible"),x="".concat(f,"-modal"),N="".concat(f,"-move"),O="".concat(f,"Action"),R="".concat(f,"Preview"),P="crop",M="move",L="none",F="crop",U="cropend",V="cropmove",B="cropstart",j="dblclick",q=l?"pointerdown":h?"touchstart":"mousedown",H=l?"pointermove":h?"touchmove":"mousemove",K=l?"pointerup pointercancel":h?"touchend touchcancel":"mouseup",z="ready",G="resize",W="wheel",X="zoom",Y="image/jpeg",Q=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,$=/^data:/,J=/^data:image\/jpeg;base64,/,Z=/^img|canvas$/i,tt={viewMode:0,dragMode:P,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},et=Number.isNaN||c.isNaN;function nt(t){return"number"==typeof t&&!et(t)}var rt=function(t){return t>0&&t<1/0};function it(t){return void 0===t}function ot(e){return"object"===t(e)&&null!==e}var at=Object.prototype.hasOwnProperty;function st(t){if(!ot(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&at.call(n,"isPrototypeOf")}catch(t){return!1}}function ut(t){return"function"==typeof t}var ct=Array.prototype.slice;function ht(t){return Array.from?Array.from(t):ct.call(t)}function lt(t,e){return t&&ut(e)&&(Array.isArray(t)||nt(t.length)?ht(t).forEach((function(n,r){e.call(t,n,r,t)})):ot(t)&&Object.keys(t).forEach((function(n){e.call(t,t[n],n,t)}))),t}var ft=Object.assign||function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return ot(t)&&n.length>0&&n.forEach((function(e){ot(e)&&Object.keys(e).forEach((function(n){t[n]=e[n]}))})),t},dt=/\.\d*(?:0|9){12}\d*$/;function pt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return dt.test(t)?Math.round(t*e)/e:t}var vt=/^width|height|left|top|marginLeft|marginTop$/;function gt(t,e){var n=t.style;lt(e,(function(t,e){vt.test(e)&&nt(t)&&(t="".concat(t,"px")),n[e]=t}))}function mt(t,e){if(e)if(nt(t.length))lt(t,(function(t){mt(t,e)}));else if(t.classList)t.classList.add(e);else{var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function yt(t,e){e&&(nt(t.length)?lt(t,(function(t){yt(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function bt(t,e,n){e&&(nt(t.length)?lt(t,(function(t){bt(t,e,n)})):n?mt(t,e):yt(t,e))}var wt=/([a-z\d])([A-Z])/g;function _t(t){return t.replace(wt,"$1-$2").toLowerCase()}function Et(t,e){return ot(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(_t(e)))}function kt(t,e,n){ot(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(_t(e)),n)}var It=/\s\s*/,Tt=function(){var t=!1;if(u){var e=!1,n=function(){},r=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});c.addEventListener("test",n,r),c.removeEventListener("test",n,r)}return t}();function St(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n;e.trim().split(It).forEach((function(e){if(!Tt){var o=t.listeners;o&&o[e]&&o[e][n]&&(i=o[e][n],delete o[e][n],0===Object.keys(o[e]).length&&delete o[e],0===Object.keys(o).length&&delete t.listeners)}t.removeEventListener(e,i,r)}))}function At(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n;e.trim().split(It).forEach((function(e){if(r.once&&!Tt){var o=t.listeners,a=void 0===o?{}:o;i=function(){delete a[e][n],t.removeEventListener(e,i,r);for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];n.apply(t,s)},a[e]||(a[e]={}),a[e][n]&&t.removeEventListener(e,a[e][n],r),a[e][n]=i,t.listeners=a}t.addEventListener(e,i,r)}))}function Ct(t,e,n){var r;return ut(Event)&&ut(CustomEvent)?r=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,n),t.dispatchEvent(r)}function Dt(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var xt=c.location,Nt=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Ot(t){var e=t.match(Nt);return null!==e&&(e[1]!==xt.protocol||e[2]!==xt.hostname||e[3]!==xt.port)}function Rt(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function Pt(t){var e=t.rotate,n=t.scaleX,r=t.scaleY,i=t.translateX,o=t.translateY,a=[];nt(i)&&0!==i&&a.push("translateX(".concat(i,"px)")),nt(o)&&0!==o&&a.push("translateY(".concat(o,"px)")),nt(e)&&0!==e&&a.push("rotate(".concat(e,"deg)")),nt(n)&&1!==n&&a.push("scaleX(".concat(n,")")),nt(r)&&1!==r&&a.push("scaleY(".concat(r,")"));var s=a.length?a.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function Mt(t,e){var n=t.pageX,r=t.pageY,i={endX:n,endY:r};return e?i:o({startX:n,startY:r},i)}function Lt(t){var e=t.aspectRatio,n=t.height,r=t.width,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",o=rt(r),a=rt(n);if(o&&a){var s=n*e;"contain"===i&&s>r||"cover"===i&&s<r?n=r/e:r=n*e}else o?n=r/e:a&&(r=n*e);return{width:r,height:n}}function Ft(t,e,n,r){var i=e.aspectRatio,o=e.naturalWidth,s=e.naturalHeight,u=e.rotate,c=void 0===u?0:u,h=e.scaleX,l=void 0===h?1:h,f=e.scaleY,d=void 0===f?1:f,p=n.aspectRatio,v=n.naturalWidth,g=n.naturalHeight,m=r.fillColor,y=void 0===m?"transparent":m,b=r.imageSmoothingEnabled,w=void 0===b||b,_=r.imageSmoothingQuality,E=void 0===_?"low":_,k=r.maxWidth,I=void 0===k?1/0:k,T=r.maxHeight,S=void 0===T?1/0:T,A=r.minWidth,C=void 0===A?0:A,D=r.minHeight,x=void 0===D?0:D,N=document.createElement("canvas"),O=N.getContext("2d"),R=Lt({aspectRatio:p,width:I,height:S}),P=Lt({aspectRatio:p,width:C,height:x},"cover"),M=Math.min(R.width,Math.max(P.width,v)),L=Math.min(R.height,Math.max(P.height,g)),F=Lt({aspectRatio:i,width:I,height:S}),U=Lt({aspectRatio:i,width:C,height:x},"cover"),V=Math.min(F.width,Math.max(U.width,o)),B=Math.min(F.height,Math.max(U.height,s)),j=[-V/2,-B/2,V,B];return N.width=pt(M),N.height=pt(L),O.fillStyle=y,O.fillRect(0,0,M,L),O.save(),O.translate(M/2,L/2),O.rotate(c*Math.PI/180),O.scale(l,d),O.imageSmoothingEnabled=w,O.imageSmoothingQuality=E,O.drawImage.apply(O,[t].concat(a(j.map((function(t){return Math.floor(pt(t))}))))),O.restore(),N}var Ut=String.fromCharCode;var Vt=/^data:.*,/;function Bt(t){var e,n=new DataView(t);try{var r,i,o;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var a=n.byteLength,s=2;s+1<a;){if(255===n.getUint8(s)&&225===n.getUint8(s+1)){i=s;break}s+=1}if(i){var u=i+10;if("Exif"===function(t,e,n){var r="";n+=e;for(var i=e;i<n;i+=1)r+=Ut(t.getUint8(i));return r}(n,i+4,4)){var c=n.getUint16(u);if(((r=18761===c)||19789===c)&&42===n.getUint16(u+2,r)){var h=n.getUint32(u+4,r);h>=8&&(o=u+h)}}}if(o){var l,f,d=n.getUint16(o,r);for(f=0;f<d;f+=1)if(l=o+12*f+2,274===n.getUint16(l,r)){l+=8,e=n.getUint16(l,r),n.setUint16(l,1,r);break}}}catch(t){e=1}return e}var jt={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,n=this.container,r=this.cropper,i=Number(e.minContainerWidth),o=Number(e.minContainerHeight);mt(r,A),yt(t,A);var a={width:Math.max(n.offsetWidth,i>=0?i:200),height:Math.max(n.offsetHeight,o>=0?o:100)};this.containerData=a,gt(r,{width:a.width,height:a.height}),mt(t,A),yt(r,A)},initCanvas:function(){var t=this.containerData,e=this.imageData,n=this.options.viewMode,r=Math.abs(e.rotate)%180==90,i=r?e.naturalHeight:e.naturalWidth,o=r?e.naturalWidth:e.naturalHeight,a=i/o,s=t.width,u=t.height;t.height*a>t.width?3===n?s=t.height*a:u=t.width/a:3===n?u=t.width/a:s=t.height*a;var c={aspectRatio:a,naturalWidth:i,naturalHeight:o,width:s,height:u};this.canvasData=c,this.limited=1===n||2===n,this.limitCanvas(!0,!0),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),c.left=(t.width-c.width)/2,c.top=(t.height-c.height)/2,c.oldLeft=c.left,c.oldTop=c.top,this.initialCanvasData=ft({},c)},limitCanvas:function(t,e){var n=this.options,r=this.containerData,i=this.canvasData,o=this.cropBoxData,a=n.viewMode,s=i.aspectRatio,u=this.cropped&&o;if(t){var c=Number(n.minCanvasWidth)||0,h=Number(n.minCanvasHeight)||0;a>1?(c=Math.max(c,r.width),h=Math.max(h,r.height),3===a&&(h*s>c?c=h*s:h=c/s)):a>0&&(c?c=Math.max(c,u?o.width:0):h?h=Math.max(h,u?o.height:0):u&&(c=o.width,(h=o.height)*s>c?c=h*s:h=c/s));var l=Lt({aspectRatio:s,width:c,height:h});c=l.width,h=l.height,i.minWidth=c,i.minHeight=h,i.maxWidth=1/0,i.maxHeight=1/0}if(e)if(a>(u?0:1)){var f=r.width-i.width,d=r.height-i.height;i.minLeft=Math.min(0,f),i.minTop=Math.min(0,d),i.maxLeft=Math.max(0,f),i.maxTop=Math.max(0,d),u&&this.limited&&(i.minLeft=Math.min(o.left,o.left+(o.width-i.width)),i.minTop=Math.min(o.top,o.top+(o.height-i.height)),i.maxLeft=o.left,i.maxTop=o.top,2===a&&(i.width>=r.width&&(i.minLeft=Math.min(0,f),i.maxLeft=Math.max(0,f)),i.height>=r.height&&(i.minTop=Math.min(0,d),i.maxTop=Math.max(0,d))))}else i.minLeft=-i.width,i.minTop=-i.height,i.maxLeft=r.width,i.maxTop=r.height},renderCanvas:function(t,e){var n=this.canvasData,r=this.imageData;if(e){var i=function(t){var e=t.width,n=t.height,r=t.degree;if(90==(r=Math.abs(r)%180))return{width:n,height:e};var i=r%90*Math.PI/180,o=Math.sin(i),a=Math.cos(i),s=e*a+n*o,u=e*o+n*a;return r>90?{width:u,height:s}:{width:s,height:u}}({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),o=i.width,a=i.height,s=n.width*(o/n.naturalWidth),u=n.height*(a/n.naturalHeight);n.left-=(s-n.width)/2,n.top-=(u-n.height)/2,n.width=s,n.height=u,n.aspectRatio=o/a,n.naturalWidth=o,n.naturalHeight=a,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,gt(this.canvas,ft({width:n.width,height:n.height},Pt({translateX:n.left,translateY:n.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,n=this.imageData,r=n.naturalWidth*(e.width/e.naturalWidth),i=n.naturalHeight*(e.height/e.naturalHeight);ft(n,{width:r,height:i,left:(e.width-r)/2,top:(e.height-i)/2}),gt(this.image,ft({width:n.width,height:n.height},Pt(ft({translateX:n.left,translateY:n.top},n)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,n=t.aspectRatio||t.initialAspectRatio,r=Number(t.autoCropArea)||.8,i={width:e.width,height:e.height};n&&(e.height*n>e.width?i.height=i.width/n:i.width=i.height*n),this.cropBoxData=i,this.limitCropBox(!0,!0),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),i.width=Math.max(i.minWidth,i.width*r),i.height=Math.max(i.minHeight,i.height*r),i.left=e.left+(e.width-i.width)/2,i.top=e.top+(e.height-i.height)/2,i.oldLeft=i.left,i.oldTop=i.top,this.initialCropBoxData=ft({},i)},limitCropBox:function(t,e){var n=this.options,r=this.containerData,i=this.canvasData,o=this.cropBoxData,a=this.limited,s=n.aspectRatio;if(t){var u=Number(n.minCropBoxWidth)||0,c=Number(n.minCropBoxHeight)||0,h=a?Math.min(r.width,i.width,i.width+i.left,r.width-i.left):r.width,l=a?Math.min(r.height,i.height,i.height+i.top,r.height-i.top):r.height;u=Math.min(u,r.width),c=Math.min(c,r.height),s&&(u&&c?c*s>u?c=u/s:u=c*s:u?c=u/s:c&&(u=c*s),l*s>h?l=h/s:h=l*s),o.minWidth=Math.min(u,h),o.minHeight=Math.min(c,l),o.maxWidth=h,o.maxHeight=l}e&&(a?(o.minLeft=Math.max(0,i.left),o.minTop=Math.max(0,i.top),o.maxLeft=Math.min(r.width,i.left+i.width)-o.width,o.maxTop=Math.min(r.height,i.top+i.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=r.width-o.width,o.maxTop=r.height-o.height))},renderCropBox:function(){var t=this.options,e=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,t.movable&&t.cropBoxMovable&&kt(this.face,O,n.width>=e.width&&n.height>=e.height?v:d),gt(this.cropBox,ft({width:n.width,height:n.height},Pt({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ct(this.element,F,this.getData())}},qt={initPreview:function(){var t=this.element,e=this.crossOrigin,n=this.options.preview,r=e?this.crossOriginUrl:this.url,i=t.alt||"The image to preview",o=document.createElement("img");if(e&&(o.crossOrigin=e),o.src=r,o.alt=i,this.viewBox.appendChild(o),this.viewBoxImage=o,n){var a=n;"string"==typeof n?a=t.ownerDocument.querySelectorAll(n):n.querySelector&&(a=[n]),this.previews=a,lt(a,(function(t){var n=document.createElement("img");kt(t,R,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(n.crossOrigin=e),n.src=r,n.alt=i,n.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(n)}))}},resetPreview:function(){lt(this.previews,(function(t){var e=Et(t,R);gt(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(ot(t[e]))try{delete t[e]}catch(n){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(n){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(_t(e)))}(t,R)}))},preview:function(){var t=this.imageData,e=this.canvasData,n=this.cropBoxData,r=n.width,i=n.height,o=t.width,a=t.height,s=n.left-e.left-t.left,u=n.top-e.top-t.top;this.cropped&&!this.disabled&&(gt(this.viewBoxImage,ft({width:o,height:a},Pt(ft({translateX:-s,translateY:-u},t)))),lt(this.previews,(function(e){var n=Et(e,R),c=n.width,h=n.height,l=c,f=h,d=1;r&&(f=i*(d=c/r)),i&&f>h&&(l=r*(d=h/i),f=h),gt(e,{width:l,height:f}),gt(e.getElementsByTagName("img")[0],ft({width:o*d,height:a*d},Pt(ft({translateX:-s*d,translateY:-u*d},t))))})))}},Ht={bind:function(){var t=this.element,e=this.options,n=this.cropper;ut(e.cropstart)&&At(t,B,e.cropstart),ut(e.cropmove)&&At(t,V,e.cropmove),ut(e.cropend)&&At(t,U,e.cropend),ut(e.crop)&&At(t,F,e.crop),ut(e.zoom)&&At(t,X,e.zoom),At(n,q,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&At(n,W,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&At(n,j,this.onDblclick=this.dblclick.bind(this)),At(t.ownerDocument,H,this.onCropMove=this.cropMove.bind(this)),At(t.ownerDocument,K,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&At(window,G,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,n=this.cropper;ut(e.cropstart)&&St(t,B,e.cropstart),ut(e.cropmove)&&St(t,V,e.cropmove),ut(e.cropend)&&St(t,U,e.cropend),ut(e.crop)&&St(t,F,e.crop),ut(e.zoom)&&St(t,X,e.zoom),St(n,q,this.onCropStart),e.zoomable&&e.zoomOnWheel&&St(n,W,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&St(n,j,this.onDblclick),St(t.ownerDocument,H,this.onCropMove),St(t.ownerDocument,K,this.onCropEnd),e.responsive&&St(window,G,this.onResize)}},Kt={resize:function(){if(!this.disabled){var t,e,n=this.options,r=this.container,i=this.containerData,o=r.offsetWidth/i.width;1===o&&r.offsetHeight===i.height||(n.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),n.restore&&(this.setCanvasData(lt(t,(function(e,n){t[n]=e*o}))),this.setCropBoxData(lt(e,(function(t,n){e[n]=t*o})))))}},dblclick:function(){var t,e;this.disabled||this.options.dragMode===L||this.setDragMode((t=this.dragBox,e=T,(t.classList?t.classList.contains(e):t.className.indexOf(e)>-1)?M:P))},wheel:function(t){var e=this,n=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?r=t.deltaY>0?1:-1:t.wheelDelta?r=-t.wheelDelta/120:t.detail&&(r=t.detail>0?1:-1),this.zoom(-r*n,t)))},cropStart:function(t){var e=t.buttons,n=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(nt(e)&&1!==e||nt(n)&&0!==n||t.ctrlKey))){var r,i=this.options,o=this.pointers;t.changedTouches?lt(t.changedTouches,(function(t){o[t.identifier]=Mt(t)})):o[t.pointerId||0]=Mt(t),r=Object.keys(o).length>1&&i.zoomable&&i.zoomOnTouch?g:Et(t.target,O),Q.test(r)&&!1!==Ct(this.element,B,{originalEvent:t,action:r})&&(t.preventDefault(),this.action=r,this.cropping=!1,r===p&&(this.cropping=!0,mt(this.dragBox,x)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var n=this.pointers;t.preventDefault(),!1!==Ct(this.element,V,{originalEvent:t,action:e})&&(t.changedTouches?lt(t.changedTouches,(function(t){ft(n[t.identifier]||{},Mt(t,!0))})):ft(n[t.pointerId||0]||{},Mt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,n=this.pointers;t.changedTouches?lt(t.changedTouches,(function(t){delete n[t.identifier]})):delete n[t.pointerId||0],e&&(t.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,bt(this.dragBox,x,this.cropped&&this.options.modal)),Ct(this.element,U,{originalEvent:t,action:e}))}}},zt={change:function(t){var e,n=this.options,r=this.canvasData,i=this.containerData,a=this.cropBoxData,s=this.pointers,u=this.action,c=n.aspectRatio,h=a.left,l=a.top,f=a.width,T=a.height,S=h+f,C=l+T,D=0,x=0,N=i.width,O=i.height,R=!0;!c&&t.shiftKey&&(c=f&&T?f/T:1),this.limited&&(D=a.minLeft,x=a.minTop,N=D+Math.min(i.width,r.width,r.left+r.width),O=x+Math.min(i.height,r.height,r.top+r.height));var P=s[Object.keys(s)[0]],M={x:P.endX-P.startX,y:P.endY-P.startY},L=function(t){switch(t){case m:S+M.x>N&&(M.x=N-S);break;case y:h+M.x<D&&(M.x=D-h);break;case w:l+M.y<x&&(M.y=x-l);break;case b:C+M.y>O&&(M.y=O-C)}};switch(u){case d:h+=M.x,l+=M.y;break;case m:if(M.x>=0&&(S>=N||c&&(l<=x||C>=O))){R=!1;break}L(m),(f+=M.x)<0&&(u=y,h-=f=-f),c&&(T=f/c,l+=(a.height-T)/2);break;case w:if(M.y<=0&&(l<=x||c&&(h<=D||S>=N))){R=!1;break}L(w),T-=M.y,l+=M.y,T<0&&(u=b,l-=T=-T),c&&(f=T*c,h+=(a.width-f)/2);break;case y:if(M.x<=0&&(h<=D||c&&(l<=x||C>=O))){R=!1;break}L(y),f-=M.x,h+=M.x,f<0&&(u=m,h-=f=-f),c&&(T=f/c,l+=(a.height-T)/2);break;case b:if(M.y>=0&&(C>=O||c&&(h<=D||S>=N))){R=!1;break}L(b),(T+=M.y)<0&&(u=w,l-=T=-T),c&&(f=T*c,h+=(a.width-f)/2);break;case _:if(c){if(M.y<=0&&(l<=x||S>=N)){R=!1;break}L(w),T-=M.y,l+=M.y,f=T*c}else L(w),L(m),M.x>=0?S<N?f+=M.x:M.y<=0&&l<=x&&(R=!1):f+=M.x,M.y<=0?l>x&&(T-=M.y,l+=M.y):(T-=M.y,l+=M.y);f<0&&T<0?(u=I,l-=T=-T,h-=f=-f):f<0?(u=E,h-=f=-f):T<0&&(u=k,l-=T=-T);break;case E:if(c){if(M.y<=0&&(l<=x||h<=D)){R=!1;break}L(w),T-=M.y,l+=M.y,f=T*c,h+=a.width-f}else L(w),L(y),M.x<=0?h>D?(f-=M.x,h+=M.x):M.y<=0&&l<=x&&(R=!1):(f-=M.x,h+=M.x),M.y<=0?l>x&&(T-=M.y,l+=M.y):(T-=M.y,l+=M.y);f<0&&T<0?(u=k,l-=T=-T,h-=f=-f):f<0?(u=_,h-=f=-f):T<0&&(u=I,l-=T=-T);break;case I:if(c){if(M.x<=0&&(h<=D||C>=O)){R=!1;break}L(y),f-=M.x,h+=M.x,T=f/c}else L(b),L(y),M.x<=0?h>D?(f-=M.x,h+=M.x):M.y>=0&&C>=O&&(R=!1):(f-=M.x,h+=M.x),M.y>=0?C<O&&(T+=M.y):T+=M.y;f<0&&T<0?(u=_,l-=T=-T,h-=f=-f):f<0?(u=k,h-=f=-f):T<0&&(u=E,l-=T=-T);break;case k:if(c){if(M.x>=0&&(S>=N||C>=O)){R=!1;break}L(m),T=(f+=M.x)/c}else L(b),L(m),M.x>=0?S<N?f+=M.x:M.y>=0&&C>=O&&(R=!1):f+=M.x,M.y>=0?C<O&&(T+=M.y):T+=M.y;f<0&&T<0?(u=E,l-=T=-T,h-=f=-f):f<0?(u=I,h-=f=-f):T<0&&(u=_,l-=T=-T);break;case v:this.move(M.x,M.y),R=!1;break;case g:this.zoom(function(t){var e=o({},t),n=0;return lt(t,(function(t,r){delete e[r],lt(e,(function(e){var r=Math.abs(t.startX-e.startX),i=Math.abs(t.startY-e.startY),o=Math.abs(t.endX-e.endX),a=Math.abs(t.endY-e.endY),s=Math.sqrt(r*r+i*i),u=(Math.sqrt(o*o+a*a)-s)/s;Math.abs(u)>Math.abs(n)&&(n=u)}))})),n}(s),t),R=!1;break;case p:if(!M.x||!M.y){R=!1;break}e=Dt(this.cropper),h=P.startX-e.left,l=P.startY-e.top,f=a.minWidth,T=a.minHeight,M.x>0?u=M.y>0?k:_:M.x<0&&(h-=f,u=M.y>0?I:E),M.y<0&&(l-=T),this.cropped||(yt(this.cropBox,A),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}R&&(a.width=f,a.height=T,a.left=h,a.top=l,this.action=u,this.renderCropBox()),lt(s,(function(t){t.startX=t.endX,t.startY=t.endY}))}},Gt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&mt(this.dragBox,x),yt(this.cropBox,A),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=ft({},this.initialImageData),this.canvasData=ft({},this.initialCanvasData),this.cropBoxData=ft({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(ft(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),yt(this.dragBox,x),mt(this.cropBox,A)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,lt(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,yt(this.cropper,S)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,mt(this.cropper,S)),this},destroy:function(){var t=this.element;return t.cropper?(t.cropper=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.canvasData,r=n.left,i=n.top;return this.moveTo(it(t)?t:r+Number(t),it(e)?e:i+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.canvasData,r=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(nt(t)&&(n.left=t,r=!0),nt(e)&&(n.top=e,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(t,e){var n=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(n.width*t/n.naturalWidth,null,e)},zoomTo:function(t,e,n){var r=this.options,i=this.canvasData,o=i.width,a=i.height,s=i.naturalWidth,u=i.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&r.zoomable){var c=s*t,h=u*t;if(!1===Ct(this.element,X,{ratio:t,oldRatio:o/s,originalEvent:n}))return this;if(n){var l=this.pointers,f=Dt(this.cropper),d=l&&Object.keys(l).length?function(t){var e=0,n=0,r=0;return lt(t,(function(t){var i=t.startX,o=t.startY;e+=i,n+=o,r+=1})),{pageX:e/=r,pageY:n/=r}}(l):{pageX:n.pageX,pageY:n.pageY};i.left-=(c-o)*((d.pageX-f.left-i.left)/o),i.top-=(h-a)*((d.pageY-f.top-i.top)/a)}else st(e)&&nt(e.x)&&nt(e.y)?(i.left-=(c-o)*((e.x-i.left)/o),i.top-=(h-a)*((e.y-i.top)/a)):(i.left-=(c-o)/2,i.top-=(h-a)/2);i.width=c,i.height=h,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return nt(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,nt(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(nt(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.imageData,r=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(nt(t)&&(n.scaleX=t,r=!0),nt(e)&&(n.scaleY=e,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.options,r=this.imageData,i=this.canvasData,o=this.cropBoxData;if(this.ready&&this.cropped){t={x:o.left-i.left,y:o.top-i.top,width:o.width,height:o.height};var a=r.width/r.naturalWidth;if(lt(t,(function(e,n){t[n]=e/a})),e){var s=Math.round(t.y+t.height),u=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=u-t.x,t.height=s-t.y}}else t={x:0,y:0,width:0,height:0};return n.rotatable&&(t.rotate=r.rotate||0),n.scalable&&(t.scaleX=r.scaleX||1,t.scaleY=r.scaleY||1),t},setData:function(t){var e=this.options,n=this.imageData,r=this.canvasData,i={};if(this.ready&&!this.disabled&&st(t)){var o=!1;e.rotatable&&nt(t.rotate)&&t.rotate!==n.rotate&&(n.rotate=t.rotate,o=!0),e.scalable&&(nt(t.scaleX)&&t.scaleX!==n.scaleX&&(n.scaleX=t.scaleX,o=!0),nt(t.scaleY)&&t.scaleY!==n.scaleY&&(n.scaleY=t.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var a=n.width/n.naturalWidth;nt(t.x)&&(i.left=t.x*a+r.left),nt(t.y)&&(i.top=t.y*a+r.top),nt(t.width)&&(i.width=t.width*a),nt(t.height)&&(i.height=t.height*a),this.setCropBoxData(i)}return this},getContainerData:function(){return this.ready?ft({},this.containerData):{}},getImageData:function(){return this.sized?ft({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&lt(["left","top","width","height","naturalWidth","naturalHeight"],(function(n){e[n]=t[n]})),e},setCanvasData:function(t){var e=this.canvasData,n=e.aspectRatio;return this.ready&&!this.disabled&&st(t)&&(nt(t.left)&&(e.left=t.left),nt(t.top)&&(e.top=t.top),nt(t.width)?(e.width=t.width,e.height=t.width/n):nt(t.height)&&(e.height=t.height,e.width=t.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,n,r=this.cropBoxData,i=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&st(t)&&(nt(t.left)&&(r.left=t.left),nt(t.top)&&(r.top=t.top),nt(t.width)&&t.width!==r.width&&(e=!0,r.width=t.width),nt(t.height)&&t.height!==r.height&&(n=!0,r.height=t.height),i&&(e?r.height=r.width/i:n&&(r.width=r.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,n=Ft(this.image,this.imageData,e,t);if(!this.cropped)return n;var r=this.getData(),i=r.x,o=r.y,s=r.width,u=r.height,c=n.width/Math.floor(e.naturalWidth);1!==c&&(i*=c,o*=c,s*=c,u*=c);var h=s/u,l=Lt({aspectRatio:h,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),f=Lt({aspectRatio:h,width:t.minWidth||0,height:t.minHeight||0},"cover"),d=Lt({aspectRatio:h,width:t.width||(1!==c?n.width:s),height:t.height||(1!==c?n.height:u)}),p=d.width,v=d.height;p=Math.min(l.width,Math.max(f.width,p)),v=Math.min(l.height,Math.max(f.height,v));var g=document.createElement("canvas"),m=g.getContext("2d");g.width=pt(p),g.height=pt(v),m.fillStyle=t.fillColor||"transparent",m.fillRect(0,0,p,v);var y=t.imageSmoothingEnabled,b=void 0===y||y,w=t.imageSmoothingQuality;m.imageSmoothingEnabled=b,w&&(m.imageSmoothingQuality=w);var _,E,k,I,T,S,A=n.width,C=n.height,D=i,x=o;D<=-s||D>A?(D=0,_=0,k=0,T=0):D<=0?(k=-D,D=0,T=_=Math.min(A,s+D)):D<=A&&(k=0,T=_=Math.min(s,A-D)),_<=0||x<=-u||x>C?(x=0,E=0,I=0,S=0):x<=0?(I=-x,x=0,S=E=Math.min(C,u+x)):x<=C&&(I=0,S=E=Math.min(u,C-x));var N=[D,x,_,E];if(T>0&&S>0){var O=p/s;N.push(k*O,I*O,T*O,S*O)}return m.drawImage.apply(m,[n].concat(a(N.map((function(t){return Math.floor(pt(t))}))))),g},setAspectRatio:function(t){var e=this.options;return this.disabled||it(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,n=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var i=t===P,o=e.movable&&t===M;t=i||o?t:L,e.dragMode=t,kt(n,O,t),bt(n,T,i),bt(n,N,o),e.cropBoxMovable||(kt(r,O,t),bt(r,T,i),bt(r,N,o))}return this}},Wt=c.Cropper,Xt=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e(this,t),!n||!Z.test(n.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=n,this.options=ft({},tt,st(r)&&r),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return r=t,o=[{key:"noConflict",value:function(){return window.Cropper=Wt,t}},{key:"setDefaults",value:function(t){ft(tt,st(t)&&t)}}],(i=[{key:"init",value:function(){var t,e=this.element,n=e.tagName.toLowerCase();if(!e.cropper){if(e.cropper=this,"img"===n){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===n&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e,n,r,i,o=this;if(t){this.url=t,this.imageData={};var a=this.element,s=this.options;if(s.rotatable||s.scalable||(s.checkOrientation=!1),s.checkOrientation&&window.ArrayBuffer)if($.test(t))J.test(t)?this.read((e=t.replace(Vt,""),n=atob(e),r=new ArrayBuffer(n.length),lt(i=new Uint8Array(r),(function(t,e){i[e]=n.charCodeAt(e)})),r)):this.clone();else{var u=new XMLHttpRequest,c=this.clone.bind(this);this.reloading=!0,this.xhr=u,u.onabort=c,u.onerror=c,u.ontimeout=c,u.onprogress=function(){u.getResponseHeader("content-type")!==Y&&u.abort()},u.onload=function(){o.read(u.response)},u.onloadend=function(){o.reloading=!1,o.xhr=null},s.checkCrossOrigin&&Ot(t)&&a.crossOrigin&&(t=Rt(t)),u.open("GET",t,!0),u.responseType="arraybuffer",u.withCredentials="use-credentials"===a.crossOrigin,u.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,n=this.imageData,r=Bt(t),i=0,o=1,a=1;if(r>1){this.url=function(t,e){for(var n=[],r=new Uint8Array(t);r.length>0;)n.push(Ut.apply(null,ht(r.subarray(0,8192)))),r=r.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(n.join("")))}(t,Y);var s=function(t){var e=0,n=1,r=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:r=-1;break;case 5:e=90,r=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90}return{rotate:e,scaleX:n,scaleY:r}}(r);i=s.rotate,o=s.scaleX,a=s.scaleY}e.rotatable&&(n.rotate=i),e.scalable&&(n.scaleX=o,n.scaleY=a),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,n=t.crossOrigin,r=e;this.options.checkCrossOrigin&&Ot(e)&&(n||(n="anonymous"),r=Rt(e)),this.crossOrigin=n,this.crossOriginUrl=r;var i=document.createElement("img");n&&(i.crossOrigin=n),i.src=r||e,i.alt=t.alt||"The image to crop",this.image=i,i.onload=this.start.bind(this),i.onerror=this.stop.bind(this),mt(i,C),t.parentNode.insertBefore(i,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var n=c.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(c.navigator.userAgent),r=function(e,n){ft(t.imageData,{naturalWidth:e,naturalHeight:n,aspectRatio:e/n}),t.initialImageData=ft({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||n){var i=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=i,i.onload=function(){r(i.width,i.height),n||o.removeChild(i)},i.src=e.src,n||(i.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(i))}else r(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,n=this.image,r=t.parentNode,i=document.createElement("div");i.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var o=i.querySelector(".".concat(f,"-container")),a=o.querySelector(".".concat(f,"-canvas")),s=o.querySelector(".".concat(f,"-drag-box")),u=o.querySelector(".".concat(f,"-crop-box")),c=u.querySelector(".".concat(f,"-face"));this.container=r,this.cropper=o,this.canvas=a,this.dragBox=s,this.cropBox=u,this.viewBox=o.querySelector(".".concat(f,"-view-box")),this.face=c,a.appendChild(n),mt(t,A),r.insertBefore(o,t.nextSibling),this.isImg||yt(n,C),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,mt(u,A),e.guides||mt(u.getElementsByClassName("".concat(f,"-dashed")),A),e.center||mt(u.getElementsByClassName("".concat(f,"-center")),A),e.background&&mt(o,"".concat(f,"-bg")),e.highlight||mt(c,D),e.cropBoxMovable&&(mt(c,N),kt(c,O,d)),e.cropBoxResizable||(mt(u.getElementsByClassName("".concat(f,"-line")),A),mt(u.getElementsByClassName("".concat(f,"-point")),A)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),ut(e.ready)&&At(t,z,e.ready,{once:!0}),Ct(t,z)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),yt(this.element,A))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&n(r.prototype,i),o&&n(r,o),t;var r,i,o}();return ft(Xt.prototype,jt,qt,Ht,Kt,zt,Gt),Xt}()},366:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(257),i=n(627);const o=class{constructor(t,e){this.uid=t,this.util=new r.Z,this.db=new i.Z,this.vaults=e}updateEditLinks(t){document.querySelector(`details a#id${t}`).addEventListener("click",(e=>{this.renderVault(t)}))}renderVaults(){const t=document.querySelector("section#vaults div.contents");t.innerHTML="",this.vaults.forEach((e=>{let n;this.db.data().collection(`vaults/${this.uid}/vault/${e.vault_id}/values`).get().then((r=>{let i=[];r.forEach((t=>{i.push(parseFloat(t.data().value))})),(()=>{const t=i.reduce(((t,e)=>t+e));n="string"==typeof t?"R$0,00":this.util.formatPrice(t)})(),this.util.appendToTemplate(t,"details",`\n                <summary>${e.vault_identify}</summary>\n                <p>Necessário: <strong>${this.util.formatPrice(e.vault_value)}</strong></p>\n                <p>Você tem: <strong>${n}</strong></p>\n                <a id="id${e.vault_id}">\n                    <img src="assets/svg/edit.svg" alt="Editar ${e.vault_identify}" />\n                    editar seu cofrinho\n                </a>\n                `,{id:"item"+e.vault_id}),this.updateEditLinks(e.vault_id),this.util.addOpen()}))}))}renderVault(t){const e=document.querySelector("section#edit_vault");let n,r=[];this.db.data().collection(`vaults/${this.uid}/vault`).doc(t).get().then((i=>{let o;n=i.data(),this.db.data().collection(`vaults/${this.uid}/vault`).doc(t).collection("values").get().then((i=>{i.forEach((a=>{r.push(a.data());let s=[];i.forEach((t=>{s.push(parseFloat(t.data().value))})),o=(()=>{const t=s.reduce(((t,e)=>t+e));return"string"==typeof t?"R$0,00":this.util.formatPrice(t)})(),e.innerHTML="",this.util.appendToTemplate(e,"header",`\n                        <h2>${n.vault_identify}</h2>\n                        <button type="button"><img src="assets/svg/delete.svg" alt="Apagar cofre" /></button>\n                    `),this.util.appendToTemplate(e,"div",`\n                    <h3>${n.vault_description}</h3>\n                    <div class="values">\n                        <div class="value">\n                            <p>Valor:</p>\n                            <strong>${this.util.formatPrice(n.vault_value)}</strong>\n                        </div>\n                        <div class="value">\n                            <p>Guardado: </p><strong class="vaulted">${o}</strong>\n                        </div>\n                    </div>\n                    </div>\n                    <hr />\n                    <div id="history">\n                    </div>\n                    `,{class:"contents"});const u=document.querySelector("div#history");r.forEach(((t,e)=>{0!=t.value&&this.util.appendToTemplate(u,"div",`\n                            <div>\n                            <p>Data: <span>${t.date}</span></p>\n                            <p>Valor: <span class="value_history">${this.util.formatPrice(t.value)}</span></p>\n                            <p>Onde: <span>${t.where}</span></p>\n                            </div>\n                            <div>\n                                <button type="button" id="${t.id}">\n                                    <img src="assets/svg/delete.svg" alt="Apagar reserva" />\n                                </button>\n                            </div>\n                            `,{class:`history id-${t.id}`})})),this.util.appendToTemplate(e,"footer",`\n                        <div class="buttons">\n                            <a href="#">\n                                <img src="assets/svg/back.svg" alt="Voltar" />\n                                <span>voltar</span>\n                            </a>\n                            <button type="button">\n                                <img src="assets/svg/add_value.svg" alt="Adicionar Valor" />\n                                adicionar valor\n                            </button>\n                        </div>\n                        <div class="add_values">\n                            <form id="${t}">\n                                <p>adicionar uma quantia</p>\n                                <div class="fields">\n                                    <div class="field">\n                                        <label for="vault_add_cash">Quanto você vai adicionar?</label>\n                                        <input type="number" name="vault_add_cash" id="vault_add_cash" placeholder="Digite o valor" required />\n                                    </div>\n                                    <div class="field">\n                                        <label for="vault_add_local">Onde está o dinheiro?</label>\n                                        <input type="text" name="vault_add_local" id="vault_add_local" placeholder="Banco, Carteira, Gaveta" required />\n                                    </div>\n                                </div>\n                                <div class="buttons">\n                                    <button type="button">\n                                        <img src="assets/svg/down.svg" alt="Cancelar" />\n                                        <span>cancelar</span>\n                                    </button>\n                                    <button type="submit">\n                                        <img src="assets/svg/save.svg" alt="Salvar" />\n                                        salvar\n                                    </button>\n                                </div>\n                            </form>\n                        </div>`)})),window.location.hash="#edit_vault";const a=e.querySelector("footer .buttons a"),s=e.querySelector("footer .add_values"),u=e.querySelector("footer .buttons button"),c=e.querySelector("footer div.add_values .buttons button[type=button]");u&&s&&c&&(u.addEventListener("click",(()=>{this.util.menuHandler(s)})),c.addEventListener("click",(()=>{this.util.menuHandler(s)})),s.addEventListener("submit",(n=>{n.preventDefault();const r=e.querySelector("footer .add_values form");this.db.insertValue(t,this.uid,this.util.getFormValues(r)),this.renderVault(t)})),a.addEventListener("click",(t=>{t.preventDefault(),this.renderVaults(),window.location.hash="#"})));const h=document.querySelector("#edit_vault > header > button");h&&h.addEventListener("click",(e=>{this.db.delete(t,this.uid),document.querySelector(`#item${t}`).remove(),window.location.hash="#"})),document.querySelectorAll("div#history button").forEach((e=>{e.addEventListener("click",(n=>{n.preventDefault(),this.db.deleteHistory(t,this.uid,e.id),this.renderVaults()}))}))}))}))}}},627:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _Firebase_Firebase__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(653),_ClassUtils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(257),_Class_ClassDOM__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(366);class ClassFirebase{constructor(){this.db=_Firebase_Firebase__WEBPACK_IMPORTED_MODULE_0__.Z.firestore(),this.utils=new _ClassUtils__WEBPACK_IMPORTED_MODULE_2__.Z,this.storage=_Firebase_Firebase__WEBPACK_IMPORTED_MODULE_0__.Z.storage()}data(){return this.db}getStorage(){return this.storage}insert(t={},e){let n=0;""!==t.vault_add_cash&&(n=t.vault_add_cash);const r=this.utils.getRandom();this.db.collection(`vaults/${e}/vault`).doc(r).set({vault_id:r,vault_identify:t.vault_identify,vault_value:t.vault_value,vault_description:t.vault_description});const i=this.utils.getRandom();this.db.collection(`vaults/${e}/vault/${r}/values`).doc(i).set({id:i,date:this.utils.getToday(),value:n,where:t.vault_add_local}).then((()=>{this.utils.clearAllInputs()}))}select(t,e){let n,r=[];const i=new _Class_ClassDOM__WEBPACK_IMPORTED_MODULE_1__.Z;this.db.collection(`vaults/${e}/vault`).doc(t).get().then((o=>{n=o.data(),this.db.collection(`vaults/${e}/vault`).doc(t).collection("values").get().then((t=>{t.forEach((t=>{r.push(t.data()),i.renderVault(n,r)}))}))}))}insertValue(id,uid,data={}){const random=this.utils.getRandom(),vaultValues=this.db.collection(`vaults/${uid}/vault/${id}/values`).doc(random);vaultValues.set({id:random,date:this.utils.getToday(),value:data.vault_add_cash,where:data.vault_add_local}).then((()=>{this.utils.clearAllInputs();const sum=[];document.querySelectorAll("#history span.value_history").forEach((item=>{const value=item.innerHTML.replace("R$&nbsp;","").replace(",",".");sum.push(parseFloat(value));const result=sum.reduce(((item,total)=>eval(item+total)));document.querySelector(".value strong.vaulted").innerHTML=this.utils.formatPrice(result)}))})).catch((t=>{console.error("erro",t)}))}delete(t,e){this.db.collection(`vaults/${e}/vault`).doc(t).delete().then((()=>{})).catch((t=>{console.log(t)}))}deleteHistory(vaultId,uid,id){this.db.collection(`vaults/${uid}/vault/${vaultId}/values`).doc(id).delete().then((()=>{document.querySelector(`.id-${id}`).remove();const sum=[];document.querySelectorAll("#history span.value_history").forEach((item=>{const value=item.innerHTML.replace("R$&nbsp;","").replace(",",".");sum.push(parseFloat(value));let result=0;result=sum.reduce(((item,total)=>eval(item+total)),0),document.querySelector(".value strong.vaulted").innerHTML=this.utils.formatPrice(result)})),console.log("sum",sum),0==sum.length&&(document.querySelector(".value strong.vaulted").innerHTML="R$ 0,00")})).catch((t=>{console.log(t)}))}updateProfile(t,e={}){console.log(t,e),this.db.collection("profile").doc(t).set({name:e.name,birthday:e.birthday,zipcode:e.zipcode,address:e.address,district:e.district,city:e.city,state:e.state})}selectProfile(t){let e;this.db.collection("profile").doc(t).get().then((t=>{e=t.data()})),console.log(e)}}const __WEBPACK_DEFAULT_EXPORT__=ClassFirebase},257:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});class Utils{getFormValues(t){const e={};return t.querySelectorAll("[name]").forEach((n=>{switch(n.type){case"select":e[n.name]=n.querySelector("option:selected")?.value;break;case"radio":e[n.name]=t.querySelector(`[name=${n.name}]:checked`)?.value;break;case"checkbox":e[n.name]=[],t.querySelectorAll(`[name=${n.name}]:checked`).forEach((t=>{e[n.name].push(t.value)}));break;default:e[n.name]=n.value}})),e}setFormValues(t,e){Object.keys(e).forEach((n=>{const r=t.querySelector(`[name=${n}]`);switch(r.type){case"select":r.querySelector(`option[value=${e[n]}]`).selected=!0;break;case"radio":case"checkbox":t.querySelector(`[name=${n}][value=${e[n]}]`).checked=!0;break;default:r.value=e[n]}}))}errorHandler(t){switch(t){case"auth/user-not-found":return"Não foi possível encontrar o e-mail informado";case"auth/user-not-found":case"auth/wrong-password":return"Não foi possível acessar: E-mail ou senha inválidos";case"auth/email-already-in-use":return"Este e-mail já está cadastrado. Tente acessar sua conta ou&nbsp; <a href='#forget'> recupere sua senha</a>"}}showAlert(t,e,n){const r=document.querySelector(`section.${t} .alert`);r.classList.add(e),r.innerHTML=n}hideAlert(t,e){const n=document.querySelector(`section.${t} .alert`);n.classList.remove(e),n.innerHTML=""}getRandom(){return(Math.floor(5e4*Math.random())+1e3).toString()}appendToTemplate(t,e,n,r=null){const i=document.createElement(e);if(r)for(let t in r)i.setAttribute(t,r[t]);return i.innerHTML=n,t.append(i),i}menuHandler(t){t.classList.toggle("open")}formatPrice(t){return parseFloat(t).toLocaleString("pt-br",{style:"currency",currency:"BRL"})}getToday(){const date=new Date,day=date.getDate();let month;switch(date.getMonth()){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:month=`0${eval(date.getMonth()+1)}`;break;default:month=eval(date.getMonth()+1)}const year=date.getFullYear();return`${day}/${month}/${year}`}changeSection(t){switch(document.querySelectorAll("#app section").forEach((t=>{t.classList.remove("show")})),t){default:document.querySelector("#vaults").classList.add("show"),this.addOpen();break;case"#new":document.querySelector("#new_vault").classList.add("show"),this.clearAllInputs();break;case"#edit_vault":document.querySelector("#edit_vault").classList.add("show"),this.clearAllInputs();break;case"#profile":document.querySelector("#profile").classList.add("show")}}addOpen(){window.innerWidth>=768&&document.querySelectorAll("details").forEach((t=>{t.setAttribute("open","open")}))}clearAllInputs(){const t=[];document.querySelector("#new_vault").querySelectorAll("input").forEach((e=>{t.push(e)})),document.querySelector("#edit_vault").querySelectorAll("input").forEach((e=>{t.push(e)})),t.forEach((t=>{t.value=""}))}}const __WEBPACK_DEFAULT_EXPORT__=Utils},653:(t,e,n)=>{"use strict";n.d(e,{Z:()=>Kv});const r=JSON.parse('{"hosting":{"public":"public","ignore":["firebase.json","**/.*","**/node_modules/**"]},"apiKey":"AIzaSyBcegZP4So6J782xtQa5OE53904efXM5l0","authDomain":"seu-cofrinho.firebaseapp.com","projectId":"seu-cofrinho","storageBucket":"seu-cofrinho.appspot.com","messagingSenderId":"965473413399","appId":"1:965473413399:web:03fc625cac3e6d161aaf52"}');var i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.create,Object.create;var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};Object.create,Object.create;function a(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=a(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function u(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function c(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}var h=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,l.prototype.create),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),l=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?f(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new h(i,s,r);return u},t}();function f(t,e){return t.replace(d,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var d=/\{\$([^}]+)}/g;function p(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function v(t,e){var n=new g(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=h^u&(c^h),a=1518500249):(o=u^c^h,a=1859775393):r<60?(o=u&c|h&(u|c),a=2400959708):(o=u^c^h,a=3395469782),i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var g=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=m),void 0===r.error&&(r.error=m),void 0===r.complete&&(r.complete=m);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function m(){}function y(t){return t&&t._delegate?t._delegate:t}var b=function(){return(b=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function w(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function _(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create,Object.create;var E,k=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),I="[DEFAULT]",T=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=I);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new s;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=b({identifier:I,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService({instanceIdentifier:i});if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:I})}catch(t){}try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=w(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=I),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,(function(){var t;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(_(_([],w(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),w(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=I),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=void 0===e?I:e,r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(n);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:o,options:i})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===I?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:I:t},t}(),S=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new T(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function A(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var C,D=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(C||(C={}));var x,N={debug:C.DEBUG,verbose:C.VERBOSE,info:C.INFO,warn:C.WARN,error:C.ERROR,silent:C.SILENT},O=C.INFO,R=((E={})[C.DEBUG]="log",E[C.VERBOSE]="log",E[C.INFO]="info",E[C.WARN]="warn",E[C.ERROR]="error",E),P=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=R[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,A(["["+i+"]  "+t.name+":"],n))}},M=function(){function t(t){this.name=t,this._logLevel=O,this._logHandler=P,this._userLogHandler=null,D.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in C))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?N[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,A([this,C.DEBUG],t)),this._logHandler.apply(this,A([this,C.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,A([this,C.VERBOSE],t)),this._logHandler.apply(this,A([this,C.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,A([this,C.INFO],t)),this._logHandler.apply(this,A([this,C.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,A([this,C.WARN],t)),this._logHandler.apply(this,A([this,C.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,A([this,C.ERROR],t)),this._logHandler.apply(this,A([this,C.ERROR],t))},t}();function L(t){D.forEach((function(e){e.setLogLevel(t)}))}var F,U=((x={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",x["bad-app-name"]="Illegal App name: '{$appName}",x["duplicate-app"]="Firebase App named '{$appName}' already exists",x["app-deleted"]="Firebase App named '{$appName}' already deleted",x["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",x["invalid-log-argument"]="First argument to `onLog` must be null or a function.",x),V=new l("app","Firebase",U),B="@firebase/app",j="[DEFAULT]",q=((F={})[B]="fire-core",F["@firebase/analytics"]="fire-analytics",F["@firebase/auth"]="fire-auth",F["@firebase/database"]="fire-rtdb",F["@firebase/functions"]="fire-fn",F["@firebase/installations"]="fire-iid",F["@firebase/messaging"]="fire-fcm",F["@firebase/performance"]="fire-perf",F["@firebase/remote-config"]="fire-rc",F["@firebase/storage"]="fire-gcs",F["@firebase/firestore"]="fire-fst",F["fire-js"]="fire-js",F["firebase-wrapper"]="fire-js-all",F),H=new M("@firebase/app"),K=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=a(void 0,t),this.container=new S(e.name),this._addComponent(new k("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=j),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=j),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){H.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw V.create("app-deleted",{appName:this.name_})},t}();K.prototype.name&&K.prototype.options||K.prototype.delete||console.log("dc");var z=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=j);var a=o.name;if("string"!=typeof a||!a)throw V.create("bad-app-name",{appName:String(a)});if(p(e,a))throw V.create("duplicate-app",{appName:a});var s=new t(n,o,r);return e[a]=s,s},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=q[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void H.warn(u.join(" "))}o(new k(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:L,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw V.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=N[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:C[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=D;r<i.length;r++)n(i[r])}(t,e)},apps:null,SDK_VERSION:"8.3.2",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!p(e,t=t||j))throw V.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return H.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw V.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&a(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++){var l=h[c];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(K);return e.INTERNAL=i(i({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){a(e,t)},createSubscribe:v,ErrorFactory:l,deepExtend:a}),e}(),G=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if("object"==typeof self&&self.self===self&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var W=self.firebase.SDK_VERSION;W&&W.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var X=z.initializeApp;z.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return c()&&H.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),X.apply(void 0,t)};var Y=z;!function(t,e){t.INTERNAL.registerComponent(new k("platform-logger",(function(t){return new G(t)}),"PRIVATE")),t.registerVersion(B,"0.6.18",void 0),t.registerVersion("fire-js","")}(Y);const Q=Y;Q.registerVersion("firebase","8.3.2","app"),function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,n){if(n){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(n=n(o=i[t=t[t.length-1]]))!=o&&null!=n&&e(i,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=r.setTimeout;n.prototype.c=function(t){a(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),a=r.next();!a.done;a=r.next())i(a.value).Qa(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).Qa(o(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var a=a||{},s=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function h(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function l(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==f(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function g(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++y)}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var k=Date.now;function I(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function T(t){return t}function S(t,e,n){this.code=D+t,this.message=e||x[t]||"",this.a=n||null}function A(t){var e=t&&t.code;return e?new S(e.substring(D.length),t.message,t.serverResponse):null}I(S,Error),S.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},S.prototype.toJSON=function(){return this.w()};var C,D="auth/",x={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function O(t){for(var e in N)if(N[e].id===t)return{firebaseEndpoint:(t=N[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function R(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function P(t){if(Error.captureStackTrace)Error.captureStackTrace(this,P);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function M(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");P.call(this,n+t[r])}function L(t,e){throw new M("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function F(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function U(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function V(){this.b=this.a=null}C=O("__EID__")?"__EID__":void 0,I(P,Error),P.prototype.name="CustomError",I(M,P),M.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var B=new F((function(){return new q}),(function(t){t.reset()}));function j(){var t=we,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function q(){this.next=this.b=this.a=null}V.prototype.add=function(t,e){var n=B.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},q.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},q.prototype.reset=function(){this.next=this.b=this.a=null};var H=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},K=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},z=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},G=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function X(t,e){return 0<=H(t,e)}function Y(t,e){var n;return(n=0<=(e=H(t,e)))&&Array.prototype.splice.call(t,e,1),n}function $(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function J(t){return Array.prototype.concat.apply([],arguments)}function Z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var tt,et=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},nt=/&/g,rt=/</g,it=/>/g,ot=/"/g,at=/'/g,st=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function ht(t,e){return t<e?-1:t>e?1:0}t:{var lt=s.navigator;if(lt){var ft=lt.userAgent;if(ft){tt=ft;break t}}tt=""}function dt(t){return ct(tt,t)}function pt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<mt.length;o++)n=mt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;L("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function wt(t,e){this.a=t===It&&e||"",this.b=kt}function _t(t){return t instanceof wt&&t.constructor===wt&&t.b===kt?t.a:(L("expected object of type Const, got '"+t+"'"),"type_error:Const")}wt.prototype.sa=!0,wt.prototype.ra=function(){return this.a},wt.prototype.toString=function(){return"Const{"+this.a+"}"};var Et,kt={},It={};function Tt(){if(void 0===Et){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:T,createScript:T,createScriptURL:T})}catch(t){s.console&&s.console.error(t.message)}Et=t}else Et=t}return Et}function St(t,e){this.a=e===Nt?t:""}function At(t){return t instanceof St&&t.constructor===St?t.a:(L("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function Ct(t,e){var n=_t(t);if(!xt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Tt();return new St(t=e?e.createScriptURL(t):t,Nt)}(t=n.replace(Dt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof wt?_t(t):encodeURIComponent(String(t))})))}St.prototype.sa=!0,St.prototype.ra=function(){return this.a.toString()},St.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Dt=/%{(\w+)}/g,xt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Nt={};function Ot(t,e){this.a=e===Vt?t:""}function Rt(t){return t instanceof Ot&&t.constructor===Ot?t.a:(L("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}Ot.prototype.sa=!0,Ot.prototype.ra=function(){return this.a.toString()},Ot.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Pt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Mt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Lt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ft(t){if(t instanceof Ot)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Lt.test(t))t=new Ot(t,Vt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Mt);t=e&&Pt.test(e[1])?new Ot(t,Vt):null}return t}function Ut(t){return t instanceof Ot?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Lt.test(t)||(t="about:invalid#zClosurez"),new Ot(t,Vt))}var Vt={},Bt=new Ot("about:invalid#zClosurez",Vt);function jt(t,e,n){this.a=n===qt?t:""}jt.prototype.sa=!0,jt.prototype.ra=function(){return this.a.toString()},jt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var qt={};function Ht(t,e,n,r){return t=t instanceof Ot?t:Ut(t),e=e||s,n=n instanceof wt?_t(n):n||"",e.open(Rt(t),n,r,void 0)}function Kt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function zt(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(nt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(rt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(it,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ot,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(at,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function Gt(t){return Gt[" "](t),t}Gt[" "]=l;var Wt,Xt,Yt=dt("Opera"),Qt=dt("Trident")||dt("MSIE"),$t=dt("Edge"),Jt=$t||Qt,Zt=dt("Gecko")&&!(ct(tt.toLowerCase(),"webkit")&&!dt("Edge"))&&!(dt("Trident")||dt("MSIE"))&&!dt("Edge"),te=ct(tt.toLowerCase(),"webkit")&&!dt("Edge");function ee(){var t=s.document;return t?t.documentMode:void 0}t:{var ne="",re=(Xt=tt,Zt?/rv:([^\);]+)(\)|;)/.exec(Xt):$t?/Edge\/([\d\.]+)/.exec(Xt):Qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Xt):te?/WebKit\/(\S+)/.exec(Xt):Yt?/(?:Version)[ \/]?(\S+)/.exec(Xt):void 0);if(re&&(ne=re?re[1]:""),Qt){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Wt=String(ie);break t}}Wt=ne}var oe,ae={};function se(t){return function(t,e){var n=ae;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=et(String(Wt)).split("."),r=et(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ht(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ht(0==a[2].length,0==s[2].length)||ht(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}s.document&&Qt?oe=ee()||parseInt(Wt,10)||void 0:oe=void 0;var ue=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Xt){}var ce=!Qt||9<=Number(ue);function he(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function le(t,e){pt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:pe.hasOwnProperty(n)?t.setAttribute(pe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var fe,de,pe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ve(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||v(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(v(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){a="function"==typeof o.item;break t}}a=!1}K(a?Z(o):o,r)}}}function ge(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function me(t){s.setTimeout((function(){throw t}),0)}function ye(t,e){de||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);de=function(){t.then(_e)}}else de=function(){var t=_e;!p(s.setImmediate)||s.Window&&s.Window.prototype&&!dt("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(fe||(fe=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!dt("Presto")&&(t=function(){var t=ge(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!dt("Trident")&&!dt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),fe(t)):s.setImmediate(t)}}(),be||(de(),be=!0),we.add(t,e)}var be=!1,we=new V;function _e(){for(var t;t=j();){try{t.a.call(t.b)}catch(t){me(t)}U(B,t)}be=!1}function Ee(t,e){if(this.a=ke,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){Le(n,Ie,t)}),(function(t){if(!(t instanceof He))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Le(n,Te,t)}))}catch(t){Le(this,Te,t)}}var ke=0,Ie=2,Te=3;function Se(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Se.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ae=new F((function(){return new Se}),(function(t){t.reset()}));function Ce(t,e,n){var r=Ae.get();return r.g=t,r.b=e,r.f=n,r}function De(t){if(t instanceof Ee)return t;var e=new Ee(l);return Le(e,Ie,t),e}function xe(t){return new Ee((function(e,n){n(t)}))}function Ne(t,e,n){Fe(t,e,n,null)||ye(E(e,t))}function Oe(t){return new Ee((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ne(t[o],E(i,o,!0),E(i,o,!1));else e(r)}))}function Re(t,e){if(t.a==ke)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==ke&&1==r?Re(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ve(n),Be(n,i,Te,e)))}t.c=null}else Le(t,Te,e)}function Pe(t,e){t.b||t.a!=Ie&&t.a!=Te||Ue(t),t.f?t.f.next=e:t.b=e,t.f=e}function Me(t,e,n,r){var i=Ce(null,null,null);return i.a=new Ee((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof He?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Pe(t,i),i.a}function Le(t,e,n){t.a==ke&&(t===n&&(e=Te,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Fe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Ue(t),e!=Te||n instanceof He||function(t,e){t.g=!0,ye((function(){t.g&&qe.call(null,e)}))}(t,n)))}function Fe(t,e,n,r){if(t instanceof Ee)return Pe(t,Ce(e||l,n||null,r)),!0;if(R(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Ue(t){t.h||(t.h=!0,ye(t.gc,t))}function Ve(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Be(t,e,n,r){if(n==Te&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,je(e,n,r);else try{e.c?e.g.call(e.f):je(e,n,r)}catch(t){qe.call(null,t)}U(Ae,e)}function je(t,e,n){e==Ie?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Ee.prototype.then=function(t,e,n){return Me(this,p(t)?t:null,p(e)?e:null,n)},Ee.prototype.$goog_Thenable=!0,(t=Ee.prototype).oa=function(t,e){return(t=Ce(t,t,e)).c=!0,Pe(this,t),this},t.o=function(t,e){return Me(this,null,t,e)},t.cancel=function(t){if(this.a==ke){var e=new He(t);ye((function(){Re(this,e)}),this)}},t.$c=function(t){this.a=ke,Le(this,Ie,t)},t.ad=function(t){this.a=ke,Le(this,Te,t)},t.gc=function(){for(var t;t=Ve(this);)Be(this,t,this.a,this.i);this.h=!1};var qe=me;function He(t){P.call(this,t)}function Ke(){0!=ze&&(Ge[g(this)]=this),this.xa=this.xa,this.pa=this.pa}I(He,P),He.prototype.name="cancel";var ze=0,Ge={};function We(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=ze)){var e=g(t);if(0!=ze&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ge[e]}}Ke.prototype.xa=!1,Ke.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Xe=Object.freeze||function(t){return t},Ye=!Qt||9<=Number(ue),Qe=Qt&&!se("9"),$e=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",l,e),s.removeEventListener("test",l,e)}catch(t){}return t}();function Je(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ze(t,e){if(Je.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{Gt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:tn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Je.prototype.preventDefault=function(){this.defaultPrevented=!0},I(Ze,Je);var tn=Xe({2:"touch",3:"pen",4:"mouse"});Ze.prototype.preventDefault=function(){Ze.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Qe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Ze.prototype.g=function(){return this.a};var en="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++nn,this.va=this.Pa=!1}function on(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function an(t){this.src=t,this.a={},this.b=0}function sn(t,e){var n=e.type;n in t.a&&Y(t.a[n],e)&&(on(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function un(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}an.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=un(t,e,r,i);return-1<a?(e=t[a],n||(e.Pa=!1)):((e=new rn(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var cn="closure_lm_"+(1e6*Math.random()|0),hn={};function ln(t,e,n,r,i){if(r&&r.once)dn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=En(n),t&&t[en]?In(t,e,n,v(r)?!!r.capture:!!r,i):fn(t,e,n,!1,r,i)}function fn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=v(i)?!!i.capture:!!i,s=wn(t);if(s||(t[cn]=s=new an(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=bn,e=Ye?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$e||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else n=En(n),t&&t[en]?Tn(t,e,n,v(r)?!!r.capture:!!r,i):fn(t,e,n,!0,r,i)}function pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=En(n),t&&t[en]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=un(o=t.a[e],n,r,i))&&(on(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=wn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=un(e,n,r,i)),(n=-1<t?e[t]:null)&&vn(n))}function vn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[en])sn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wn(e))?(sn(n,t),0==n.b&&(n.src=null,e[cn]=null)):on(t)}}}function gn(t){return t in hn?hn[t]:hn[t]="on"+t}function mn(t,e,n,r){var i=!0;if((t=wn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=yn(o,r),i=i&&!1!==o)}return i}function yn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&vn(t),n.call(r,e)}function bn(t,e){if(t.va)return!0;if(!Ye){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ze(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=mn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=mn(r[i],t,!1,e),n=n&&o}return n}return yn(t,new Ze(e,this))}function wn(t){return(t=t[cn])instanceof an?t:null}var _n="__closure_events_fn_"+(1e9*Math.random()>>>0);function En(t){return p(t)?t:(t[_n]||(t[_n]=function(e){return t.handleEvent(e)}),t[_n])}function kn(){Ke.call(this),this.v=new an(this),this.ac=this,this.gb=null}function In(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Tn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Sn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Va||a.src;a.Pa&&sn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function An(t,e,n){if(p(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Cn(t){var e=null;return new Ee((function(n,r){-1==(e=An((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function Dn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function xn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Nn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Nn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function On(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Rn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Rn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Rn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}I(kn,Ke),kn.prototype[en]=!0,kn.prototype.addEventListener=function(t,e,n,r){ln(this,t,e,n,r)},kn.prototype.removeEventListener=function(t,e,n,r){pn(this,t,e,n,r)},kn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new Je(t,n);else if(t instanceof Je)t.target=t.target||n;else{var i=t;yt(t=new Je(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=Sn(a,r,!0,t)&&i}if(i=Sn(a=t.b=n,r,!0,t)&&i,i=Sn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Sn(a=t.b=e[o],r,!1,t)&&i;return i},kn.prototype.Da=function(){if(kn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)on(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=Nn.prototype).W=function(){On(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return On(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Rn(this.b,t)?this.b[t]:e},t.set=function(t,e){Rn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Mn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Mn?(this.i=void 0!==e?e:t.i,Ln(this,t.c),this.l=t.l,this.a=t.a,Fn(this,t.g),this.f=t.f,Un(this,rr(t.b)),this.h=t.h):t&&(n=String(t).match(Pn))?(this.i=!!e,Ln(this,n[1]||"",!0),this.l=Hn(n[2]||""),this.a=Hn(n[3]||"",!0),Fn(this,n[4]),this.f=Hn(n[5]||"",!0),Un(this,n[6]||"",!0),this.h=Hn(n[7]||"")):(this.i=!!e,this.b=new $n(null,this.i))}function Ln(t,e,n){t.c=n?Hn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Fn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Un(t,e,n){e instanceof $n?(t.b=e,function(t,e){e&&!t.f&&(Jn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tr(this,e),nr(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Kn(e,Yn)),t.b=new $n(e,t.i))}function Vn(t,e,n){t.b.set(e,n)}function Bn(t,e){return t.b.get(e)}function jn(t){return t instanceof Mn?new Mn(t):new Mn(t,void 0)}function qn(t,e,n,r){var i=new Mn(null,void 0);return t&&Ln(i,t),e&&(i.a=e),n&&Fn(i,n),r&&(i.f=r),i}function Hn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Kn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,zn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function zn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Mn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Kn(e,Gn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Kn(e,Gn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Kn(n,"/"==n.charAt(0)?Xn:Wn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Kn(n,Qn)),t.join("")},Mn.prototype.resolve=function(t){var e=new Mn(this),n=!!t.c;n?Ln(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Fn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Un(e,rr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Gn=/[#\/\?@]/g,Wn=/[#\?:]/g,Xn=/[#\?]/g,Yn=/[#\?@]/g,Qn=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Jn(t){t.a||(t.a=new Nn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Zn(t){var e=xn(t);if(void 0===e)throw Error("Keys are undefined");var n=new $n(null,void 0);t=Dn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?nr(n,i,o):n.add(i,o)}return n}function tr(t,e){Jn(t),e=ir(t,e),Rn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Rn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&On(t)))}function er(t,e){return Jn(t),e=ir(t,e),Rn(t.a.b,e)}function nr(t,e,n){tr(t,e),0<n.length&&(t.c=null,t.a.set(ir(t,e),Z(n)),t.b+=n.length)}function rr(t){var e=new $n;return e.c=t.c,t.a&&(e.a=new Nn(t.a),e.b=t.b),e}function ir(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function or(t){var e=[];return sr(new ar,t,e),e.join("")}function ar(){}function sr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),sr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),hr(r,n),n.push(":"),sr(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":hr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=$n.prototype).add=function(t,e){Jn(this),this.c=null,t=ir(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Jn(this),this.a.forEach((function(n,r){K(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Jn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){Jn(this);var e=[];if("string"==typeof t)er(this,t)&&(e=J(e,this.a.get(ir(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=J(e,t[n])}return e},t.set=function(t,e){return Jn(this),this.c=null,er(this,t=ir(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var ur={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},cr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function hr(t,e){e.push('"',t.replace(cr,(function(t){var e=ur[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ur[t]=e),e})),'"')}function lr(){var t=Nr();return Qt&&!!ue&&11==ue||/Edge\/\d+/.test(t)}function fr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function dr(t,e){e=e||s.window;var n="about:blank";t&&(n=Rt(Ft(t)||Bt)),e.location.href=n}function pr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<pr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function vr(t){return!!((t=(t||Nr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function gr(t){t=t||s.window;try{t.close()}catch(t){}}function mr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Nr().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),Cr(Nr())==Sr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ot?n:Ft(void 0!==n.href?n.href:String(n))||Bt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((dt("iPhone")&&!dt("iPod")&&!dt("iPad")||dt("iPad")||dt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(bt(a=ge(document,"A"),"HTMLAnchorElement"),e=e instanceof Ot?e:Ut(e),a.href=Rt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Ht("",r,n,a),t=Rt(e),a&&(Jt&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+zt(t)+'">',t=new jt(t=(r=Tt())?r.createHTML(t):t,null,qt),r=a.document)&&(r.write(function(t){return t instanceof jt&&t.constructor===jt?t.a:(L("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Ht(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var yr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,br=/^[^@]+@[^@]+$/;function wr(){var t=null;return new Ee((function(e){"complete"==s.document.readyState?e():(t=function(){e()},dn(window,"load",t))})).o((function(e){throw pn(window,"load",t),e}))}function _r(t){return t=t||Nr(),!("file:"!==Lr()&&"ionic:"!==Lr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Er(){var t=s.window;try{return!(!t||t==t.top)}catch(t){return!1}}function kr(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function Ir(){return Q.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Q.INTERNAL.hasOwnProperty("node")?"Node":kr()?"Worker":"Browser"}function Tr(){var t=Ir();return"ReactNative"===t||"Node"===t}var Sr="Firefox",Ar="Chrome";function Cr(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?Sr:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Ar:"Safari"}var Dr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function xr(t,e){e=e||[];var n,r=[],i={};for(n in Dr)i[Dr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Ir())?r=Cr(i=Nr()):"Worker"===r&&(r=Cr(i=Nr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Nr(){return s.navigator&&s.navigator.userAgent||""}function Or(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Rr(){try{var t=s.localStorage,e=jr();if(t)return t.setItem(e,"1"),t.removeItem(e),!lr()||!!s.indexedDB}catch(t){return kr()&&!!s.indexedDB}return!1}function Pr(){return(Mr()||"chrome-extension:"===Lr()||_r())&&!Tr()&&Rr()&&!kr()}function Mr(){return"http:"===Lr()||"https:"===Lr()}function Lr(){return s.location&&s.location.protocol||null}function Fr(t){return!vr(t=t||Nr())&&Cr(t)!=Sr}function Ur(t){return void 0===t?null:or(t)}function Vr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Br(t){if(null!==t)return JSON.parse(t)}function jr(t){return t||Math.floor(1e9*Math.random()).toString()}function qr(t){return"Safari"!=Cr(t=t||Nr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Hr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Kr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Nr(),e=Ir(),this.b=vr(t)||"ReactNative"===e}function zr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Gr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Wr(){return!(!Or("fireauth.oauthhelper",s)&&!Or("fireauth.iframe",s))}Kr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Mr()&&"chrome-extension:"!==Lr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Xr,Yr={};function Qr(t){Yr[t]||(Yr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),Xr=2==$r.abcd}catch(Xt){Xr=!1}function Jr(t,e,n){Xr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Zr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Jr(t,n,e[n])}function ti(t){var e={};return Zr(e,t),e}function ei(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Jr(e,n,ei(t[n]));return e}function ni(t){var e=t&&(t[si]?"phone":null);if(!(e&&t&&t[ai]))throw new S("internal-error","Internal assert: invalid MultiFactorInfo object");Jr(this,"uid",t[ai]),Jr(this,"displayName",t[ii]||null);var n=null;t[oi]&&(n=new Date(t[oi]).toUTCString()),Jr(this,"enrollmentTime",n),Jr(this,"factorId",e)}function ri(t){try{var e=new ui(t)}catch(t){e=null}return e}ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ii="displayName",oi="enrolledAt",ai="mfaEnrollmentId",si="phoneInfo";function ui(t){ni.call(this,t),Jr(this,"phoneNumber",t[si])}function ci(t){var e={},n=t[di],r=t[vi],i=t[gi];if(t=ri(t[pi]),!i||i!=li&&i!=fi&&!n||i==fi&&!r||i==hi&&!t)throw Error("Invalid checkActionCode response!");i==fi?(e[yi]=n||null,e[wi]=n||null,e[mi]=r):(e[yi]=r||null,e[wi]=r||null,e[mi]=n||null),e[bi]=t||null,Jr(this,Ei,i),Jr(this,_i,ei(e))}I(ui,ni),ui.prototype.w=function(){var t=ui.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var hi="REVERT_SECOND_FACTOR_ADDITION",li="EMAIL_SIGNIN",fi="VERIFY_AND_CHANGE_EMAIL",di="email",pi="mfaInfo",vi="newEmail",gi="requestType",mi="email",yi="fromEmail",bi="multiFactorInfo",wi="previousEmail",_i="data",Ei="operation";function ki(t){var e=Bn(t=jn(t),Ii)||null,n=Bn(t,Ti)||null,r=Bn(t,Ci)||null;if(r=r&&xi[r]||null,!e||!n||!r)throw new S("argument-error",Ii+", "+Ti+"and "+Ci+" are required in a valid action code URL.");Zr(this,{apiKey:e,operation:r,code:n,continueUrl:Bn(t,Si)||null,languageCode:Bn(t,Ai)||null,tenantId:Bn(t,Di)||null})}var Ii="apiKey",Ti="oobCode",Si="continueUrl",Ai="languageCode",Ci="mode",Di="tenantId",xi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:hi,signIn:li,verifyAndChangeEmail:fi,verifyEmail:"VERIFY_EMAIL"};function Ni(t){try{return new ki(t)}catch(t){return null}}function Oi(t){var e=t[Fi];if(void 0===e)throw new S("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new S("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ri];if(n&&"object"==typeof n){e=n[Bi];var r=n[Ui];if(n=n[Vi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new S("argument-error",Ui+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new S("argument-error",Vi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new S("argument-error",Bi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new S("missing-android-pkg-name")}}else if(void 0!==n)throw new S("argument-error",Ri+" property must be a non null object when specified.");if(this.f=null,(e=t[Li])&&"object"==typeof e){if("string"==typeof(e=e[ji])&&e.length)this.f=e;else if(void 0!==e)throw new S("argument-error",ji+" property must be a non empty string when specified.")}else if(void 0!==e)throw new S("argument-error",Li+" property must be a non null object when specified.");if(void 0!==(e=t[Mi])&&"boolean"!=typeof e)throw new S("argument-error",Mi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Pi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new S("argument-error",Pi+" property must be a non empty string when specified.");this.i=t||null}var Ri="android",Pi="dynamicLinkDomain",Mi="handleCodeInApp",Li="iOS",Fi="url",Ui="installApp",Vi="minimumVersion",Bi="packageName",ji="bundleId";function qi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Hi=null;function Ki(t){var e=Gi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function zi(t){try{return new Ki(t)}catch(t){return null}}function Gi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Hi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Hi){Hi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Hi[o]&&(Hi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(t){}return null}Ki.prototype.T=function(){return this.f},Ki.prototype.l=function(){return this.c},Ki.prototype.toString=function(){return this.h};var Wi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Xi=["client_id","response_type","scope","redirect_uri","state"],Yi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Xi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Xi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Xi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Wi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Qi(t){for(var e in Yi)if(Yi[e].fa==t)return Yi[e];return null}function $i(t){var e={};e["facebook.com"]=no,e["google.com"]=io,e["github.com"]=ro,e["twitter.com"]=oo;var n=t&&t[Zi];try{if(n)return e[n]?new e[n](t):new eo(t);if(void 0!==t[Ji])return new to(t)}catch(t){}return null}var Ji="idToken",Zi="providerId";function to(t){var e=t[Zi];if(!e&&t[Ji]){var n=zi(t[Ji]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Jr(this,"providerId",e),Jr(this,"isNewUser",n)}function eo(t){to.call(this,t),Jr(this,"profile",ei((t=Br(t.rawUserInfo||"{}"))||{}))}function no(t){if(eo.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(eo.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Jr(this,"username",this.profile&&this.profile.login||null)}function io(t){if(eo.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function oo(t){if(eo.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Jr(this,"username",t.screenName||null)}function ao(t){var e=jn(t),n=Bn(e,"link"),r=Bn(jn(n),"link");return e=Bn(e,"deep_link_id"),Bn(jn(e),"link")||e||r||n||t}function so(t,e){if(!t&&!e)throw new S("internal-error","Internal assert: no raw session string available");if(t&&e)throw new S("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?uo:co}I(eo,to),I(no,eo),I(ro,eo),I(io,eo),I(oo,eo);var uo="enroll",co="signin";function ho(){}function lo(t,e){return t.then((function(t){if(t[Za]){var n=zi(t[Za]);if(!n||e!=n.i)throw new S("user-mismatch");return t}throw new S("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==D+"user-not-found"?new S("user-mismatch"):t}))}function fo(t,e){if(!e)throw new S("internal-error","failed to construct a credential");this.a=e,Jr(this,"providerId",t),Jr(this,"signInMethod",t)}function po(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function vo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new fo(t.providerId,t.pendingToken)}catch(t){}return null}function go(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Jr(this,"idToken",e.idToken),e.accessToken&&Jr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Jr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new S("internal-error","failed to construct a credential");Jr(this,"accessToken",e.oauthToken),Jr(this,"secret",e.oauthTokenSecret)}Jr(this,"providerId",t),Jr(this,"signInMethod",n)}function mo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function yo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new go(t.providerId,e,t.signInMethod)}catch(t){}}return null}function bo(t,e){this.Qc=e||[],Zr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Qi(t)||{}).Ja||null,this.ob=null}function wo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new S("argument-error",'SAML provider IDs must be prefixed with "saml."');bo.call(this,t,[])}function _o(t){bo.call(this,t,Xi),this.a=[]}function Eo(){_o.call(this,"facebook.com")}function ko(t){if(!t)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new Eo).credential({accessToken:e})}function Io(){_o.call(this,"github.com")}function To(t){if(!t)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new Io).credential({accessToken:e})}function So(){_o.call(this,"google.com"),this.Ca("profile")}function Ao(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new So).credential({idToken:n,accessToken:e})}function Co(){bo.call(this,"twitter.com",Wi)}function Do(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new S("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new go("twitter.com",n,"twitter.com")}function xo(t,e,n){this.a=t,this.f=e,Jr(this,"providerId","password"),Jr(this,"signInMethod",n===Oo.EMAIL_LINK_SIGN_IN_METHOD?Oo.EMAIL_LINK_SIGN_IN_METHOD:Oo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function No(t){return t&&t.email&&t.password?new xo(t.email,t.password,t.signInMethod):null}function Oo(){Zr(this,{providerId:"password",isOAuthProvider:!1})}function Ro(t,e){if(!(e=Po(e)))throw new S("argument-error","Invalid email link!");return new xo(t,e.code,Oo.EMAIL_LINK_SIGN_IN_METHOD)}function Po(t){return(t=Ni(t=ao(t)))&&t.operation===li?t:null}function Mo(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new S("internal-error");this.a=t,Jr(this,"providerId","phone"),this.fa="phone",Jr(this,"signInMethod","phone")}function Lo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return K(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Mo(e)}return null}function Fo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Uo(t){try{this.a=t||Q.auth()}catch(t){throw new S("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Zr(this,{providerId:"phone",isOAuthProvider:!1})}function Vo(t,e){if(!t)throw new S("missing-verification-id");if(!e)throw new S("missing-verification-code");return new Mo({eb:t,cb:e})}function Bo(t){if(t.temporaryProof&&t.phoneNumber)return new Mo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Ao(o,n);case"facebook.com":return ko(n);case"github.com":return To(n);case"twitter.com":return Do(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new fo(e,a):new go(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new _o(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function jo(t){if(!t.isOAuthProvider)throw new S("invalid-oauth-provider")}function qo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new S("invalid-auth-event");if(this.g&&this.a)throw new S("invalid-auth-event");if(this.g&&!this.f)throw new S("invalid-auth-event")}function Ho(t){return(t=t||{}).type?new qo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&A(t.error),t.postBody,t.tenantId):null}function Ko(){this.b=null,this.a=[]}so.prototype.Ha=function(){return this.a?De(this.a):De(this.b)},so.prototype.w=function(){return this.type==uo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ho.prototype.ka=function(){},ho.prototype.b=function(){},ho.prototype.c=function(){},ho.prototype.w=function(){},fo.prototype.ka=function(t){return ws(t,po(this))},fo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,_s(t,n)},fo.prototype.c=function(t,e){return lo(Es(t,po(this)),e)},fo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},go.prototype.ka=function(t){return ws(t,mo(this))},go.prototype.b=function(t,e){var n=mo(this);return n.idToken=e,_s(t,n)},go.prototype.c=function(t,e){return lo(Es(t,mo(this)),e)},go.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},bo.prototype.Ka=function(t){return this.Ib=gt(t),this},I(wo,bo),I(_o,bo),_o.prototype.Ca=function(t){return X(this.a,t)||this.a.push(t),this},_o.prototype.Qb=function(){return Z(this.a)},_o.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new S("argument-error","credential failed: must provide the ID token and/or the access token.");return new go(this.providerId,n,this.providerId)},I(Eo,_o),Jr(Eo,"PROVIDER_ID","facebook.com"),Jr(Eo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),I(Io,_o),Jr(Io,"PROVIDER_ID","github.com"),Jr(Io,"GITHUB_SIGN_IN_METHOD","github.com"),I(So,_o),Jr(So,"PROVIDER_ID","google.com"),Jr(So,"GOOGLE_SIGN_IN_METHOD","google.com"),I(Co,bo),Jr(Co,"PROVIDER_ID","twitter.com"),Jr(Co,"TWITTER_SIGN_IN_METHOD","twitter.com"),xo.prototype.ka=function(t){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?ru(t,xs,{email:this.a,oobCode:this.f}):ru(t,Js,{email:this.a,password:this.f})},xo.prototype.b=function(t,e){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ns,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Ks,{idToken:e,email:this.a,password:this.f})},xo.prototype.c=function(t,e){return lo(this.ka(t),e)},xo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Zr(Oo,{PROVIDER_ID:"password"}),Zr(Oo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Zr(Oo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Mo.prototype.ka=function(t){return t.fb(Fo(this))},Mo.prototype.b=function(t,e){var n=Fo(this);return n.idToken=e,ru(t,tu,n)},Mo.prototype.c=function(t,e){var n=Fo(this);return n.operation="REAUTH",lo(t=ru(t,eu,n),e)},Mo.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Uo.prototype.fb=function(t,e){var n=this.a.a;return De(e.verify()).then((function(r){if("string"!=typeof r)throw new S("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=v(t)?t.session:null,o=v(t)?t.phoneNumber:t;return(i&&i.type==uo?i.Ha().then((function(t){return function(t,e){return ru(t,Gs,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==co?i.Ha().then((function(e){return function(t,e){return ru(t,Ws,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,qs,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new S("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Zr(Uo,{PROVIDER_ID:"phone"}),Zr(Uo,{PHONE_SIGN_IN_METHOD:"phone"}),qo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},qo.prototype.T=function(){return this.h},qo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var zo,Go=null;function Wo(t){var e="unauthorized-domain",n=void 0,r=jn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Kt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Kt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",S.call(this,e,n)}function Xo(t,e,n){S.call(this,t,n),(t=e||{}).Jb&&Jr(this,"email",t.Jb),t.ea&&Jr(this,"phoneNumber",t.ea),t.credential&&Jr(this,"credential",t.credential),t.Zb&&Jr(this,"tenantId",t.Zb)}function Yo(t){if(t.code){var e=t.code||"";0==e.indexOf(D)&&(e=e.substring(D.length));var n={credential:Bo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new S(e,t.message||void 0);return new Xo(e,n,t.message)}return null}function Qo(){}function $o(t){return t.c||(t.c=t.b())}function Jo(){}function Zo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ta(){}function ea(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.qc,this),this.a.onerror=_(this.Sb,this),this.a.onprogress=_(this.rc,this),this.a.ontimeout=_(this.vc,this)}function na(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ra(t,e,n){this.reset(t,e,n,void 0,void 0)}function ia(t){this.f=t,this.b=this.c=this.a=null}function oa(t,e){this.name=t,this.value=e}I(Wo,S),I(Xo,S),Xo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&yt(t,e),t},Xo.prototype.toJSON=function(){return this.w()},Qo.prototype.c=null,I(Jo,Qo),Jo.prototype.a=function(){var t=Zo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Jo.prototype.b=function(){var t={};return Zo(this)&&(t[0]=!0,t[1]=!0),t},zo=new Jo,I(ta,Qo),ta.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ea;throw Error("Unsupported browser")},ta.prototype.b=function(){return{}},(t=ea.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,na(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",na(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,na(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ra.prototype.a=null,ra.prototype.reset=function(t,e,n,r,i){r||k(),delete this.a},oa.prototype.toString=function(){return this.name};var aa=new oa("SEVERE",1e3),sa=new oa("WARNING",900),ua=new oa("CONFIG",700),ca=new oa("FINE",500);function ha(t){return t.c?t.c:t.a?ha(t.a):(L("Root logger has no level set."),null)}ia.prototype.log=function(t,e,n){if(t.value>=ha(this).value)for(p(e)&&(e=e()),t=new ra(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var la={},fa=null;function da(t){var e;if(fa||(fa=new ia(""),la[""]=fa,fa.c=ua),!(e=la[t])){e=new ia(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=da(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,la[t]=e}return e}function pa(t,e){t&&t.log(ca,e,void 0)}function va(t){this.f=t}function ga(t){kn.call(this),this.u=t,this.h=void 0,this.readyState=ma,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=da("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}I(va,Qo),va.prototype.a=function(){return new ga(this.f)},va.prototype.b=function(t){return function(){return t}}({}),I(ga,kn);var ma=0;function ya(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ba(t){t.readyState=4,t.g=null,t.c=null,t.m=null,wa(t)}function wa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function _a(t){kn.call(this),this.headers=new Nn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=Ea,this.u=this.S=!1}(t=ga.prototype).open=function(t,e){if(this.readyState!=ma)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,wa(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ba(this)),this.readyState=ma},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,wa(this)),this.a&&(this.readyState=3,wa(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ya(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ba(this):wa(this),3==this.readyState&&ya(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ba(this))},t.sc=function(t){this.a&&(this.response=t,ba(this))},t.Ua=function(t){var e=this.i;e&&e.log(sa,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ba(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(sa,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(sa,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ga.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),I(_a,kn);var Ea="";_a.prototype.b=da("goog.net.XhrIo");var ka=/^https?$/i,Ia=["POST","PUT"];function Ta(t){return"content-type"==t.toLowerCase()}function Sa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Aa(t),Da(t)}function Aa(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ca(t){if(t.c&&void 0!==a)if(t.C[1]&&4==Na(t)&&2==Oa(t))pa(t.b,Ra(t,"Local request error detected and ignored"));else if(t.i&&4==Na(t))An(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==Na(t)){pa(t.b,Ra(t,"Request complete")),t.c=!1;try{var e,n=Oa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Pn)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!ka.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Na(t)?t.a.statusText:""}catch(e){pa(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Oa(t)+"]",Aa(t)}}finally{Da(t)}}}function Da(t,e){if(t.a){xa(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(aa,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function xa(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Na(t){return t.a?t.a.readyState:0}function Oa(t){try{return 2<Na(t)?t.a.status:-1}catch(t){return-1}}function Ra(t,e){return e+" ["+t.R+" "+t.l+" "+Oa(t)+"]"}function Pa(t){var e=za;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ma(t,e,n){t.a=!0,t.c=n,t.f=!e,Va(t)}function La(t){if(t.a){if(!t.v)throw new Ba(t);t.v=!1}}function Fa(t,e,n,r){t.g.push([e,n,r]),t.a&&Va(t)}function Ua(t){return W(t.g,(function(t){return p(t[1])}))}function Va(t){if(t.h&&t.a&&Ua(t)){var e=t.h,n=Ha[e];n&&(s.clearTimeout(n.a),delete Ha[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(R(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Ua(t)||(n=!0)}}t.c=e,r&&(u=_(t.m,t,!0),r=_(t.m,t,!1),e instanceof Pa?(Fa(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new qa(e),Ha[e.a]=e,t.h=e.a)}function Ba(){P.call(this)}function ja(){P.call(this)}function qa(t){this.a=s.setTimeout(_(this.c,this),0),this.b=t}(t=_a.prototype).Ma=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",pa(this.b,Ra(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(pa(this.b,Ra(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Da(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Da(this,!0)),_a.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?Ca(this):this.Jc())},t.Jc=function(){Ca(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Ea:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(aa,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return pa(this.b,"Can not get response: "+t.message),null}},Pa.prototype.cancel=function(t){if(this.a)this.c instanceof Pa&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new ja(this),La(this),Ma(this,!1,t))}},Pa.prototype.m=function(t,e){this.i=!1,Ma(this,t,e)},Pa.prototype.then=function(t,e,n){var r,i,o=new Ee((function(t,e){r=t,i=e}));return Fa(this,r,(function(t){t instanceof ja?o.cancel():i(t)})),o.then(t,e,n)},Pa.prototype.$goog_Thenable=!0,I(Ba,P),Ba.prototype.message="Deferred has already fired",Ba.prototype.name="AlreadyCalledError",I(ja,P),ja.prototype.message="Deferred was canceled",ja.prototype.name="CanceledError",qa.prototype.c=function(){throw delete Ha[this.a],this.b};var Ha={};function Ka(t){var e={},n=e.document||document,r=At(t).toString(),i=ge(document,"SCRIPT"),o={Wb:i,Ma:void 0},a=new Pa(o),u=null,l=null!=e.timeout?e.timeout:5e3;return 0<l&&(u=window.setTimeout((function(){Ga(i,!0);var t=new Ya(Xa,"Timeout reached for loading script "+r);La(a),Ma(a,!1,t)}),l),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ga(i,e.xd||!1,u),La(a),Ma(a,!0,null))},i.onerror=function(){Ga(i,!0,u);var t=new Ya(Wa,"Error while loading script "+r);La(a),Ma(a,!1,t)},yt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),le(i,o),function(t,e){bt(t,"HTMLScriptElement"),t.src=At(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=h(e.document):(null===c&&(c=h(s.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function za(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&Ga(t,!0,this.Ma)}}function Ga(t,e,n){null!=n&&s.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Wa=0,Xa=1;function Ya(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),P.call(this,n),this.code=t}function Qa(t){this.f=t}function $a(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||ts,this.g=gt(t.secureTokenHeaders||es),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ns,this.a=gt(t.firebaseHeaders||rs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Ir(),!(n=s.XMLHttpRequest||n&&Q.INTERNAL.node&&Q.INTERNAL.node.XMLHttpRequest)&&!kr())throw new S("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,kr()?this.f=new va(self):Tr()?this.f=new Qa(n):this.f=new ta,this.b=null}I(Ya,P),I(Qa,Qo),Qa.prototype.a=function(){return new this.f},Qa.prototype.b=function(){return{}};var Ja,Za="idToken",ts=new Kr(3e4,6e4),es={"Content-Type":"application/x-www-form-urlencoded"},ns=new Kr(3e4,6e4),rs={"Content-Type":"application/json"};function is(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function os(t,e){e&&(t.l=as("https://securetoken.googleapis.com/v1/token",e),t.h=as("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=as("https://identitytoolkit.googleapis.com/v2/",e))}function as(t,e){return t=jn(t),e=jn(e.url),t.f=t.a+t.f,Ln(t,e.c),t.a=e.a,Fn(t,e.g),t.toString()}function ss(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function us(t,e,n,r,i,o,a){(function(){var t=Nr();return!((t=Cr(t)!=Ar?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Qt&&ue&&!(9<ue))})()||kr()?t=_(t.u,t):(Ja||(Ja=new Ee((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(s[hs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Fa(t,null,e,void 0)}(Ka(Ct(cs,{onload:hs})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=_(t.s,t)),t(e,n,r,i,o,a)}$a.prototype.T=function(){return this.b},$a.prototype.u=function(t,e,n,r,i,o){if(kr()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new S("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new _a(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}In(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return pa(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),Tn(a,"ready",(function(){u&&clearTimeout(u),We(this)})),Tn(a,"timeout",(function(){u&&clearTimeout(u),We(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():zo.a(),t.C=t.D?$o(t.D):$o(zo),t.a.onreadystatechange=_(t.Vb,t);try{pa(t.b,Ra(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return pa(t.b,Ra(t,"Error opening Xhr: "+e.message)),void Sa(t,e)}e=r||"";var o=new Nn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)K(t,e,void 0);else for(var n=xn(t),r=Dn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ta,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!X(Ia,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{xa(t),0<t.g&&(t.u=function(t){return Qt&&se(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),pa(t.b,Ra(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ma,t)):t.s=An(t.Ma,t.g,t)),pa(t.b,Ra(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){pa(t.b,Ra(t,"Send error: "+e.message)),Sa(t,e)}}(a,t,n,r,i)};var cs=new wt(It,"https://apis.google.com/js/client.js?onload=%{onload}"),hs="__fcb"+Math.floor(1e6*Math.random()).toString();function ls(t){if("string"!=typeof(t=t.email)||!br.test(t))throw new S("invalid-email")}function fs(t){"email"in t&&ls(t)}function ds(t){if(!t[Za]){if(t.mfaPendingCredential)throw new S("multi-factor-auth-required",null,gt(t));throw new S("internal-error")}}function ps(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new S("internal-error")}else{if(!t.sessionInfo)throw new S("missing-verification-id");if(!t.code)throw new S("missing-verification-code")}}$a.prototype.s=function(t,e,n,r,i){var o=this;Ja.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},$a.prototype.zb=function(){return ru(this,zs,{})},$a.prototype.Bb=function(t,e){return ru(this,Hs,{idToken:t,email:e})},$a.prototype.Cb=function(t,e){return ru(this,Ks,{idToken:t,password:e})};var vs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function gs(t){if(!t.phoneVerificationInfo)throw new S("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new S("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new S("missing-verification-code")}function ms(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new S("internal-error")}function ys(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&er(t=new $n(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function bs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Yo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Yo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Yo(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;ds(t)}function ws(t,e){return e.returnIdpCredential=!0,ru(t,Xs,e)}function _s(t,e){return e.returnIdpCredential=!0,ru(t,Qs,e)}function Es(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Ys,e)}function ks(t){if(!t.oobCode)throw new S("invalid-action-code")}(t=$a.prototype).Db=function(t,e){var n={idToken:t},r=[];return pt(vs,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Hs,n)},t.vb=function(t,e){return yt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Us,t)},t.wb=function(t,e){return yt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,Ms,t)},t.ub=function(t,e){return yt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ls,t)},t.Eb=function(t,e,n){return yt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Fs,t)},t.fb=function(t){return ru(this,Zs,t)},t.nb=function(t,e){return ru(this,js,{oobCode:t,newPassword:e})},t.Ra=function(t){return ru(this,Ts,{oobCode:t})},t.jb=function(t){return ru(this,Is,{oobCode:t})};var Is={endpoint:"setAccountInfo",A:ks,Z:"email",B:!0},Ts={endpoint:"resetPassword",A:ks,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new S("internal-error")},B:!0},Ss={endpoint:"signupNewUser",A:function(t){if(ls(t),!t.password)throw new S("weak-password")},G:ds,V:!0,B:!0},As={endpoint:"createAuthUri",B:!0},Cs={endpoint:"deleteAccount",N:["idToken"]},Ds={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new S("internal-error")}},xs={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ls,G:ds,V:!0,B:!0},Ns={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ls,G:ds,V:!0},Os={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:gs,G:ds,B:!0,Na:!0},Rs={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:gs,G:ds,B:!0,Na:!0},Ps={endpoint:"getAccountInfo"},Ms={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new S("internal-error");ls(t)},Z:"email",B:!0},Ls={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new S("internal-error")},Z:"email",B:!0},Fs={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new S("internal-error")},Z:"email",B:!0},Us={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new S("internal-error");ls(t)},Z:"email",B:!0},Vs={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Bs={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new S("internal-error")}},js={endpoint:"resetPassword",A:ks,Z:"email",B:!0},qs={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Hs={endpoint:"setAccountInfo",N:["idToken"],A:fs,V:!0},Ks={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(fs(t),!t.password)throw new S("weak-password")},G:ds,V:!0},zs={endpoint:"signupNewUser",G:ds,V:!0,B:!0},Gs={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new S("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new S("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new S("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new S("internal-error")},B:!0,Na:!0},Ws={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new S("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new S("internal-error")},B:!0,Na:!0},Xs={endpoint:"verifyAssertion",A:ms,Ya:ys,G:bs,V:!0,B:!0},Ys={endpoint:"verifyAssertion",A:ms,Ya:ys,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new S("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);ds(t)},V:!0,B:!0},Qs={endpoint:"verifyAssertion",A:function(t){if(ms(t),!t.idToken)throw new S("internal-error")},Ya:ys,G:bs,V:!0},$s={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new S("invalid-custom-token")},G:ds,V:!0,B:!0},Js={endpoint:"verifyPassword",A:function(t){if(ls(t),!t.password)throw new S("wrong-password")},G:ds,V:!0,B:!0},Zs={endpoint:"verifyPhoneNumber",A:ps,G:ds,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new S("internal-error");ps(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Yo(t);ds(t)}},eu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ps,G:ds,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Za]^!!t.refreshToken)throw new S("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return xe(new S("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return De(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,a){var s=jn(e+n);Vn(s,"key",t.c),a&&Vn(s,"cb",k().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Vn(s,c,i[c]);return new Ee((function(e,n){us(t,s.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new S("network-request-failed"))}),r,u?void 0:or(Vr(i)),t.a,t.v.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new S("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new S(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",yt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new S(r[i],e);return!e&&t&&(e=Ur(t)),new S("internal-error",e)}function au(t){this.b=t,this.a=null,this.rb=function(t){return(hu||(hu=new Ee((function(t,e){function n(){Hr(),Or("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Hr(),e(Error("Network Error"))},timeout:uu.get()})}if(Or("gapi.iframes.Iframe"))t();else if(Or("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Or("gapi.load")?n():e(Error("Network Error"))},De(Ka(r=Ct(su,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw hu=null,t})))).then((function(){return new Ee((function(e,n){Or("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var su=new wt(It,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new Kr(3e4,6e4),cu=new Kr(5e3,15e3),hu=null;function lu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?qn((t=jn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):qn("https",this.l,null,"/__/auth/iframe"),this.a=t,Vn(this.a,"apiKey",this.h),Vn(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function du(t){try{return Q.app(t).auth().Ga()}catch(t){return[]}}function pu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=fr();return function(t){return ru(t,Vs,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=jn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=jn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:yr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Wo(fr())}))}function gu(t){return t.m||(t.m=wr().then((function(){if(!t.u){var e=t.c,n=t.i,r=du(t.b),i=new lu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Z(r||[]),t.u=i.toString()}t.v=new au(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then((function(){t.a.register("authEvent",e,Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Ho(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",De(n)}return n.status="ERROR",De(n)}))}(t)}))),t.m}function mu(t){return t.l||(t.C=t.c?xr(t.c,du(t.b)):null,t.l=new $a(t.g,O(t.i),t.C),t.f&&os(t.l,t.f)),t.l}function yu(t,e,n,r,i,o,a,s,u,c,h,l){return(t=new fu(t,e,n,r,i,l)).l=o,t.g=a,t.i=s,t.b=gt(u||null),t.f=c,t.yb(h).toString()}function bu(t){if(this.a=t||Q.INTERNAL.reactNative&&Q.INTERNAL.reactNative.AsyncStorage,!this.a)throw new S("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function wu(t){this.b=t,this.a={},this.f=_(this.c,this)}lu.prototype.toString=function(){return this.f?Vn(this.a,"v",this.f):tr(this.a.b,"v"),this.b?Vn(this.a,"eid",this.b):tr(this.a.b,"eid"),this.c.length?Vn(this.a,"fw",this.c.join(",")):tr(this.a.b,"fw"),this.a.toString()},fu.prototype.yb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=jn(this.v.url);t=qn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=qn("https",this.u,null,"/__/auth/handler");if(Vn(t,"apiKey",this.s),Vn(t,"appName",this.c),Vn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Q.app(this.c).auth().la()}catch(t){n=null}for(var r in e.ob=n,Vn(t,"providerId",this.a.providerId),e=Vr((n=this.a).Ib))e[r]=e[r].toString();r=n.Qc,e=gt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),vt(e)||Vn(t,"customParameters",Ur(e))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&Vn(t,"scopes",n.join(",")),this.l?Vn(t,"redirectUrl",this.l):tr(t.b,"redirectUrl"),this.g?Vn(t,"eventId",this.g):tr(t.b,"eventId"),this.i?Vn(t,"v",this.i):tr(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Bn(t,a)&&Vn(t,a,this.b[a]);return this.h?Vn(t,"tid",this.h):tr(t.b,"tid"),this.f?Vn(t,"eid",this.f):tr(t.b,"eid"),(a=du(this.c)).length&&Vn(t,"fw",a.join(",")),t.toString()},(t=pu.prototype).Ob=function(t,e,n){var r=new S("popup-closed-by-user"),i=new S("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return gu(t).then((function(){return function(t,e){return t.rb.then((function(){return new Ee((function(n){t.a.send(e.type,e,n,Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&gr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new Ee((function(e){return function n(){Cn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Cn(n).then((function(){e(r)}))}))},t.Xb=function(){var t=Nr();return!Fr(t)&&!qr(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,a,s){if(!t)return xe(new S("popup-blocked"));if(a&&!Fr())return this.ma().o((function(e){gr(t),i(e)})),r(),De();this.a||(this.a=vu(mu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw gr(t),i(e),e}));return r(),e})).then((function(){jo(n),a||dr(yu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Nb=function(t,e,n,r){this.a||(this.a=vu(mu(this)));var i=this;return this.a.then((function(){jo(e),dr(yu(i.s,i.g,i.b,t,e,fr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return gu(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new S("network-request-failed")}))},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){$(this.h,(function(e){return e==t}))},(t=bu.prototype).get=function(t){return De(this.a.getItem(t)).then((function(t){return t&&Br(t)}))},t.set=function(t,e){return De(this.a.setItem(t,Ur(e)))},t.U=function(t){return De(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var _u,Eu=[];function ku(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Iu(t){this.a=t}function Tu(t){this.c=t,this.b=!1,this.a=[]}function Su(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return xe(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Ee((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Au(t,c),e})).o((function(e){throw Au(t,c),e}))}function Au(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),$(t.a,(function(t){return t==e}))}}function Cu(){if(!Ou())throw new S("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;kr()&&self?(this.v=function(){var t=kr()?self:null;if(K(Eu,(function(n){n.b==t&&(e=n)})),!e){var e=new wu(t);Eu.push(e)}return e}(),ku(this.v,"keyChanged",(function(e,n){return Fu(t).then((function(e){return 0<e.length&&K(t.a,(function(t){t(e)})),{keyProcessed:X(e,n.key)}}))})),ku(this.v,"ping",(function(){return De(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?De().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):De(null)}().then((function(e){(t.h=e)&&(t.g=new Tu(new Iu(e)),Su(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&X(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Du(t){return new Ee((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Ee((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Du(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function xu(t){return t.i||(t.i=Du(t)),t.i}function Nu(t,e){var n=0;return new Ee((function r(i,o){xu(t).then(e).then(i).o((function(e){if(!(3<++n))return xu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Ou(){try{return!!s.indexedDB}catch(t){return!1}}function Ru(t){return t.objectStore("firebaseLocalStorage")}function Pu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Mu(t){return new Ee((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Lu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Su(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):De()}function Fu(t){return xu(t).then((function(t){var e=Ru(Pu(t,!1));return e.getAll?Mu(e.getAll()):new Ee((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=pr(t.c,n),t.c=n}return r}))}function Uu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Vu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=De().then((function(){if(Ou()){var t=jr(),r="__sak"+t;return _u||(_u=new Cu),(n=_u).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){K(e.a,(function(e){e(t)}))})),t}))}function Bu(){this.a={},this.type="inMemory"}function ju(){if(!function(){var t="Node"==Ir();if(!(t=qu()||t&&Q.INTERNAL.node&&Q.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Ir())throw new S("internal-error","The LocalStorage compatibility library was not found.");throw new S("web-storage-unsupported")}this.a=qu()||Q.INTERNAL.node.localStorage,this.type="localStorage"}function qu(){try{var t=s.localStorage,e=jr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Hu(){this.type="nullStorage"}function Ku(){if(!function(){var t="Node"==Ir();if(!(t=zu()||t&&Q.INTERNAL.node&&Q.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Ir())throw new S("internal-error","The SessionStorage compatibility library was not found.");throw new S("web-storage-unsupported")}this.a=zu()||Q.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function zu(){try{var t=s.sessionStorage,e=jr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Gu(){var t={};t.Browser=Yu,t.Node=Qu,t.ReactNative=$u,t.Worker=Ju,this.a=t[Ir()]}wu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];K(r,(function(e){i.push(De().then((function(){return e(t.origin,t.data.data)})))})),Oe(i).then((function(r){var i=[];K(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),K(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Iu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Tu.prototype.close=function(){for(;0<this.a.length;)Au(this,this.a[0]);this.b=!0},(t=Cu.prototype).set=function(t,e){var n=this,r=!1;return Nu(this,(function(e){return Mu((e=Ru(Pu(e,!0))).get(t))})).then((function(i){return Nu(n,(function(o){if(o=Ru(Pu(o,!0)),i)return i.value=e,Mu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Mu(o.add(a))}))})).then((function(){return n.c[t]=e,Lu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Nu(this,(function(e){return Mu(Ru(Pu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Nu(this,(function(r){return n=!0,e.b++,Mu(Ru(Pu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Lu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){Uu(t),function e(){t.f=setTimeout((function(){t.l=Fu(t).then((function(e){0<e.length&&K(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){$(this.a,(function(e){return e==t})),0==this.a.length&&Uu(this)},(t=Vu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){$(this.a,(function(e){return e==t}))},(t=Bu.prototype).get=function(t){return De(this.a[t])},t.set=function(t,e){return this.a[t]=e,De()},t.U=function(t){return delete this.a[t],De()},t.ca=function(){},t.ia=function(){},(t=ju.prototype).get=function(t){var e=this;return De().then((function(){return Br(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return De().then((function(){var r=Ur(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return De().then((function(){e.a.removeItem(t)}))},t.ca=function(t){s.window&&ln(s.window,"storage",t)},t.ia=function(t){s.window&&pn(s.window,"storage",t)},(t=Hu.prototype).get=function(){return De(null)},t.set=function(){return De()},t.U=function(){return De()},t.ca=function(){},t.ia=function(){},(t=Ku.prototype).get=function(t){var e=this;return De().then((function(){return Br(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return De().then((function(){var r=Ur(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return De().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Wu,Xu,Yu={F:ju,bb:Ku},Qu={F:ju,bb:Ku},$u={F:bu,bb:Hu},Ju={F:ju,bb:Hu},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(qr(Nr())||!Er()),e=Fr(),n=Rr();this.m=t,this.h=e,this.l=n,this.a={},Wu||(Wu=new Gu),t=Wu;try{this.g=!lr()&&Wr()||!s.indexedDB?new t.a.F:new Vu(kr()?new Bu:new t.a.F)}catch(t){this.g=new Bu,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new Bu}this.v=new Bu,this.f=_(this.Yb,this),this.b={}}function ec(){return Xu||(Xu=new tc),Xu}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function ac(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),vt(this.a)&&(nc(this,"local").ca(this.f),this.h||(lr()||!Wr())&&s.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ze({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&($(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.mb(e))},Qt&&ue&&10==ue&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else K(t,_(this.mb,this))},t.mb=function(t){this.a[t]&&K(this.a[t],(function(t){t()}))};var sc,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function hc(t,e){this.b=lc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===sc&&(sc=s.Int32Array?new Int32Array(yc):yc),this.reset()}I(hc,(function(){this.b=-1}));for(var lc=64,fc=lc-1,dc=[],pc=0;pc<fc;pc++)dc[pc]=0;var vc=J(128,dc);function gc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|sc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function mc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(gc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(gc(t),i=0)}}t.c=i,t.g+=n}hc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):Z(this.h)};var yc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){hc.call(this,8,wc)}I(bc,hc);var wc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function _c(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new ac(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ec(t){return new S("invalid-cordova-configuration",t)}function kc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Ic(t){return t.f||(t.f=t.ma().then((function(){return new Ee((function(e){t.Ea((function n(r){return e(r),t.Sa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Tc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ao(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Br(Bn(o=jn(i),"firebaseError")||null))?A(o):null)?new qo(r.c,r.b,null,null,o,null,r.T()):new qo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}kc(t,i)}))}var n=new qo("unknown",null,null,null,new S("no-auth-event")),r=!1,i=Cn(500).then((function(){return Tc(t).then((function(){r||kc(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Or("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Go||(Go=new Ko),function(t){var e=Go;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Or("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Tc(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return Ho(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Sc(t){this.a=t,this.b=ec()}(t=_c.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(_r(void 0)?wr().then((function(){return new Ee((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):xe(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Or("universalLinks.subscribe",s))throw Ec("cordova-universal-links-plugin-fix is not installed");if(void 0===Or("BuildInfo.packageName",s))throw Ec("cordova-plugin-buildinfo is not installed");if("function"!=typeof Or("cordova.plugins.browsertab.openUrl",s))throw Ec("cordova-plugin-browsertab is not installed");if("function"!=typeof Or("cordova.InAppBrowser.open",s))throw Ec("cordova-plugin-inappbrowser is not installed")}),(function(){throw new S("cordova-not-ready")}))},t.Ob=function(t,e){return e(new S("operation-not-supported-in-this-environment")),De()},t.Mb=function(){return xe(new S("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return xe(new S("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,h=null;return this.c=De().then((function(){return jo(e),Ic(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new qo(e,r,null,o,new S("no-auth-event"),null,i),u=Or("BuildInfo.packageName",s);if("string"!=typeof u)throw new S("invalid-cordova-configuration");var c=Or("BuildInfo.displayName",s),h={};if(Nr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Nr().toLowerCase().match(/android/))return xe(new S("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=function(t){var e=new bc;mc(e,t),t=[];var n=8*e.g;56>e.c?mc(e,vc,56-e.c):mc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(gc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return G(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),h.sessionId=o;var l=yu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,a.w(),e)})).then((function(){var e=Or("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new S("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Or("cordova.plugins.browsertab.openUrl",s)))throw new S("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Or("cordova.InAppBrowser.open",s)))throw new S("invalid-cordova-configuration");e=Nr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Ee((function(t,e){u=function(){var e=Or("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=Cn(2e3).then((function(){e(new S("redirect-cancelled-by-user"))})))},h=function(){zr()&&c()},o.addEventListener("resume",c,!1),Nr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Tc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),u&&i.Sa(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Ic(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new qo("unknown",null,null,null,new S("no-auth-event")),t(e))}))},t.Sa=function(t){$(this.b,(function(e){return e==t}))};var Ac={name:"pendingRedirect",F:"session"};function Cc(t){return ic(t.b,Ac,t.a)}function Dc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=_(this.s,this),this.b=new Kc,this.C=new Yc,this.g=new Sc(qc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=xc(this.D,this.v,this.m,C,this.J)}function xc(t,e,n,r,i){var o=Q.SDK_VERSION||null;return _r()?new _c(t,e,n,o,r,i):new pu(t,e,n,o,r,i)}function Nc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Oc(t){t.a.Xb()&&Nc(t).o((function(e){var n=new qo("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)})),t.a.Tb()||zc(t.b)}function Rc(t,e){X(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Ac,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Cc(t.g).then((function(){Nc(t).o((function(e){var n=new qo("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)}))})):Oc(t)})).o((function(){Oc(t)}))}function Pc(t,e){$(t.h,(function(t){return t==e}))}Dc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=xc(this.D,this.v,this.m,null,this.J),this.i={}},Dc.prototype.s=function(t){if(!t)throw new S("invalid-auth-event");if(6e5<=k()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=k())),e=!0;break}}return zc(this.b),e};var Mc=new Kr(2e3,1e4),Lc=new Kr(3e4,6e4);function Fc(t,e,n,r,i,o,a){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Uc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Vc(t,e,n,r,i){var o;return function(t){return t.b.set(Ac,"pending",t.a)}(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(Uc(e))throw new S("operation-not-supported-in-this-environment");return o=e,Cc(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new Ee((function(){})):Cc(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function Bc(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),Mc.get())}Dc.prototype.qa=function(){return this.b.qa()};var jc={};function qc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Hc(t,e,n,r){var i=qc(e,n,r);return jc[i]||(jc[i]=new Dc(t,e,n,r)),jc[i]}function Kc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function zc(t){t.g||(t.g=!0,Xc(t,!1,null,null))}function Gc(t){t.g&&!t.i&&Xc(t,!1,null,null)}function Wc(t,e){if(t.b=function(){return De(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Xc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return xe(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Wc(t,n):Wc(t,{user:null}),t.f=[],t.c=[]}function Yc(){}function Qc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function $c(t,e){this.a=e,Jr(this,"verificationId",t)}function Jc(t,e,n,r){return new Uo(t).fb(e,n).then((function(t){return new $c(t,r)}))}function Zc(t){var e=Gi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new S("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Zr(this,{token:t,expirationTime:Gr(1e3*e.exp),authTime:Gr(1e3*e.auth_time),issuedAtTime:Gr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function th(t,e,n){var r=e&&e[nh];if(!r)throw new S("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new so(null,r),this.b=[];var i=this;K(e[eh]||[],(function(t){(t=ri(t))&&i.b.push(t)})),Jr(this,"auth",this.a),Jr(this,"session",this.c),Jr(this,"hints",this.b)}Kc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Kc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Xc(this,!0,null,t.a),De()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Xc(t,s,e,null)})).o((function(e){Xc(t,s,null,e)}))}(this,t,e):xe(new S("invalid-auth-event")):(Xc(this,!1,null,null),De())}else xe(new S("invalid-auth-event"))},Kc.prototype.qa=function(){var t=this;return new Ee((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new S("timeout");t.a&&t.a.cancel(),t.a=Cn(Lc.get()).then((function(){t.b||(t.g=!0,Xc(t,!0,null,e))}))}(t))}))},Yc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),De()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):xe(new S("invalid-auth-event"))}else xe(new S("invalid-auth-event"))},$c.prototype.confirm=function(t){return t=Vo(this.verificationId,t),this.a(t)};var eh="mfaInfo",nh="mfaPendingCredential";function rh(t,e,n,r){S.call(this,"multi-factor-auth-required",r,e),this.b=new th(t,e,n),Jr(this,"resolver",this.b)}function ih(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new rh(e,t.serverResponse,n,t.message)}catch(t){}return null}function oh(){}function ah(t){Jr(this,"factorId",t.fa),this.a=t}function sh(t){if(ah.call(this,t),this.a.fa!=Uo.PROVIDER_ID)throw new S("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function uh(t,e){for(var n in Je.call(this,t),e)this[n]=e[n]}function ch(t,e){this.a=t,this.b=[],this.c=_(this.yc,this),ln(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&K(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ai]=t.uid),t.displayName&&(r[ii]=t.displayName),t.enrollmentTime&&(r[oi]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[si]=t.phoneNumber);try{e=new ui(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),hh(this,n)}function hh(t,e){t.b=e,Jr(t,"enrolledFactors",e)}function lh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function fh(t,e){t.stop(),t.b=Cn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=s.document,e=null;return zr()||!t?De():new Ee((function(n){e=function(){zr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){fh(t,!0)})).o((function(e){t.i(e)&&fh(t,!1)}))}function dh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function ph(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function vh(t,e){t.b=zi(e[Za]||""),t.a=e.refreshToken,ph(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function gh(t,e){this.a=t||null,this.b=e||null,Zr(this,{lastSignInTime:Gr(e||null),creationTime:Gr(t||null)})}function mh(t,e,n,r,i,o){Zr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function yh(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=Q.SDK_VERSION?xr(Q.SDK_VERSION):null;this.a=new $a(this.l,O(C),r),t.emulatorConfig&&os(this.a,t.emulatorConfig),this.b=new dh(this.a),Sh(this,e[Za]),vh(this.b,e),Jr(this,"refreshToken",this.b.a),Dh(this,n||{}),kn.call(this),this.R=!1,this.s&&Pr()&&(this.i=Hc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new lh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.aa=_(this.hb,this);var i=this;this.ya=null,this.Oa=function(t){i.wa(t.h)},this.ja=null,this.Aa=function(t){os(i.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){_h(i,t.f)},this.ba=null,this.O=new ch(this,n),Jr(this,"multiFactor",this.O)}function bh(t,e){t.ja&&pn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&ln(e,"languageCodeChanged",t.Oa)}function wh(t,e){t.X&&pn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&ln(e,"emulatorConfigChanged",t.Aa)}function _h(t,e){t.$=e,ss(t.a,Q.SDK_VERSION?xr(Q.SDK_VERSION,t.$):null)}function Eh(t,e){t.ba&&pn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&ln(e,"frameworkChanged",t.Ba)}function kh(t){try{return Q.app(t.m).auth()}catch(e){throw new S("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Ih(t){t.D||t.u.b||(t.u.start(),pn(t,"tokenChanged",t.aa),ln(t,"tokenChanged",t.aa))}function Th(t){pn(t,"tokenChanged",t.aa),t.u.stop()}function Sh(t,e){t.za=e,Jr(t,"_lat",e)}function Ah(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Oe(e).then((function(){return t}))}function Ch(t){t.i&&!t.R&&(t.R=!0,Rc(t.i,t))}function Dh(t,e){Zr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new gh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function xh(){}function Nh(t){return De().then((function(){if(t.D)throw new S("app-deleted")}))}function Oh(t){return G(t.providerData,(function(t){return t.providerId}))}function Rh(t,e){e&&(Ph(t,e.providerId),t.providerData.push(e))}function Ph(t,e){$(t.providerData,(function(t){return t.providerId==e}))}function Mh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Jr(t,e,n)}function Lh(t,e){t!=e&&(Zr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Jr(t,"metadata",function(t){return new gh(t.a,t.b)}(e.metadata)):Jr(t,"metadata",new gh),K(e.providerData,(function(e){Rh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Jr(t,"refreshToken",t.b.a),hh(t.O,e.O.b))}function Fh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,Ps,{idToken:e}).then(_(t.Kc,t))}(t,e).then((function(){return n||Mh(t,"isAnonymous",!1),e}))}))}function Uh(t,e){e[Za]&&t.za!=e[Za]&&(vh(t.b,e),t.dispatchEvent(new uh("tokenChanged")),Sh(t,e[Za]),Mh(t,"refreshToken",t.b.a))}function Vh(t,e){return Fh(t).then((function(){if(X(Oh(t),e))return Ah(t).then((function(){throw new S("provider-already-linked")}))}))}function Bh(t,e,n){return ti({user:t,credential:Bo(e),additionalUserInfo:e=$i(e),operationType:n})}function jh(t,e){return Uh(t,e),t.reload().then((function(){return t}))}function qh(t,e,n,r,i){if(!Pr())return xe(new S("operation-not-supported-in-this-environment"));if(t.h&&!i)return xe(t.h);var o=Qi(n.providerId),a=jr(t.uid+":::"),s=null;(!Fr()||Er())&&t.s&&n.isOAuthProvider&&(s=yu(t.s,t.l,t.m,e,n,null,a,Q.SDK_VERSION||null,null,null,t.tenantId));var u=mr(s,o&&o.ua,o&&o.ta);return r=r().then((function(){if(Kh(t),!i)return t.I().then((function(){}))})).then((function(){return Fc(t.i,u,e,n,a,!!s,t.tenantId)})).then((function(){return new Ee((function(n,r){t.na(e,null,new S("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Bc(t.i,t,e,u,a)}))})).then((function(t){return u&&gr(u),t?ti(t):null})).o((function(t){throw u&&gr(u),t})),zh(t,r,i)}function Hh(t,e,n,r,i){if(!Pr())return xe(new S("operation-not-supported-in-this-environment"));if(t.h&&!i)return xe(t.h);var o=null,a=jr(t.uid+":::");return r=r().then((function(){if(Kh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Ah(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Xh,t.w(),e.a)),e})).then((function(){return Vc(t.i,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return Yh(t.ha);throw o})).then((function(){if(o)throw o})),zh(t,r,i)}function Kh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new S("internal-error");throw new S("auth-domain-config-required")}}function zh(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),xe(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new uh("userInvalidated")),t.h=e),e}))}(t,e,n);return t.J.push(r),r.oa((function(){Y(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),kh(t),_(t.jc,t))),n||e}))}function Gh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Za]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new yh(e,n,t);return t.providerData&&K(t.providerData,(function(t){t&&Rh(i,ti(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Wh(t){this.a=t,this.b=ec()}th.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=gt(e.f);return delete n[eh],delete n[nh],yt(n,t),e.g(n)}))},I(rh,S),oh.prototype.sb=function(t,e,n){return e.type==uo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),yt(n,{phoneVerificationInfo:Fo(t.a)}),ru(e,Os,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return yt(n={mfaPendingCredential:n},{phoneVerificationInfo:Fo(t.a)}),ru(e,Rs,n)}))}(this,t,e)},I(ah,oh),I(sh,ah),I(uh,Je),(t=ch.prototype).yc=function(t){hh(this,function(t){var e=[];return K(t.mfaInfo||[],(function(t){(t=ri(t))&&e.push(t)})),e}(t.hd))},t.Rb=function(){return this.a.I().then((function(t){return new so(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return Uh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=z(e.b,(function(t){return t.uid!=n}));return hh(e,r),Uh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:G(this.b,(function(t){return t.w()}))}}},lh.prototype.start=function(){this.a=this.c,fh(this,!0)},lh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?xe(new S("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new Ee((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?us(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new S("internal-error")):r(new S("network-request-failed"))}),"POST",Zn(e).toString(),t.g,t.m.get()):r(new S("internal-error"))}))}(t.f,e).then((function(e){return t.b=zi(e.access_token),t.a=e.refresh_token,ph(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):De(null):De({accessToken:this.b.toString(),refreshToken:this.a})},gh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},I(yh,kn),yh.prototype.wa=function(t){this.ya=t,is(this.a,t)},yh.prototype.la=function(){return this.ya},yh.prototype.Ga=function(){return Z(this.$)},yh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Jr(yh.prototype,"providerId","firebase"),(t=yh.prototype).reload=function(){var t=this;return zh(this,Nh(this).then((function(){return Fh(t).then((function(){return Ah(t)})).then(xh)})))},t.oc=function(t){return this.I(t).then((function(t){return new Zc(t)}))},t.I=function(t){var e=this;return zh(this,Nh(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new S("internal-error");return t.accessToken!=e.za&&(Sh(e,t.accessToken),e.dispatchEvent(new uh("tokenChanged"))),Mh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new S("internal-error");Dh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?G(t,(function(t){return new mh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Rh(this,e[n]);Mh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new uh("userReloaded",{hd:t}))},t.Lc=function(t){return Qr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return zh(this,t.c(this.a,this.uid).then((function(t){return Uh(e,t),n=Bh(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Qr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return zh(this,Vh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Bh(e,t,"link"),jh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return zh(this,Vh(this,"phone").then((function(){return Jc(kh(n),t,e,_(n.qb,n))})))},t.Mc=function(t,e){var n=this;return zh(this,De().then((function(){return Jc(kh(n),t,e,_(n.tb,n))})),!0)},t.Bb=function(t){var e=this;return zh(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return Uh(e,t),e.reload()})))},t.ed=function(t){var e=this;return zh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Uh(e,t),e.reload()})))},t.Cb=function(t){var e=this;return zh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Uh(e,t),e.reload()})))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Nh(this);var e=this;return zh(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Uh(e,t),Mh(e,"displayName",t.displayName||null),Mh(e,"photoURL",t.photoUrl||null),K(e.providerData,(function(t){"password"===t.providerId&&(Jr(t,"displayName",e.displayName),Jr(t,"photoURL",e.photoURL))})),Ah(e)})).then(xh))},t.cd=function(t){var e=this;return zh(this,Fh(this).then((function(n){return X(Oh(e),t)?function(t,e,n){return ru(t,Ds,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return K(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),K(Oh(e),(function(t){n[t]||Ph(e,t)})),n[Uo.PROVIDER_ID]||Jr(e,"phoneNumber",null),Ah(e)})):Ah(e).then((function(){throw new S("no-such-provider")}))})))},t.delete=function(){var t=this;return zh(this,this.I().then((function(e){return ru(t.a,Cs,{idToken:e})})).then((function(){t.dispatchEvent(new uh("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");bh(t,null),wh(t,null),Eh(t,null),t.J=[],t.D=!0,Th(t),Jr(t,"refreshToken",null),t.i&&Pc(t.i,t)}))},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?_(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?_(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?_(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?_(this.Lb,this):null},t.Ec=function(t){var e=this;return qh(this,"linkViaPopup",t,(function(){return Vh(e,t.providerId).then((function(){return Ah(e)}))}),!1)},t.Nc=function(t){return qh(this,"reauthViaPopup",t,(function(){return De()}),!0)},t.Fc=function(t){var e=this;return Hh(this,"linkViaRedirect",t,(function(){return Vh(e,t.providerId)}),!1)},t.Oc=function(t){return Hh(this,"reauthViaRedirect",t,(function(){return De()}),!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zh(this,this.I().then((function(n){return _s(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Bh(i,t,"link"),jh(i,t)})).then((function(){return o})))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zh(this,De().then((function(){return lo(Es(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Bh(i,t,"reauthenticate"),Uh(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.ub=function(t){var e=this,n=null;return zh(this,this.I().then((function(e){return n=e,void 0===t||vt(t)?{}:qi(new Oi(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Eb=function(t,e){var n=this,r=null;return zh(this,this.I().then((function(t){return r=t,void 0===e||vt(e)?{}:qi(new Oi(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return zh(this,t=lo(De(t),n.uid).then((function(t){return e=Bh(n,t,"reauthenticate"),Uh(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&yt(t,this.metadata.w()),K(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),yt(t,this.O.w()),t};var Xh={name:"redirectUser",F:"session"};function Yh(t){return ic(t.b,Xh,t.a)}function Qh(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=Zh("local"),n=Zh("session"),r=Zh("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Br(s.localStorage.getItem(r))}catch(t){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Jh,t.a).then((function(t){return t?Zh(t):e}))}))}))})).then((function(e){return t.c=e,$h(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Zh("local"),this.a,_(this.g,this))}function $h(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,Zh(Zu[n]),t.a));return r.push(ic(t.b,Jh,t.a)),function(t){return new Ee((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Ne(t[s],E(o,s),a);else e(i)}))}(r)}Qh.prototype.g=function(){var t=this,e=Zh("local");rl(this,(function(){return De().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return $h(t,"local").then((function(){t.c=e}))}))}))};var Jh={name:"persistence",F:"session"};function Zh(t){return{name:"authUser",F:t}}function tl(t,e){return rl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function el(t){return rl(t,(function(){return ic(t.b,t.c,t.a)}))}function nl(t,e,n){return rl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Gh(t||{})}))}))}function rl(t,e){return t.f=t.f.then(e,e),t.f}function il(t){if(this.l=!1,Jr(this,"settings",new Qc),Jr(this,"app",t),!fl(this).options||!fl(this).options.apiKey)throw new S("invalid-api-key");t=Q.SDK_VERSION?xr(Q.SDK_VERSION):null,this.a=new $a(fl(this).options&&fl(this).options.apiKey,O(C),t),this.R=[],this.s=[],this.O=[],this.hb=Q.INTERNAL.createSubscribe(_(this.zc,this)),this.X=void 0,this.bc=Q.INTERNAL.createSubscribe(_(this.Ac,this)),hl(this,null),this.i=new Qh(fl(this).options.apiKey+":"+fl(this).name),this.D=new Wh(fl(this).options.apiKey+":"+fl(this).name),this.$=gl(this,function(t){var e=fl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Xh,t.a).then((function(t){return t&&e&&(t.authDomain=e),Gh(t||{})}))}(t.D,fl(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Yh(t.D)}));return gl(t,e)}(t).then((function(){return nl(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return tl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:el(t.i)}))):null})).then((function(e){hl(t,e||null)}));return gl(t,n)}(this)),this.h=gl(this,function(t){return t.$.then((function(){return cl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Zh("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=_(this.Zc,this),this.Ba=_(this.da,this),this.ya=_(this.mc,this),this.za=_(this.wc,this),this.Aa=_(this.xc,this),this.b=null,function(t){var e=fl(t).options.authDomain,n=fl(t).options.apiKey;e&&Pr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Hc(e,n,fl(t).name,t.P),Rc(t.b,t),dl(t)&&Ch(dl(t)),t.m){Ch(t.m);var r=t.m;r.wa(t.la()),bh(r,t),_h(r=t.m,t.J),Eh(r,t),os((r=t.m).a,t.P),wh(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Gc,this),this.u=0,kn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=jn(this.P.url);t=ti({protocol:t.c,host:t.a,port:t.g,options:ti({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function ol(t){Je.call(this,"languageCodeChanged"),this.h=t}function al(t){Je.call(this,"emulatorConfigChanged"),this.c=t}function sl(t){Je.call(this,"frameworkChanged"),this.f=t}function ul(t){return t.Oa||xe(new S("auth-domain-config-required"))}function cl(t){if(!Pr())return xe(new S("operation-not-supported-in-this-environment"));var e=ul(t).then((function(){return t.b.qa()})).then((function(t){return t?ti(t):null}));return gl(t,e)}function hl(t,e){dl(t)&&(function(t,e){$(t.S,(function(t){return t==e}))}(dl(t),t.Ba),pn(dl(t),"tokenChanged",t.ya),pn(dl(t),"userDeleted",t.za),pn(dl(t),"userInvalidated",t.Aa),Th(dl(t))),e&&(e.S.push(t.Ba),ln(e,"tokenChanged",t.ya),ln(e,"userDeleted",t.za),ln(e,"userInvalidated",t.Aa),0<t.u&&Ih(e)),Jr(t,"currentUser",e),e&&(e.wa(t.la()),bh(e,t),_h(e,t.J),Eh(e,t),os(e.a,t.P),wh(e,t))}function ll(t,e){var n=null,r=null;return gl(t,e.then((function(e){return n=Bo(e),r=$i(e),function(t,e){var n={};return n.apiKey=fl(t).options.apiKey,n.authDomain=fl(t).options.authDomain,n.appName=fl(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return function(t,e,n,r){var i=new yh(t,e);return n&&(i.ha=n),r&&_h(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return dl(t)&&e.uid==dl(t).uid?(Lh(dl(t),e),t.da(e)):(hl(t,e),Ch(e),t.da(e))})).then((function(){vl(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),t,_(t.kc,t))),n||e})).then((function(){return ti({user:dl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function fl(t){return t.app}function dl(t){return t.currentUser}function pl(t){return dl(t)&&dl(t)._lat||null}function vl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](pl(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](pl(t))}}function gl(t,e){return t.R.push(e),e.oa((function(){Y(t.R,e)})),e}function ml(){}function yl(){this.a={},this.b=1e12}Qh.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new S("invalid-persistence-type"),n=new S("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Ir()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ou()&&"none"!==t)throw n;break;default:if(!Rr()&&"none"!==t)throw n}}(t),rl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,$h(n,t)})).then((function(){if(n.c=Zh(t),e)return n.b.set(n.c,e,n.a)})):De()}))},I(il,kn),I(ol,Je),I(al,Je),I(sl,Je),(t=il.prototype).xb=function(t){return gl(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,is(this.a,this.aa),this.dispatchEvent(new ol(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new S("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&wr().then((function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,os(this.a,this.P),this.dispatchEvent(new al(this.P))}},t.Gc=function(t){this.J.push(t),ss(this.a,Q.SDK_VERSION?xr(Q.SDK_VERSION,this.J):null),this.dispatchEvent(new sl(this.J))},t.Ga=function(){return Z(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:fl(this).options.apiKey,authDomain:fl(this).options.authDomain,appName:fl(this).name,currentUser:dl(this)&&dl(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?_(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return ll(i,ws(i.a,o))}))},t.Xc=function(t){if(!Pr())return xe(new S("operation-not-supported-in-this-environment"));var e=this,n=Qi(t.providerId),r=jr(),i=null;(!Fr()||Er())&&fl(this).options.authDomain&&t.isOAuthProvider&&(i=yu(fl(this).options.authDomain,fl(this).options.apiKey,fl(this).name,"signInViaPopup",t,null,r,Q.SDK_VERSION||null,null,null,this.T(),this.P));var o=mr(i,n&&n.ua,n&&n.ta);return gl(this,n=ul(this).then((function(n){return Fc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new Ee((function(t,n){e.na("signInViaPopup",null,new S("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Bc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&gr(o),t?ti(t):null})).o((function(t){throw o&&gr(o),t})))},t.Yc=function(t){if(!Pr())return xe(new S("operation-not-supported-in-this-environment"));var e=this;return gl(this,ul(this).then((function(){return function(t){return rl(t,(function(){return t.b.set(Jh,t.c.F,t.a)}))}(e.i)})).then((function(){return Vc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.qa=function(){var t=this;return cl(this).then((function(e){return t.b&&Gc(t.b.b),e})).o((function(e){throw t.b&&Gc(t.b.b),e}))},t.dd=function(t){if(!t)return xe(new S("null-user"));if(this.S!=t.tenantId)return xe(new S("tenant-id-mismatch"));var e=this,n={};n.apiKey=fl(this).options.apiKey,n.authDomain=fl(this).options.authDomain,n.appName=fl(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Za]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new yh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&_h(e,r),Lh(e,t),e}(t,n,e.D,e.Ga());return gl(this,this.h.then((function(){if(fl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return dl(e)&&t.uid==dl(e).uid?(Lh(dl(e),t),e.da(t)):(hl(e,r),Ch(r),e.da(r))})).then((function(){vl(e)})))},t.Ab=function(){var t=this;return gl(this,this.h.then((function(){return t.b&&Gc(t.b.b),dl(t)?(hl(t,null),el(t.i).then((function(){vl(t)}))):De()})))},t.Zc=function(){var t=this;return nl(this.i,fl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=dl(t)&&e){n=dl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Lh(dl(t),e),dl(t).I();(dl(t)||e)&&(hl(t,e),e&&(Ch(e),e.ha=t.D),t.b&&Rc(t.b,t),vl(t))}}))},t.da=function(t){return tl(this.i,t)},t.mc=function(){vl(this),this.da(dl(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then((function(){return ll(e,De(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(dl(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),gl(t,t.h.then((function(){!t.l&&X(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(pl(t)))})))}(this,(function(){t.next(dl(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(dl(r)):"function"==typeof t.next&&t.next(dl(r))})),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(dl(r)):"function"==typeof t.next&&t.next(dl(r))})),this.bc(t,e,n)},t.nc=function(t){var e=this;return gl(this,this.h.then((function(){return dl(e)?dl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return ll(e,ru(e.a,$s,{token:t}))})).then((function(t){var n=t.user;return Mh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return ll(n,ru(n.a,Js,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return ll(n,ru(n.a,Ss,{email:t,password:e}))}))},t.$a=function(t){var e=this;return this.h.then((function(){return ll(e,t.ka(e.a))}))},t.Sc=function(t){return Qr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then((function(){var e=dl(t);if(e&&e.isAnonymous){var n=ti({providerId:null,isNewUser:!1});return ti({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return ll(t,t.a.zb()).then((function(e){var n=e.user;return Mh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return dl(this)&&dl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&dl(this)&&Ih(dl(this))},t.Pc=function(t){var e=this;K(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&dl(this)&&Th(dl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),gl(this,this.h.then((function(){e.l||X(e.s,t)&&t(pl(e))})))},t.removeAuthTokenListener=function(t){$(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Zh("local"),t.a,this.ja),this.b&&(Pc(this.b,this),Gc(this.b.b)),Promise.resolve()},t.hc=function(t){return gl(this,function(t,e){return ru(t,As,{identifier:e,continueUri:Mr()?fr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Po(t)},t.wb=function(t,e){var n=this;return gl(this,De().then((function(){var t=new Oi(e);if(!t.c)throw new S("argument-error",Mi+" must be true when sending sign in link to email");return qi(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},t.nb=function(t,e){return gl(this,this.a.nb(t,e).then((function(){})))},t.Ra=function(t){return gl(this,this.a.Ra(t).then((function(t){return new ci(t)})))},t.jb=function(t){return gl(this,this.a.jb(t).then((function(){})))},t.vb=function(t,e){var n=this;return gl(this,De().then((function(){return void 0===e||vt(e)?{}:qi(new Oi(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.Wc=function(t,e){return gl(this,Jc(this,t,e,_(this.$a,this)))},t.Vc=function(t,e){var n=this;return gl(this,De().then((function(){var r=e||fr(),i=Ro(t,r);if(!(r=Po(r)))throw new S("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new S("tenant-id-mismatch");return n.$a(i)})))},ml.prototype.render=function(){},ml.prototype.reset=function(){},ml.prototype.getResponse=function(){},ml.prototype.execute=function(){};var bl=null;function wl(t,e){return(e=_l(e))&&t.a[e]||null}function _l(t){return(t=void 0===t?1e12:t)?t.toString():null}function El(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=he(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():ln(this.f,"click",this.i)}function kl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Il(){}function Tl(){}yl.prototype.render=function(t,e){return this.a[this.b.toString()]=new El(t,e),this.b++},yl.prototype.reset=function(t){var e=wl(this,t);t=_l(t),e&&t&&(e.delete(),delete this.a[t])},yl.prototype.getResponse=function(t){return(t=wl(this,t))?t.getResponse():null},yl.prototype.execute=function(t){(t=wl(this,t))&&t.execute()},El.prototype.getResponse=function(){return kl(this),this.b},El.prototype.execute=function(){kl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},El.prototype.delete=function(){kl(this),this.g=!0,clearTimeout(this.a),this.a=null,pn(this.f,"click",this.i)},Jr(Il,"FACTOR_ID","phone"),Tl.prototype.g=function(){return bl||(bl=new yl),De(bl)},Tl.prototype.c=function(){};var Sl=null;function Al(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Cl=new wt(It,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Dl=new Kr(3e4,6e4);Al.prototype.g=function(t){var e=this;return new Ee((function(n,r){var i=setTimeout((function(){r(new S("network-request-failed"))}),Dl.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new S("internal-error"));delete s[e.a]},De(Ka(Ct(Cl,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new S("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Al.prototype.c=function(){this.b--};var xl=null;function Nl(t,e,n,r,i,o,a){if(Jr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,a?(Sl||(Sl=new Tl),a=Sl):(xl||(xl=new Al),a=xl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Pl])throw new S("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ml],!s.document)throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!he(e)||!this.i&&he(e).hasChildNodes())throw new S("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new $a(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Ol];this.a[Ol]=function(t){if(Ll(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Or(c,s);"function"==typeof e&&e(t)}};var h=this.a[Rl];this.a[Rl]=function(){if(Ll(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Or(h,s);"function"==typeof t&&t()}}}var Ol="callback",Rl="expired-callback",Pl="sitekey",Ml="size";function Ll(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Fl(t,e){return t.h.push(e),e.oa((function(){Y(t.h,e)})),e}function Ul(t){if(t.D)throw new S("internal-error","RecaptchaVerifier instance has been destroyed.")}function Vl(t,e,n){var r=!1;try{this.b=n||Q.app()}catch(t){throw new S("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new S("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Q.SDK_VERSION?xr(Q.SDK_VERSION,o):null,Nl.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,O(C),r)}function Bl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new S("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=jl.length)throw new S("internal-error","Argument validator received an unsupported number of arguments.");n=jl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new S("argument-error",t+" failed: "+r)}(t=Nl.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Fl(this,De().then((function(){if(Mr()&&!kr())return wr();throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,Bs,{})})).then((function(e){t.a[Pl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Ul(this);var t=this;return Fl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=he(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ce&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',zt(a.name),'"'),a.type){o.push(' type="',zt(a.type),'"');var s={};yt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=ge(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):le(o,a)),2<r.length&&ve(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Ul(this);var t=this;return Fl(this,this.render().then((function(e){return new Ee((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){$(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Ul(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Ul(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=he(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},I(Vl,Nl);var jl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function ql(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Hl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Kl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:v}}function zl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Gl(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Wl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Xl(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Yl(t){return v(t)&&"string"==typeof t.uid}function Ql(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function $l(t,e){for(var n in e){var r=e[n].name;t[r]=tf(r,t[n],e[n].j)}}function Jl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:E((function(t){return this[t]}),n),set:E((function(t,e,n,r){Bl(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function Zl(t,e,n,r){t[e]=tf(e,n,r)}function tf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Bl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}$l(il.prototype,{jb:{name:"applyActionCode",j:[ql("code")]},Ra:{name:"checkActionCode",j:[ql("code")]},nb:{name:"confirmPasswordReset",j:[ql("code"),ql("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[ql("email"),ql("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[ql("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[ql("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Ql(Kl(),zl(),"nextOrObserver"),zl("opt_error",!0),zl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Ql(Kl(),zl(),"nextOrObserver"),zl("opt_error",!0),zl("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[ql("email"),Ql(Kl("opt_actionCodeSettings",!0),Gl(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[ql("email"),Kl("actionCodeSettings")]},xb:{name:"setPersistence",j:[ql("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Wl()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Wl()]},Tc:{name:"signInWithCustomToken",j:[ql("token")]},Uc:{name:"signInWithEmailAndPassword",j:[ql("email"),ql("password")]},Vc:{name:"signInWithEmailLink",j:[ql("email"),ql("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[ql("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Ql({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof yh)}},Gl(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[ql(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[ql("url"),Kl("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[ql("code")]}}),Jl(il.prototype,{lc:{name:"languageCode",kb:Ql(ql(),Gl(),"languageCode")},ti:{name:"tenantId",kb:Ql(ql(),Gl(),"tenantId")}}),il.Persistence=Zu,il.Persistence.LOCAL="local",il.Persistence.SESSION="session",il.Persistence.NONE="none",$l(yh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Hl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Hl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Wl()]},qb:{name:"linkWithCredential",j:[Wl()]},Dc:{name:"linkWithPhoneNumber",j:[ql("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Wl()]},tb:{name:"reauthenticateWithCredential",j:[Wl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[ql("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Ql(Kl("opt_actionCodeSettings",!0),Gl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[ql(null,!0)]},cd:{name:"unlink",j:[ql("provider")]},Bb:{name:"updateEmail",j:[ql("email")]},Cb:{name:"updatePassword",j:[ql("password")]},ed:{name:"updatePhoneNumber",j:[Wl("phone")]},Db:{name:"updateProfile",j:[Kl("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[ql("email"),Ql(Kl("opt_actionCodeSettings",!0),Gl(null,!0),"opt_actionCodeSettings",!0)]}}),$l(yl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$l(ml.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$l(Ee.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Jl(Qc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Hl("appVerificationDisabledForTesting")}}),$l($c.prototype,{confirm:{name:"confirm",j:[ql("verificationCode")]}}),Zl(ho,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[yo,No,Lo,vo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Ql(ql(),Kl(),"json")]),Zl(Oo,"credential",(function(t,e){return new xo(t,e)}),[ql("email"),ql("password")]),$l(xo.prototype,{w:{name:"toJSON",j:[ql(null,!0)]}}),$l(Eo.prototype,{Ca:{name:"addScope",j:[ql("scope")]},Ka:{name:"setCustomParameters",j:[Kl("customOAuthParameters")]}}),Zl(Eo,"credential",ko,[Ql(ql(),Kl(),"token")]),Zl(Oo,"credentialWithLink",Ro,[ql("email"),ql("emailLink")]),$l(Io.prototype,{Ca:{name:"addScope",j:[ql("scope")]},Ka:{name:"setCustomParameters",j:[Kl("customOAuthParameters")]}}),Zl(Io,"credential",To,[Ql(ql(),Kl(),"token")]),$l(So.prototype,{Ca:{name:"addScope",j:[ql("scope")]},Ka:{name:"setCustomParameters",j:[Kl("customOAuthParameters")]}}),Zl(So,"credential",Ao,[Ql(ql(),Ql(Kl(),Gl()),"idToken"),Ql(ql(),Gl(),"accessToken",!0)]),$l(Co.prototype,{Ka:{name:"setCustomParameters",j:[Kl("customOAuthParameters")]}}),Zl(Co,"credential",Do,[Ql(ql(),Kl(),"token"),ql("secret",!0)]),$l(_o.prototype,{Ca:{name:"addScope",j:[ql("scope")]},credential:{name:"credential",j:[Ql(ql(),Ql(Kl(),Gl()),"optionsOrIdToken"),Ql(ql(),Gl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Kl("customOAuthParameters")]}}),$l(go.prototype,{w:{name:"toJSON",j:[ql(null,!0)]}}),$l(fo.prototype,{w:{name:"toJSON",j:[ql(null,!0)]}}),Zl(Uo,"credential",Vo,[ql("verificationId"),ql("verificationCode")]),$l(Uo.prototype,{fb:{name:"verifyPhoneNumber",j:[Ql(ql(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Xl(t.session,uo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Xl(t.session,co)&&Yl(t.multiFactorHint):t.session&&t.multiFactorUid?Xl(t.session,co)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),$l(Mo.prototype,{w:{name:"toJSON",j:[ql(null,!0)]}}),$l(S.prototype,{toJSON:{name:"toJSON",j:[ql(null,!0)]}}),$l(Xo.prototype,{toJSON:{name:"toJSON",j:[ql(null,!0)]}}),$l(Wo.prototype,{toJSON:{name:"toJSON",j:[ql(null,!0)]}}),$l(rh.prototype,{toJSON:{name:"toJSON",j:[ql(null,!0)]}}),$l(th.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),$l(ch.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},ql("displayName",!0)]},bd:{name:"unenroll",j:[Ql({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Yl},ql(),"multiFactorInfoIdentifier")]}}),$l(Vl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Zl(ki,"parseLink",Ni,[ql("link")]),Zl(Il,"assertion",(function(t){return new sh(t)}),[Wl("phone")]),function(){if(void 0===Q||!Q.INTERNAL||!Q.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:li,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:hi,VERIFY_AND_CHANGE_EMAIL:fi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:il,AuthCredential:ho,Error:S};Zl(t,"EmailAuthProvider",Oo,[]),Zl(t,"FacebookAuthProvider",Eo,[]),Zl(t,"GithubAuthProvider",Io,[]),Zl(t,"GoogleAuthProvider",So,[]),Zl(t,"TwitterAuthProvider",Co,[]),Zl(t,"OAuthProvider",_o,[ql("providerId")]),Zl(t,"SAMLAuthProvider",wo,[ql("providerId")]),Zl(t,"PhoneAuthProvider",Uo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof il)}}]),Zl(t,"RecaptchaVerifier",Vl,[Ql(ql(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Kl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Q.app.App)}}]),Zl(t,"ActionCodeURL",ki,[]),Zl(t,"PhoneMultiFactorGenerator",Il,[]),Q.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new il(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Q.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.nc,t),addAuthTokenListener:_(t.cc,t),removeAuthTokenListener:_(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Q.registerVersion("@firebase/auth","0.16.4"),Q.INTERNAL.extendNamespace({User:yh})}()}.apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var $=function(t,e){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function J(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Z,tt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},et=et||{},nt=tt||self;function rt(){}function it(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ot(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var at="closure_uid_"+(1e9*Math.random()>>>0),st=0;function ut(t,e,n){return t.call.apply(t.bind,arguments)}function ct(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ht(t,e,n){return(ht=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ut:ct).apply(null,arguments)}function lt(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ft(){return Date.now()}function dt(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function pt(){this.j=this.j,this.i=this.i}pt.prototype.j=!1,pt.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,at)&&t[at]||(t[at]=++st)}(this)},pt.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var vt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},gt=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function mt(t){return Array.prototype.concat.apply([],arguments)}function yt(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function bt(t){return/^[\s\xa0]*$/.test(t)}var wt,_t=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Et(t,e){return-1!=t.indexOf(e)}function kt(t,e){return t<e?-1:t>e?1:0}t:{var It=nt.navigator;if(It){var Tt=It.userAgent;if(Tt){wt=Tt;break t}}wt=""}function St(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function At(t){var e={};for(var n in t)e[n]=t[n];return e}var Ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Dt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Ct.length;o++)n=Ct[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function xt(t){return xt[" "](t),t}xt[" "]=rt;var Nt,Ot,Rt=Et(wt,"Opera"),Pt=Et(wt,"Trident")||Et(wt,"MSIE"),Mt=Et(wt,"Edge"),Lt=Mt||Pt,Ft=Et(wt,"Gecko")&&!(Et(wt.toLowerCase(),"webkit")&&!Et(wt,"Edge"))&&!(Et(wt,"Trident")||Et(wt,"MSIE"))&&!Et(wt,"Edge"),Ut=Et(wt.toLowerCase(),"webkit")&&!Et(wt,"Edge");function Vt(){var t=nt.document;return t?t.documentMode:void 0}t:{var Bt="",jt=(Ot=wt,Ft?/rv:([^\);]+)(\)|;)/.exec(Ot):Mt?/Edge\/([\d\.]+)/.exec(Ot):Pt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ot):Ut?/WebKit\/(\S+)/.exec(Ot):Rt?/(?:Version)[ \/]?(\S+)/.exec(Ot):void 0);if(jt&&(Bt=jt?jt[1]:""),Pt){var qt=Vt();if(null!=qt&&qt>parseFloat(Bt)){Nt=String(qt);break t}}Nt=Bt}var Ht,Kt={};function zt(t){return function(t,e){var n=Kt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=_t(String(Nt)).split("."),r=_t(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=kt(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||kt(0==a[2].length,0==s[2].length)||kt(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}nt.document&&Pt?Ht=Vt()||parseInt(Nt,10)||void 0:Ht=void 0;var Gt=Ht,Wt=!Pt||9<=Number(Gt),Xt=Pt&&!zt("9"),Yt=function(){if(!nt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{nt.addEventListener("test",rt,e),nt.removeEventListener("test",rt,e)}catch(t){}return t}();function Qt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function $t(t,e){if(Qt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ft){t:{try{xt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Jt[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Qt.prototype.b=function(){this.defaultPrevented=!0},dt($t,Qt);var Jt={2:"touch",3:"pen",4:"mouse"};$t.prototype.b=function(){$t.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Xt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var Zt="closure_listenable_"+(1e6*Math.random()|0),te=0;function ee(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++te,this.Y=this.Z=!1}function ne(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function re(t){this.src=t,this.a={},this.b=0}function ie(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=vt(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ne(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function oe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}re.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=oe(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new ee(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var ae="closure_lm_"+(1e6*Math.random()|0),se={};function ue(t,e,n,r,i){if(r&&r.once)return he(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ue(t,e[o],n,r,i);return null}return n=ye(n),t&&t[Zt]?t.va(e,n,ot(r)?!!r.capture:!!r,i):ce(t,e,n,!1,r,i)}function ce(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=ot(i)?!!i.capture:!!i;if(a&&!Wt)return null;var s=ge(t);if(s||(t[ae]=s=new re(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=ve,e=Wt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Yt||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(de(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function he(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)he(t,e[o],n,r,i);return null}return n=ye(n),t&&t[Zt]?t.wa(e,n,ot(r)?!!r.capture:!!r,i):ce(t,e,n,!0,r,i)}function le(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)le(t,e[o],n,r,i);else r=ot(r)?!!r.capture:!!r,n=ye(n),t&&t[Zt]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=oe(o=t.a[e],n,r,i))&&(ne(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=ge(t))&&(e=t.a[e.toString()],t=-1,e&&(t=oe(e,n,r,i)),(n=-1<t?e[t]:null)&&fe(n))}function fe(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Zt])ie(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(de(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ge(e))?(ie(n,t),0==n.b&&(n.src=null,e[ae]=null)):ne(t)}}}function de(t){return t in se?se[t]:se[t]="on"+t}function pe(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&fe(t),n.call(r,e)}function ve(t,e){if(t.Y)return!0;if(!Wt){if(!e)t:{e=["window","event"];for(var n=nt,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return pe(t,e=new $t(e,this))}return pe(t,new $t(e,this))}function ge(t){return(t=t[ae])instanceof re?t:null}var me="__closure_events_fn_"+(1e9*Math.random()>>>0);function ye(t){return"function"==typeof t?t:(t[me]||(t[me]=function(e){return t.handleEvent(e)}),t[me])}function be(){pt.call(this),this.c=new re(this),this.J=this,this.C=null}function we(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Qt(e,t);else if(e instanceof Qt)e.target=e.target||t;else{var i=e;Dt(e=new Qt(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=_e(a,r,!0,e)&&i}if(i=_e(a=e.a=t,r,!0,e)&&i,i=_e(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=_e(a=e.a=n[o],r,!1,e)&&i}function _e(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&ie(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}dt(be,pt),be.prototype[Zt]=!0,(Z=be.prototype).addEventListener=function(t,e,n,r){ue(this,t,e,n,r)},Z.removeEventListener=function(t,e,n,r){le(this,t,e,n,r)},Z.G=function(){if(be.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ne(n[r]);delete e.a[t],e.b--}}this.C=null},Z.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Z.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ee=nt.JSON.stringify;function ke(){this.b=this.a=null}var Ie,Te=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Ae}),(function(t){t.reset()}));function Se(){var t=Ne,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ae(){this.next=this.b=this.a=null}function Ce(t){nt.setTimeout((function(){throw t}),0)}function De(t,e){Ie||function(){var t=nt.Promise.resolve(void 0);Ie=function(){t.then(Oe)}}(),xe||(Ie(),xe=!0),Ne.add(t,e)}ke.prototype.add=function(t,e){var n=Te.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ae.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ae.prototype.reset=function(){this.next=this.b=this.a=null};var xe=!1,Ne=new ke;function Oe(){for(var t;t=Se();){try{t.a.call(t.b)}catch(t){Ce(t)}var e=Te;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}xe=!1}function Re(t,e){be.call(this),this.b=t||1,this.a=e||nt,this.f=ht(this.Za,this),this.g=ft()}function Pe(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Me(t,e,n){if("function"==typeof t)n&&(t=ht(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ht(t.handleEvent,t)}return 2147483647<Number(e)?-1:nt.setTimeout(t,e||0)}function Le(t){t.a=Me((function(){t.a=null,t.c&&(t.c=!1,Le(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}dt(Re,be),(Z=Re.prototype).aa=!1,Z.M=null,Z.Za=function(){if(this.aa){var t=ft()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),we(this,"tick"),this.aa&&(Pe(this),this.start()))}},Z.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=ft())},Z.G=function(){Re.X.G.call(this),Pe(this),delete this.a};var Fe=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}$(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Le(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(nt.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(pt);function Ue(t){pt.call(this),this.b=t,this.a={}}dt(Ue,pt);var Ve=[];function Be(t,e,n,r){Array.isArray(n)||(n&&(Ve[0]=n.toString()),n=Ve);for(var i=0;i<n.length;i++){var o=ue(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function je(t){St(t.a,(function(t,e){this.a.hasOwnProperty(e)&&fe(t)}),t),t.a={}}function qe(){this.a=!0}function He(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Ee(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Ue.prototype.G=function(){Ue.X.G.call(this),je(this)},Ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qe.prototype.info=function(){};var Ke={},ze=null;function Ge(){return ze=ze||new be}function We(t){Qt.call(this,Ke.Fa,t)}function Xe(t){var e=Ge();we(e,new We(e,t))}function Ye(t,e){Qt.call(this,Ke.STAT_EVENT,t),this.stat=e}function Qe(t){var e=Ge();we(e,new Ye(e,t))}function $e(t){Qt.call(this,Ke.Ga,t)}function Je(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return nt.setTimeout((function(){t()}),e)}Ke.Fa="serverreachability",dt(We,Qt),Ke.STAT_EVENT="statevent",dt(Ye,Qt),Ke.Ga="timingevent",dt($e,Qt);var Ze={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},tn={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function en(){}function nn(t){var e;return(e=t.a)||(e=t.a={}),e}function rn(){}en.prototype.a=null;var on,an={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function sn(){Qt.call(this,"d")}function un(){Qt.call(this,"c")}function cn(){}function hn(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Ue(this),this.P=ln,t=Lt?125:void 0,this.R=new Re(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}dt(sn,Qt),dt(un,Qt),dt(cn,en),on=new cn;var ln=45e3,fn={},dn={};function pn(t,e,n){t.H=1,t.i=Ln(xn(e)),t.j=n,t.I=!0,vn(t,null)}function vn(t,e){t.u=ft(),yn(t),t.l=xn(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Yn(n.b,"t",r),t.D=0,t.a=Hr(t.g,t.g.C?e:null),0<t.O&&(t.F=new Fe(ht(t.Ca,t,t.a),t.O)),Be(t.J,t.a,"readystatechange",t.Xa),e=t.B?At(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Xe(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");a=2<=l.length&&"type"==l[1]?a+(h+"=")+c+"&":a+(h+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function gn(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=mn(t,n);if(i==dn){4==e&&(t.h=4,Qe(14),r=!1),He(t.c,t.f,null,"[Incomplete Response]");break}if(i==fn){t.h=4,Qe(15),He(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}He(t.c,t.f,i,null),kn(t,i)}4==e&&0==n.length&&(t.h=1,Qe(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mr(e),e.F=!0,Qe(11))):(He(t.c,t.f,n,"[Invalid Chunked Response]"),En(t),_n(t))}function mn(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?dn:(n=Number(e.substring(n,r)),isNaN(n)?fn:(r+=1)+n>e.length?dn:(e=e.substr(r,n),t.D=r+n,e))}function yn(t){t.T=ft()+t.P,bn(t,t.P)}function bn(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Je(ht(t.Va,t),e)}function wn(t){t.o&&(nt.clearTimeout(t.o),t.o=null)}function _n(t){0==t.g.v||t.A||Ur(t.g,t)}function En(t){wn(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Pe(t.R),je(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function kn(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||nr(n.b,t)))if(n.I=t.N,!t.C&&nr(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Fr(n),Sr(n)}Pr(n),Qe(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Je(ht(n.Sa,n),6e3));if(1>=er(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Br(n,11)}else if((t.C||n.a==t)&&Fr(n),!bt(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=u.b;!l.a&&(Et(h,"spdy")||Et(h,"quic")||Et(h,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(rr(l,l.b),l.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Mn(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=ft()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=qr(u,u.C?u.ga:null,u.fa),d.C){ir(u.b,d);var p=d,v=u.D;v&&p.setTimeout(v),p.o&&(wn(p),yn(p)),u.a=d}else Rr(u);0<n.g.length&&Dr(n)}else"stop"!=i[0]&&"close"!=i[0]||Br(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Br(n,7):Tr(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Xe(4)}catch(t){}}function In(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(it(t)||"string"==typeof t)gt(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(it(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(it(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Tn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Tn)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Sn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];An(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)An(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function An(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Z=hn.prototype).setTimeout=function(t){this.P=t},Z.Xa=function(t){t=t.target;var e=this.F;e&&3==_r(t)?e.f():this.Ca(t)},Z.Ca=function(t){try{if(t==this.a)t:{var e=_r(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Lt&&!this.a.$())){this.A||4!=e||7==n||Xe(8==n||0>=r?3:2),wn(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bt(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,Qe(12),En(this),_n(this);break t}He(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,kn(this,u)}this.I?(gn(this,e,o),Lt&&this.b&&3==e&&(Be(this.J,this.R,"tick",this.Wa),this.R.start())):(He(this.c,this.f,o,null),kn(this,o)),4==e&&En(this),this.b&&!this.A&&(4==e?Ur(this.g,this):(this.b=!1,yn(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Qe(12)):(this.h=0,Qe(13)),En(this),_n(this)}}}catch(t){}},Z.Wa=function(){if(this.a){var t=_r(this.a),e=this.a.$();this.D<e.length&&(wn(this),gn(this,t,e),this.b&&4!=t&&yn(this))}},Z.cancel=function(){this.A=!0,En(this)},Z.Va=function(){this.o=null;var t=ft();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Xe(3),Qe(17)),En(this),this.h=2,_n(this)):bn(this,this.T-t)},(Z=Tn.prototype).K=function(){Sn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Z.L=function(){return Sn(this),this.a.concat()},Z.get=function(t,e){return An(this.b,t)?this.b[t]:e},Z.set=function(t,e){An(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Z.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Cn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Dn(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Dn){this.a=void 0!==e?e:t.a,Nn(this,t.f),this.j=t.j,On(this,t.c),Rn(this,t.h),this.g=t.g,e=t.b;var n=new zn;n.c=e.c,e.a&&(n.a=new Tn(e.a),n.b=e.b),Pn(this,n),this.i=t.i}else t&&(n=String(t).match(Cn))?(this.a=!!e,Nn(this,n[1]||"",!0),this.j=Fn(n[2]||""),On(this,n[3]||"",!0),Rn(this,n[4]),this.g=Fn(n[5]||"",!0),Pn(this,n[6]||"",!0),this.i=Fn(n[7]||"")):(this.a=!!e,this.b=new zn(null,this.a))}function xn(t){return new Dn(t)}function Nn(t,e,n){t.f=n?Fn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function On(t,e,n){t.c=n?Fn(e,!0):e}function Rn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Pn(t,e,n){e instanceof zn?(t.b=e,function(t,e){e&&!t.f&&(Gn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Wn(this,e),Yn(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Un(e,Hn)),t.b=new zn(e,t.a))}function Mn(t,e,n){t.b.set(e,n)}function Ln(t){return Mn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ft()).toString(36)),t}function Fn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Un(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Vn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Vn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Dn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Un(e,Bn,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Un(e,Bn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Un(n,"/"==n.charAt(0)?qn:jn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Un(n,Kn)),t.join("")};var Bn=/[#\/\?@]/g,jn=/[#\?:]/g,qn=/[#\?]/g,Hn=/[#\?@]/g,Kn=/#/g;function zn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Gn(t){t.a||(t.a=new Tn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Wn(t,e){Gn(t),e=Qn(t,e),An(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,An((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Sn(t)))}function Xn(t,e){return Gn(t),e=Qn(t,e),An(t.a.b,e)}function Yn(t,e,n){Wn(t,e),0<n.length&&(t.c=null,t.a.set(Qn(t,e),yt(n)),t.b+=n.length)}function Qn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Z=zn.prototype).add=function(t,e){Gn(this),this.c=null,t=Qn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Z.forEach=function(t,e){Gn(this),this.a.forEach((function(n,r){gt(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Z.L=function(){Gn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Z.K=function(t){Gn(this);var e=[];if("string"==typeof t)Xn(this,t)&&(e=mt(e,this.a.get(Qn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=mt(e,t[n])}return e},Z.set=function(t,e){return Gn(this),this.c=null,Xn(this,t=Qn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Z.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Z.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var $n=function(t,e){this.b=t,this.a=e};function Jn(t){this.g=t||Zn,t=nt.PerformanceNavigationTiming?0<(t=nt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(nt.ia&&nt.ia.ya&&nt.ia.ya()&&nt.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Zn=10;function tr(t){return!!t.b||!!t.a&&t.a.size>=t.f}function er(t){return t.b?1:t.a?t.a.size:0}function nr(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function rr(t,e){t.a?t.a.add(e):t.b=e}function ir(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function or(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=J(t.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return yt(t.c)}function ar(){}function sr(){this.a=new ar}function ur(t,e,n){var r=n||"";try{In(t,(function(t,n){var i=t;ot(t)&&(i=Ee(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function cr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Jn.prototype.cancel=function(){var t,e;if(this.c=or(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=J(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},ar.prototype.stringify=function(t){return nt.JSON.stringify(t,void 0)},ar.prototype.parse=function(t){return nt.JSON.parse(t,void 0)};var hr=nt.JSON.parse;function lr(t){be.call(this),this.headers=new Tn,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=fr,this.D=this.F=!1}dt(lr,be);var fr="",dr=/^https?$/i,pr=["POST","PUT"];function vr(t){return"content-type"==t.toLowerCase()}function gr(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,mr(t),br(t)}function mr(t){t.u||(t.u=!0,we(t,"complete"),we(t,"error"))}function yr(t){if(t.b&&void 0!==et&&(!t.s[1]||4!=_r(t)||2!=t.W()))if(t.l&&4==_r(t))Me(t.za,0,t);else if(we(t,"readystatechange"),4==_r(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Cn)[1]||null;if(!o&&nt.self&&nt.self.location){var a=nt.self.location.protocol;o=a.substr(0,a.length-1)}i=!dr.test(o?o.toLowerCase():"")}e=i}if(e)we(t,"complete"),we(t,"success");else{t.h=6;try{var s=2<_r(t)?t.a.statusText:""}catch(n){s=""}t.f=s+" ["+t.W()+"]",mr(t)}}finally{br(t)}}}function br(t,e){if(t.a){wr(t);var n=t.a,r=t.s[0]?rt:null;t.a=null,t.s=null,e||we(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function wr(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(nt.clearTimeout(t.m),t.m=null)}function _r(t){return t.a?t.a.readyState:0}function Er(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return St(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Mn(t,e,n))}function kr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ir(t){this.pa=0,this.g=[],this.c=new qe,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=kr("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=kr("baseRetryDelayMs",5e3,t),this.Ra=kr("retryDelaySeedMs",1e4,t),this.Ma=kr("forwardChannelMaxRetries",2,t),this.ma=kr("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Jn(t&&t.concurrentRequestLimit),this.ka=new sr,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Tr(t){if(Ar(t),3==t.v){var e=t.R++,n=xn(t.B);Mn(n,"SID",t.J),Mn(n,"RID",e),Mn(n,"TYPE","terminate"),Nr(t,n),(e=new hn(t,t.c,e,void 0)).H=2,e.i=Ln(xn(n)),n=!1,nt.navigator&&nt.navigator.sendBeacon&&(n=nt.navigator.sendBeacon(e.i.toString(),"")),!n&&nt.Image&&((new Image).src=e.i,n=!0),n||(e.a=Hr(e.g,null),e.a.ba(e.i)),e.u=ft(),yn(e)}jr(t)}function Sr(t){t.a&&(Mr(t),t.a.cancel(),t.a=null)}function Ar(t){Sr(t),t.j&&(nt.clearTimeout(t.j),t.j=null),Fr(t),t.b.cancel(),t.h&&("number"==typeof t.h&&nt.clearTimeout(t.h),t.h=null)}function Cr(t,e){t.g.push(new $n(t.Oa++,e)),3==t.v&&Dr(t)}function Dr(t){tr(t.b)||t.h||(t.h=!0,De(t.Ba,t),t.u=0)}function xr(t,e){var n;n=e?e.f:t.R++;var r=xn(t.B);Mn(r,"SID",t.J),Mn(r,"RID",n),Mn(r,"AID",t.P),Nr(t,r),t.i&&t.l&&Er(r,t.i,t.l),n=new hn(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Or(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),rr(t.b,n),pn(n,r,e)}function Nr(t,e){t.f&&In({},(function(t,n){Mn(e,n,t)}))}function Or(t,e,n){n=Math.min(t.g.length,n);var r=t.f?ht(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{ur(h,a,"req"+c+"_")}catch(t){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Rr(t){t.a||t.j||(t.T=1,De(t.Aa,t),t.o=0)}function Pr(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Je(ht(t.Aa,t),Vr(t,t.o)),t.o++,0))}function Mr(t){null!=t.s&&(nt.clearTimeout(t.s),t.s=null)}function Lr(t){t.a=new hn(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=xn(t.la);Mn(e,"RID","rpc"),Mn(e,"SID",t.J),Mn(e,"CI",t.H?"0":"1"),Mn(e,"AID",t.P),Nr(t,e),Mn(e,"TYPE","xmlhttp"),t.i&&t.l&&Er(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ln(xn(e)),n.j=null,n.I=!0,vn(n,t)}function Fr(t){null!=t.m&&(nt.clearTimeout(t.m),t.m=null)}function Ur(t,e){var n=null;if(t.a==e){Fr(t),Mr(t),t.a=null;var r=2}else{if(!nr(t.b,e))return;n=e.s,ir(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=ft()-e.u;var i=t.u;we(r=Ge(),new $e(r,n,e,i)),Dr(t)}else Rr(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(er(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Je(ht(t.Ba,t,e),Vr(t,t.u)),t.u++,0)))}(t,e)||2==r&&Pr(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Br(t,5);break;case 4:Br(t,10);break;case 3:Br(t,6);break;default:Br(t,2)}}function Vr(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Br(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=ht(t.Ya,t);n||(n=new Dn("//www.google.com/images/cleardot.gif"),nt.location&&"http"==nt.location.protocol||Nn(n,"https"),Ln(n)),function(t,e){var n=new qe;if(nt.Image){var r=new Image;r.onload=lt(cr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=lt(cr,n,r,"TestLoadImage: error",!1,e),r.onabort=lt(cr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=lt(cr,n,r,"TestLoadImage: timeout",!1,e),nt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Qe(2);t.v=0,t.f&&t.f.ra(e),jr(t),Ar(t)}function jr(t){t.v=0,t.I=-1,t.f&&(0==or(t.b).length&&0==t.g.length||(t.b.c.length=0,yt(t.g),t.g.length=0),t.f.qa())}function qr(t,e,n){var r=function(t){return t instanceof Dn?xn(t):new Dn(t,void 0)}(n);if(""!=r.c)e&&On(r,e+"."+r.c),Rn(r,r.h);else{var i=nt.location;r=function(t,e,n,r){var i=new Dn(null,void 0);return t&&Nn(i,t),e&&On(i,e),n&&Rn(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&St(t.V,(function(t,e){Mn(r,e,t)})),e=t.A,n=t.na,e&&n&&Mn(r,e,n),Mn(r,"VER",t.ha),Nr(t,r),r}function Hr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new lr(t.Na)).F=t.C,e}function Kr(){}function zr(){if(Pt&&!(10<=Number(Gt)))throw Error("Environmental error: no available transport.")}function Gr(t,e){be.call(this),this.a=new Ir(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!bt(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!bt(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Yr(this)}function Wr(t){sn.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Xr(){un.call(this),this.status=1}function Yr(t){this.a=t}(Z=lr.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?nn(this.H):nn(on),this.a.onreadystatechange=ht(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void gr(this,t)}t=n||"";var i=new Tn(this.headers);r&&In(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=vr,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=nt.FormData&&t instanceof nt.FormData,!(0<=vt(pr,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{wr(this),0<this.o&&((this.D=function(t){return Pt&&zt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=ht(this.xa,this)):this.m=Me(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){gr(this,t)}},Z.xa=function(){void 0!==et&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,we(this,"timeout"),this.abort(8))},Z.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,we(this,"complete"),we(this,"abort"),br(this))},Z.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),br(this,!0)),lr.X.G.call(this)},Z.za=function(){this.j||(this.A||this.l||this.g?yr(this):this.Ua())},Z.Ua=function(){yr(this)},Z.W=function(){try{return 2<_r(this)?this.a.status:-1}catch(t){return-1}},Z.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Z.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),hr(e)}},Z.ua=function(){return this.h},Z.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Z=Ir.prototype).ha=8,Z.v=1,Z.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new hn(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Dt(r=At(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Or(this,n,e),Mn(i=xn(this.B),"RID",t),Mn(i,"CVER",22),this.A&&Mn(i,"X-HTTP-Session-Id",this.A),Nr(this,i),this.i&&r&&Er(i,this.i,r),rr(this.b,n),this.Ia&&Mn(i,"TYPE","init"),this.da?(Mn(i,"$req",e),Mn(i,"SID","null"),n.U=!0,pn(n,i,null)):pn(n,i,e),this.v=2}}else 3==this.v&&(t?xr(this,t):0==this.g.length||tr(this.b)||xr(this))},Z.Aa=function(){if(this.j=null,Lr(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Je(ht(this.Ta,this),t)}},Z.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Qe(10),Sr(this),Lr(this))},Z.Sa=function(){null!=this.m&&(this.m=null,Sr(this),Pr(this),Qe(19))},Z.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Qe(2)):(this.c.info("Failed to ping google.com"),Qe(1))},(Z=Kr.prototype).ta=function(){},Z.sa=function(){},Z.ra=function(){},Z.qa=function(){},Z.Ja=function(){},zr.prototype.a=function(t,e){return new Gr(t,e)},dt(Gr,be),Gr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Qe(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=qr(t,null,t.fa),Dr(t)},Gr.prototype.close=function(){Tr(this.a)},Gr.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Cr(this.a,e)}else this.l?((e={}).__data__=Ee(t),Cr(this.a,e)):Cr(this.a,t)},Gr.prototype.G=function(){this.a.f=null,delete this.f,Tr(this.a),delete this.a,Gr.X.G.call(this)},dt(Wr,sn),dt(Xr,un),dt(Yr,Kr),Yr.prototype.ta=function(){we(this.a,"a")},Yr.prototype.sa=function(t){we(this.a,new Wr(t))},Yr.prototype.ra=function(t){we(this.a,new Xr(t))},Yr.prototype.qa=function(){we(this.a,"b")},zr.prototype.createWebChannel=zr.prototype.a,Gr.prototype.send=Gr.prototype.h,Gr.prototype.open=Gr.prototype.g,Gr.prototype.close=Gr.prototype.close,Ze.NO_ERROR=0,Ze.TIMEOUT=8,Ze.HTTP_ERROR=6,tn.COMPLETE="complete",rn.EventType=an,an.OPEN="a",an.CLOSE="b",an.ERROR="c",an.MESSAGE="d",be.prototype.listen=be.prototype.va,lr.prototype.listenOnce=lr.prototype.wa,lr.prototype.getLastError=lr.prototype.Qa,lr.prototype.getLastErrorCode=lr.prototype.ua,lr.prototype.getStatus=lr.prototype.W,lr.prototype.getResponseJson=lr.prototype.Pa,lr.prototype.getResponseText=lr.prototype.$,lr.prototype.send=lr.prototype.ba;var Qr=Ze,$r=tn,Jr=Ke,Zr=10,ti=11,ei=rn,ni=lr,ri=function(t,e){return(ri=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ii(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ri(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function oi(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function ai(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function si(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create,Object.create;var ui=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();ui.o=-1;var ci={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},hi=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return ii(e,t),e}(Error),li=new M("@firebase/firestore");function fi(){return li.logLevel}function di(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(li.logLevel<=C.DEBUG){var r=e.map(gi);li.debug.apply(li,si(["Firestore (8.3.2): "+t],r))}}function pi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(li.logLevel<=C.ERROR){var r=e.map(gi);li.error.apply(li,si(["Firestore (8.3.2): "+t],r))}}function vi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(li.logLevel<=C.WARN){var r=e.map(gi);li.warn.apply(li,si(["Firestore (8.3.2): "+t],r))}}function gi(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function mi(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.2) INTERNAL ASSERTION FAILED: "+t;throw pi(e),new Error(e)}function yi(t,e){t||mi()}function bi(t,e){return t}function wi(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var _i=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=wi(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Ei(t,e){return t<e?-1:t>e?1:0}function ki(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ii(t){return t+"\0"}var Ti=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new hi(ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new hi(ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new hi(ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new hi(ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Ei(this.nanoseconds,t.nanoseconds):Ei(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Si=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Ti(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Ai(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ci(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Di(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var xi=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&mi(),void 0===n?n=t.length-e:n>t.length-e&&mi(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ni=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new hi(ci.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(xi),Oi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ri=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Oi.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new hi(ci.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new hi(ci.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new hi(ci.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new hi(ci.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(xi),Pi=function(){function t(t){this.fields=t,t.sort(Ri.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return ki(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Mi=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Ei(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Mi.EMPTY_BYTE_STRING=new Mi("");var Li=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fi(t){if(yi(!!t),"string"==typeof t){var e=0,n=Li.exec(t);if(yi(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ui(t.seconds),nanos:Ui(t.nanos)}}function Ui(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Vi(t){return"string"==typeof t?Mi.fromBase64String(t):Mi.fromUint8Array(t)}function Bi(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ji(t){var e=t.mapValue.fields.__previous_value__;return Bi(e)?ji(e):e}function qi(t){var e=Fi(t.mapValue.fields.__local_write_time__.timestampValue);return new Ti(e.seconds,e.nanos)}function Hi(t){return null==t}function Ki(t){return 0===t&&1/t==-1/0}function zi(t){return"number"==typeof t&&Number.isInteger(t)&&!Ki(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Gi=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Ni.fromString(e))},t.fromName=function(e){return new t(Ni.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Ni.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Ni.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Ni(e.slice()))},t}();function Wi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bi(t)?4:10:mi()}function Xi(t,e){var n=Wi(t);if(n!==Wi(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qi(t).isEqual(qi(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Fi(t.timestampValue),r=Fi(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Vi(t.bytesValue).isEqual(Vi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ui(t.geoPointValue.latitude)===Ui(e.geoPointValue.latitude)&&Ui(t.geoPointValue.longitude)===Ui(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ui(t.integerValue)===Ui(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Ui(t.doubleValue),r=Ui(e.doubleValue);return n===r?Ki(n)===Ki(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return ki(t.arrayValue.values||[],e.arrayValue.values||[],Xi);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ai(n)!==Ai(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Xi(n[i],r[i])))return!1;return!0}(t,e);default:return mi()}}function Yi(t,e){return void 0!==(t.values||[]).find((function(t){return Xi(t,e)}))}function Qi(t,e){var n=Wi(t),r=Wi(e);if(n!==r)return Ei(n,r);switch(n){case 0:return 0;case 1:return Ei(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Ui(t.integerValue||t.doubleValue),r=Ui(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return $i(t.timestampValue,e.timestampValue);case 4:return $i(qi(t),qi(e));case 5:return Ei(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Vi(t),r=Vi(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ei(n[i],r[i]);if(0!==o)return o}return Ei(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Ei(Ui(t.latitude),Ui(e.latitude));return 0!==n?n:Ei(Ui(t.longitude),Ui(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Qi(n[i],r[i]);if(o)return o}return Ei(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Ei(r[a],o[a]);if(0!==s)return s;var u=Qi(n[r[a]],i[o[a]]);if(0!==u)return u}return Ei(r.length,o.length)}(t.mapValue,e.mapValue);default:throw mi()}}function $i(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ei(t,e);var n=Fi(t),r=Fi(e),i=Ei(n.seconds,r.seconds);return 0!==i?i:Ei(n.nanos,r.nanos)}function Ji(t){return Zi(t)}function Zi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Fi(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Vi(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Gi.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Zi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Zi(t.fields[o])}return e+"}"}(t.mapValue):mi();var e,n}function to(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function eo(t){return!!t&&"integerValue"in t}function no(t){return!!t&&"arrayValue"in t}function ro(t){return!!t&&"nullValue"in t}function io(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function oo(t){return!!t&&"mapValue"in t}var ao=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(Ri.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach((function(t,n){t?e.set(n,t):e.delete(n)}))},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return Xi(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Wi(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),a=oo(o)?Object.assign({},o.mapValue.fields):{};return n.forEach((function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(a[n]=o,i=!0)}else null!==t?(a[n]=t,i=!0):a.hasOwnProperty(n)&&(delete a[n],i=!0)})),i?{mapValue:{fields:a}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(Ri.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!oo(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function so(t){var e=[];return Ci(t.fields||{},(function(t,n){var r=new Ri([t]);if(oo(n)){var i=so(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new Pi(e)}var uo=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Si.min(),ao.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,ao.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,ao.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=ao.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=ao.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),co=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function ho(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new co(t,e,n,r,i,o,a)}function lo(t){var e=bi(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Ji(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),Hi(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=To(e.startAt)),e.endAt&&(n+="|ub:",n+=To(e.endAt)),e.h=n}return e.h}function fo(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ao(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Xi(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Do(t.startAt,e.startAt)&&Do(t.endAt,e.endAt)}function po(t){return Gi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var vo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return ii(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new go(t,n,r):"array-contains"===n?new wo(t,r):"in"===n?new _o(t,r):"not-in"===n?new Eo(t,r):"array-contains-any"===n?new ko(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new mo(t,n):new yo(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Qi(e,this.value)):null!==e&&Wi(this.value)===Wi(e)&&this.m(Qi(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return mi()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),go=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Gi.fromName(r.referenceValue),i}return ii(e,t),e.prototype.matches=function(t){var e=Gi.comparator(t.key,this.key);return this.m(e)},e}(vo),mo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=bo(0,n),r}return ii(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(vo),yo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=bo(0,n),r}return ii(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(vo);function bo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Gi.fromName(t.referenceValue)}))}var wo=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return ii(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return no(e)&&Yi(e.arrayValue,this.value)},e}(vo),_o=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return ii(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Yi(this.value.arrayValue,e)},e}(vo),Eo=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return ii(e,t),e.prototype.matches=function(t){if(Yi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Yi(this.value.arrayValue,e)},e}(vo),ko=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return ii(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!no(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Yi(e.value.arrayValue,t)}))},e}(vo),Io=function(t,e){this.position=t,this.before=e};function To(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ji(t)})).join(",")}var So=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ao(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Co(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?Gi.comparator(Gi.fromName(a.referenceValue),n.key):Qi(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Do(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Xi(t.position[n],e.position[n]))return!1;return!0}var xo=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function No(t,e,n,r,i,o,a,s){return new xo(t,e,n,r,i,o,a,s)}function Oo(t){return new xo(t)}function Ro(t){return!Hi(t.limit)&&"F"===t.limitType}function Po(t){return!Hi(t.limit)&&"L"===t.limitType}function Mo(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Lo(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Fo(t){return null!==t.collectionGroup}function Uo(t){var e=bi(t);if(null===e.p){e.p=[];var n=Lo(e),r=Mo(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new So(n)),e.p.push(new So(Ri.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new So(Ri.keyField(),u))}}}return e.p}function Vo(t){var e=bi(t);if(!e.T)if("F"===e.limitType)e.T=ho(e.path,e.collectionGroup,Uo(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Uo(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new So(o.field,a))}var s=e.endAt?new Io(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Io(e.startAt.position,!e.startAt.before):null;e.T=ho(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function Bo(t,e,n){return new xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jo(t,e){return fo(Vo(t),Vo(e))&&t.limitType===e.limitType}function qo(t){return lo(Vo(t))+"|lt:"+t.limitType}function Ho(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Ji(e.value);var e})).join(", ")+"]"),Hi(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+To(t.startAt)),t.endAt&&(e+=", endAt: "+To(t.endAt)),"Target("+e+")"}(Vo(t))+"; limitType="+t.limitType+")"}function Ko(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Gi.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Co(t.startAt,Uo(t),e)||t.endAt&&Co(t.endAt,Uo(t),e))}(t,e)}function zo(t){return function(e,n){for(var r=!1,i=0,o=Uo(t);i<o.length;i++){var a=o[i],s=Go(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function Go(t,e,n){var r=t.field.isKeyField()?Gi.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Qi(r,i):mi()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return mi()}}function Wo(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ki(e)?"-0":e}}function Xo(t){return{integerValue:""+t}}function Yo(t,e){return zi(e)?Xo(e):Wo(t,e)}var Qo=function(){this._=void 0};function $o(t,e,n){return t instanceof ta?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ea?na(t,e):t instanceof ra?ia(t,e):function(t,e){var n=Zo(t,e),r=aa(n)+aa(t.A);return eo(n)&&eo(t.A)?Xo(r):Wo(t.R,r)}(t,e)}function Jo(t,e,n){return t instanceof ea?na(t,e):t instanceof ra?ia(t,e):n}function Zo(t,e){return t instanceof oa?eo(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var ta=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e}(Qo),ea=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return ii(e,t),e}(Qo);function na(t,e){for(var n=sa(e),r=function(t){n.some((function(e){return Xi(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ra=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return ii(e,t),e}(Qo);function ia(t,e){for(var n=sa(e),r=function(t){n=n.filter((function(e){return!Xi(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var oa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return ii(e,t),e}(Qo);function aa(t){return Ui(t.integerValue||t.doubleValue)}function sa(t){return no(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ua=function(t,e){this.field=t,this.transform=e},ca=function(t,e){this.version=t,this.transformResults=e},ha=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function la(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var fa=function(){};function da(t,e,n){t instanceof ya?function(t,e,n){var r=t.value.clone(),i=_a(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ba?function(t,e,n){if(la(t.precondition,e)){var r=_a(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(wa(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function pa(t,e,n){t instanceof ya?function(t,e,n){if(la(t.precondition,e)){var r=t.value.clone(),i=Ea(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(ma(e),r).setHasLocalMutations()}}(t,e,n):t instanceof ba?function(t,e,n){if(la(t.precondition,e)){var r=Ea(t.fieldTransforms,n,e),i=e.data;i.setAll(wa(t)),i.setAll(r),e.convertToFoundDocument(ma(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){la(t.precondition,e)&&e.convertToNoDocument(Si.min())}(t,e)}function va(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=Zo(o.transform,a||null);null!=s&&(null==n&&(n=ao.empty()),n.set(o.field,s))}return n||null}function ga(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&ki(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ea&&e instanceof ea||t instanceof ra&&e instanceof ra?ki(t.elements,e.elements,Xi):t instanceof oa&&e instanceof oa?Xi(t.A,e.A):t instanceof ta&&e instanceof ta}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function ma(t){return t.isFoundDocument()?t.version:Si.min()}var ya=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return ii(e,t),e}(fa),ba=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return ii(e,t),e}(fa);function wa(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function _a(t,e,n){var r=new Map;yi(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,Jo(a,s,n[i]))}return r}function Ea(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,$o(s,u,e))}return r}var ka,Ia,Ta=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return ii(e,t),e}(fa),Sa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return ii(e,t),e}(fa),Aa=function(t){this.count=t};function Ca(t){switch(t){case ci.OK:return mi();case ci.CANCELLED:case ci.UNKNOWN:case ci.DEADLINE_EXCEEDED:case ci.RESOURCE_EXHAUSTED:case ci.INTERNAL:case ci.UNAVAILABLE:case ci.UNAUTHENTICATED:return!1;case ci.INVALID_ARGUMENT:case ci.NOT_FOUND:case ci.ALREADY_EXISTS:case ci.PERMISSION_DENIED:case ci.FAILED_PRECONDITION:case ci.ABORTED:case ci.OUT_OF_RANGE:case ci.UNIMPLEMENTED:case ci.DATA_LOSS:return!0;default:return mi()}}function Da(t){if(void 0===t)return pi("GRPC error has no .code"),ci.UNKNOWN;switch(t){case ka.OK:return ci.OK;case ka.CANCELLED:return ci.CANCELLED;case ka.UNKNOWN:return ci.UNKNOWN;case ka.DEADLINE_EXCEEDED:return ci.DEADLINE_EXCEEDED;case ka.RESOURCE_EXHAUSTED:return ci.RESOURCE_EXHAUSTED;case ka.INTERNAL:return ci.INTERNAL;case ka.UNAVAILABLE:return ci.UNAVAILABLE;case ka.UNAUTHENTICATED:return ci.UNAUTHENTICATED;case ka.INVALID_ARGUMENT:return ci.INVALID_ARGUMENT;case ka.NOT_FOUND:return ci.NOT_FOUND;case ka.ALREADY_EXISTS:return ci.ALREADY_EXISTS;case ka.PERMISSION_DENIED:return ci.PERMISSION_DENIED;case ka.FAILED_PRECONDITION:return ci.FAILED_PRECONDITION;case ka.ABORTED:return ci.ABORTED;case ka.OUT_OF_RANGE:return ci.OUT_OF_RANGE;case ka.UNIMPLEMENTED:return ci.UNIMPLEMENTED;case ka.DATA_LOSS:return ci.DATA_LOSS;default:return mi()}}(Ia=ka||(ka={}))[Ia.OK=0]="OK",Ia[Ia.CANCELLED=1]="CANCELLED",Ia[Ia.UNKNOWN=2]="UNKNOWN",Ia[Ia.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ia[Ia.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ia[Ia.NOT_FOUND=5]="NOT_FOUND",Ia[Ia.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ia[Ia.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ia[Ia.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ia[Ia.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ia[Ia.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ia[Ia.ABORTED=10]="ABORTED",Ia[Ia.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ia[Ia.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ia[Ia.INTERNAL=13]="INTERNAL",Ia[Ia.UNAVAILABLE=14]="UNAVAILABLE",Ia[Ia.DATA_LOSS=15]="DATA_LOSS";var xa=function(){function t(t,e){this.comparator=t,this.root=e||Oa.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Oa.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Oa.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Na(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Na(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Na(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Na(this.root,t,this.comparator,!0)},t}(),Na=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Oa=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw mi();if(this.right.isRed())throw mi();var t=this.left.check();if(t!==this.right.check())throw mi();return t+(this.isRed()?0:1)},t}();Oa.EMPTY=null,Oa.RED=!0,Oa.BLACK=!1,Oa.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw mi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw mi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw mi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw mi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw mi()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Oa(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Ra=function(){function t(t){this.comparator=t,this.data=new xa(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Pa(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Pa(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Pa=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Ma=new xa(Gi.comparator);function La(){return Ma}var Fa=new xa(Gi.comparator);function Ua(){return Fa}var Va=new xa(Gi.comparator);function Ba(){return Va}var ja=new Ra(Gi.comparator);function qa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ja,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ha=new Ra(Ei);function Ka(){return Ha}var za=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Ga.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Si.min(),r,Ka(),La(),qa())},t}(),Ga=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Mi.EMPTY_BYTE_STRING,n,qa(),qa(),qa())},t}(),Wa=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Xa=function(t,e){this.targetId=t,this.V=e},Ya=function(t,e,n,r){void 0===n&&(n=Mi.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Qa=function(){function t(){this.S=0,this.D=Za(),this.C=Mi.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=qa(),e=qa(),n=qa();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:mi()}})),new Ga(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Za()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),$a=function(){function t(t){this.W=t,this.G=new Map,this.H=La(),this.J=Ja(),this.Y=new Ra(Ei)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:mi()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(po(i))if(0===n){var o=new Gi(i.path);this.tt(e,o,uo.newNoDocument(o,Si.min()))}else yi(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&po(o.target)){var a=new Gi(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,uo.newNoDocument(a,t))}r.O&&(n.set(i,r.M()),r.L())}}));var r=qa();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new za(t,n,this.Y,this.H,r);return this.H=La(),this.J=Ja(),this.Y=new Ra(Ei),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Qa,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Ra(Ei),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||di("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Qa),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Ja(){return new xa(Gi.comparator)}function Za(){return new xa(Gi.comparator)}var ts={asc:"ASCENDING",desc:"DESCENDING"},es={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ns=function(t,e){this.databaseId=t,this.I=e};function rs(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function is(t,e){return t.I?e.toBase64():e.toUint8Array()}function os(t,e){return rs(t,e.toTimestamp())}function as(t){return yi(!!t),Si.fromTimestamp(function(t){var e=Fi(t);return new Ti(e.seconds,e.nanos)}(t))}function ss(t,e){return function(t){return new Ni(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function us(t){var e=Ni.fromString(t);return yi(Os(e)),e}function cs(t,e){return ss(t.databaseId,e.path)}function hs(t,e){var n=us(e);if(n.get(1)!==t.databaseId.projectId)throw new hi(ci.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new hi(ci.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Gi(ps(n))}function ls(t,e){return ss(t.databaseId,e)}function fs(t){var e=us(t);return 4===e.length?Ni.emptyPath():ps(e)}function ds(t){return new Ni(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ps(t){return yi(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function vs(t,e,n){return{name:cs(t,e),fields:n.toProto().mapValue.fields}}function gs(t,e,n){var r=hs(t,e.name),i=as(e.updateTime),o=new ao({mapValue:{fields:e.fields}}),a=uo.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function ms(t,e){var n;if(e instanceof ya)n={update:vs(t,e.key,e.value)};else if(e instanceof Ta)n={delete:cs(t,e.key)};else if(e instanceof ba)n={update:vs(t,e.key,e.data),updateMask:Ns(e.fieldMask)};else{if(!(e instanceof Sa))return mi();n={verify:cs(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof ta)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ea)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ra)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof oa)return{fieldPath:e.field.canonicalString(),increment:n.A};throw mi()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:os(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:mi()}(t,e.precondition)),n}function ys(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?ha.updateTime(as(t.updateTime)):void 0!==t.exists?ha.exists(t.exists):ha.none()}(e.currentDocument):ha.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)yi("REQUEST_TIME"===e.setToServerValue),n=new ta;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ea(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new ra(i)}else"increment"in e?n=new oa(t,e.increment):mi();var o=Ri.fromServerFormat(e.fieldPath);return new ua(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=hs(t,e.update.name),o=new ao({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new Pi(e.map((function(t){return Ri.fromServerFormat(t)})))}(e.updateMask);return new ba(i,o,a,n,r)}return new ya(i,o,n,r)}if(e.delete){var s=hs(t,e.delete);return new Ta(s,n)}if(e.verify){var u=hs(t,e.verify);return new Sa(u,n)}return mi()}function bs(t,e){return{documents:[ls(t,e.path)]}}function ws(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=ls(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ls(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(io(t.value))return{unaryFilter:{field:As(t.field),op:"IS_NAN"}};if(ro(t.value))return{unaryFilter:{field:As(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(io(t.value))return{unaryFilter:{field:As(t.field),op:"IS_NOT_NAN"}};if(ro(t.value))return{unaryFilter:{field:As(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:As(t.field),op:Ss(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:As(t.field),direction:Ts(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||Hi(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=ks(e.startAt)),e.endAt&&(n.structuredQuery.endAt=ks(e.endAt)),n}function _s(t){var e=fs(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){yi(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=Es(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new So(Cs(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Hi(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Is(n.startAt));var h=null;return n.endAt&&(h=Is(n.endAt)),No(e,i,s,a,u,"F",c,h)}function Es(t){return t?void 0!==t.unaryFilter?[xs(t)]:void 0!==t.fieldFilter?[Ds(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Es(t)})).reduce((function(t,e){return t.concat(e)})):mi():[]}function ks(t){return{before:t.before,values:t.position}}function Is(t){var e=!!t.before,n=t.values||[];return new Io(n,e)}function Ts(t){return ts[t]}function Ss(t){return es[t]}function As(t){return{fieldPath:t.canonicalString()}}function Cs(t){return Ri.fromServerFormat(t.fieldPath)}function Ds(t){return vo.create(Cs(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return mi()}}(t.fieldFilter.op),t.fieldFilter.value)}function xs(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Cs(t.unaryFilter.field);return vo.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Cs(t.unaryFilter.field);return vo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Cs(t.unaryFilter.field);return vo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Cs(t.unaryFilter.field);return vo.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return mi()}}function Ns(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Os(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Rs(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ms(e)),e=Ps(t.get(n),e);return Ms(e)}function Ps(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Ms(t){return t+""}function Ls(t){var e=t.length;if(yi(e>=2),2===e)return yi(""===t.charAt(0)&&""===t.charAt(1)),Ni.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&mi(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:mi()}o=a+2}return new Ni(r)}var Fs=function(t,e){this.seconds=t,this.nanoseconds=e},Us=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Us.store="owner",Us.key="owner";var Vs=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Vs.store="mutationQueues",Vs.keyPath="userId";var Bs=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Bs.store="mutations",Bs.keyPath="batchId",Bs.userMutationsIndex="userMutationsIndex",Bs.userMutationsKeyPath=["userId","batchId"];var js=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Rs(e)]},t.key=function(t,e,n){return[t,Rs(e),n]},t}();js.store="documentMutations",js.PLACEHOLDER=new js;var qs=function(t,e){this.path=t,this.readTime=e},Hs=function(t,e){this.path=t,this.version=e},Ks=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Ks.store="remoteDocuments",Ks.readTimeIndex="readTimeIndex",Ks.readTimeIndexPath="readTime",Ks.collectionReadTimeIndex="collectionReadTimeIndex",Ks.collectionReadTimeIndexPath=["parentPath","readTime"];var zs=function(t){this.byteSize=t};zs.store="remoteDocumentGlobal",zs.key="remoteDocumentGlobalKey";var Gs=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Gs.store="targets",Gs.keyPath="targetId",Gs.queryTargetsIndexName="queryTargetsIndex",Gs.queryTargetsKeyPath=["canonicalId","targetId"];var Ws=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Ws.store="targetDocuments",Ws.keyPath=["targetId","path"],Ws.documentTargetsIndex="documentTargetsIndex",Ws.documentTargetsKeyPath=["path","targetId"];var Xs=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Xs.key="targetGlobalKey",Xs.store="targetGlobal";var Ys=function(t,e){this.collectionId=t,this.parent=e};Ys.store="collectionParents",Ys.keyPath=["collectionId","parent"];var Qs=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Qs.store="clientMetadata",Qs.keyPath="clientId";var $s=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};$s.store="bundles",$s.keyPath="bundleId";var Js=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Js.store="namedQueries",Js.keyPath="name";var Zs=si(si([],si(si([],si(si([],si(si([],[Vs.store,Bs.store,js.store,Ks.store,Gs.store,Us.store,Xs.store,Ws.store]),[Qs.store])),[zs.store])),[Ys.store])),[$s.store,Js.store]),tu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",eu=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),nu=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},ru=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&mi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),iu=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new nu,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new su(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=fu(e.target.error);n.ft.reject(new su(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new su(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(di("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new cu(e)},t}(),ou=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(u())&&pi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return di("SimpleDb","Removing database:",t),hu(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=u(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return oi(this,void 0,void 0,(function(){var e,n=this;return ai(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(di("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new su(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new hi(ci.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new su(t,n))},i.onupgradeneeded=function(t){di("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){di("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return oi(this,void 0,void 0,(function(){var i,o,a,s,u;return ai(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,h;return ai(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,s.At(t)];case 2:return s.db=l.sent(),e=iu.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),ru.reject(t)})).toPromise(),u={},a.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(l.sent(),a),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,di("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),s.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),au=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return hu(this.Pt.delete())},t}(),su=function(t){function e(e,n){var r=this;return(r=t.call(this,ci.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return ii(e,t),e}(hi);function uu(t){return"IndexedDbTransactionError"===t.name}var cu=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(di("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(di("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),hu(n)},t.prototype.add=function(t){return di("SimpleDb","ADD",this.store.name,t,t),hu(this.store.add(t))},t.prototype.get=function(t){var e=this;return hu(this.store.get(t)).next((function(n){return void 0===n&&(n=null),di("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return di("SimpleDb","DELETE",this.store.name,t),hu(this.store.delete(t))},t.prototype.count=function(){return di("SimpleDb","COUNT",this.store.name),hu(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){di("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new ru((function(n,r){e.onerror=function(t){var e=fu(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new ru((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new au(i),a=e(i.primaryKey,i.value,o);if(a instanceof ru){var s=a.catch((function(t){return o.done(),ru.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return ru.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function hu(t){return new ru((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=fu(t.target.error);n(e)}}))}var lu=!1;function fu(t){var e=ou._t(u());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new hi("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return lu||(lu=!0,setTimeout((function(){throw r}),0)),r}}return t}var du=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return ii(e,t),e}(eu);function pu(t,e){var n=bi(t);return ou.It(n.Mt,e)}var vu=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&da(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&pa(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&pa(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Si.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),qa())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&ki(this.mutations,t.mutations,(function(t,e){return ga(t,e)}))&&ki(this.baseMutations,t.baseMutations,(function(t,e){return ga(t,e)}))},t}(),gu=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){yi(e.mutations.length===r.length);for(var i=Ba(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),mu=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=Si.min()),void 0===o&&(o=Si.min()),void 0===a&&(a=Mi.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),yu=function(t){this.Lt=t};function bu(t,e){if(e.document)return gs(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Gi.fromSegments(e.noDocument.path),r=Iu(e.noDocument.readTime),i=uo.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Gi.fromSegments(e.unknownDocument.path);return r=Iu(e.unknownDocument.version),uo.newUnknownDocument(o,r)}return mi()}function wu(t,e,n){var r=_u(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:cs(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:rs(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new Ks(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=ku(e.version);return a=e.hasCommittedMutations,new Ks(null,new qs(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=ku(e.version);return new Ks(new Hs(c,h),null,null,!0,r,i)}return mi()}function _u(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Eu(t){var e=new Ti(t[0],t[1]);return Si.fromTimestamp(e)}function ku(t){var e=t.toTimestamp();return new Fs(e.seconds,e.nanoseconds)}function Iu(t){var e=new Ti(t.seconds,t.nanoseconds);return Si.fromTimestamp(e)}function Tu(t,e){for(var n=(e.baseMutations||[]).map((function(e){return ys(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return ys(t.Lt,e)})),s=Ti.fromMillis(e.localWriteTimeMs);return new vu(e.batchId,s,n,a)}function Su(t){var e,n,r=Iu(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Iu(t.lastLimboFreeSnapshotVersion):Si.min();return void 0!==t.query.documents?(yi(1===(n=t.query).documents.length),e=Vo(Oo(fs(n.documents[0])))):e=function(t){return Vo(_s(t))}(t.query),new mu(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Mi.fromBase64String(t.resumeToken))}function Au(t,e){var n,r=ku(e.snapshotVersion),i=ku(e.lastLimboFreeSnapshotVersion);n=po(e.target)?bs(t.Lt,e.target):ws(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Gs(e.targetId,lo(e.target),r,o,e.sequenceNumber,i,n)}function Cu(t){var e=_s({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Bo(e,e.limit,"L"):e}var Du=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return xu(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Iu(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return xu(t).put({bundleId:(n=e).id,createTime:ku(as(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Nu(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Cu(e.bundledQuery),readTime:Iu(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Nu(t).put(function(t){return{name:t.name,readTime:ku(as(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function xu(t){return pu(t,$s.store)}function Nu(t){return pu(t,Js.store)}var Ou=function(){function t(){this.Bt=new Ru}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),ru.resolve()},t.prototype.getCollectionParents=function(t,e){return ru.resolve(this.Bt.getEntries(e))},t}(),Ru=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ra(Ni.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ra(Ni.comparator)).toArray()},t}(),Pu=function(){function t(){this.qt=new Ru}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Rs(i)};return Mu(t).put(o)}return ru.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ii(e),""],!1,!0);return Mu(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Ls(o.parent))}return n}))},t}();function Mu(t){return pu(t,Ys.store)}var Lu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fu=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Uu(t,e,n){var r=t.store(Bs.store),i=t.store(js.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.Ot({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){yi(1===s)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],d=js.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return ru.waitFor(o).next((function(){return c}))}function Vu(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw mi();e=t.noDocument}return JSON.stringify(e).length}Fu.DEFAULT_COLLECTION_PERCENTILE=10,Fu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fu.DEFAULT=new Fu(41943040,Fu.DEFAULT_COLLECTION_PERCENTILE,Fu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fu.DISABLED=new Fu(-1,0,0);var Bu=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return yi(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qu(t).Ot({index:Bs.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Hu(t),a=qu(t);return a.add({}).next((function(s){yi("number"==typeof s);for(var u=new vu(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return ms(t.Lt,e)})),i=n.mutations.map((function(e){return ms(t.Lt,e)}));return new Bs(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new Ra((function(t,e){return Ei(t.canonicalString(),e.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],v=js.key(i.userId,p.key.path,s);l=l.add(p.key.path.popLast()),h.push(a.put(c)),h.push(o.put(v,js.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[s]=u.keys()})),ru.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return qu(t).get(e).next((function(t){return t?(yi(t.userId===n.userId),Tu(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?ru.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return qu(t).Ot({index:Bs.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(yi(e.batchId>=r),o=Tu(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return qu(t).Ot({index:Bs.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qu(t).Nt(Bs.userMutationsIndex,n).next((function(t){return t.map((function(t){return Tu(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=js.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Hu(t).Ot({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],h=Ls(u);if(s===n.userId&&e.path.isEqual(h))return qu(t).get(c).next((function(t){if(!t)throw mi();yi(t.userId===n.userId),o.push(Tu(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ra(Ei),i=[];return e.forEach((function(e){var o=js.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Hu(t).Ot({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=Ls(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),ru.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=js.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Ra(Ei);return Hu(t).Ot({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],h=Ls(u);a===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(qu(t).get(e).next((function(t){if(null===t)throw mi();yi(t.userId===n.userId),r.push(Tu(n.R,t))})))})),ru.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Uu(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),ru.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return ru.resolve();var r=IDBKeyRange.lowerBound(js.prefixForUser(e.userId)),i=[];return Hu(t).Ot({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Ls(t[1]);i.push(o)}else r.done()})).next((function(){yi(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return ju(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Ku(t).get(this.userId).next((function(t){return t||new Vs(e.userId,-1,"")}))},t}();function ju(t,e,n){var r=js.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Hu(t).Ot({range:o,kt:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function qu(t){return pu(t,Bs.store)}function Hu(t){return pu(t,js.store)}function Ku(t){return pu(t,Vs.store)}var zu=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Gu=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new zu(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Si.fromTimestamp(new Ti(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Wu(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return yi(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Wu(t).Ot((function(a,s){var u=Su(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return ru.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Wu(t).Ot((function(t,n){var r=Su(n);e(r)}))},t.prototype.Xt=function(t){return Xu(t).get(Xs.key).next((function(t){return yi(null!==t),t}))},t.prototype.Zt=function(t,e){return Xu(t).put(Xs.key,e)},t.prototype.te=function(t,e){return Wu(t).put(Au(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=lo(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Wu(t).Ot({range:r,index:Gs.queryTargetsIndexName},(function(t,n,r){var o=Su(n);fo(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Yu(t);return e.forEach((function(e){var a=Rs(e.path);i.push(o.put(new Ws(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),ru.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Yu(t);return ru.forEach(e,(function(e){var o=Rs(e.path);return ru.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Yu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Yu(t),i=qa();return r.Ot({range:n,kt:!0},(function(t,e,n){var r=Ls(t[1]),o=new Gi(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Rs(e.path),r=IDBKeyRange.bound([n],[Ii(n)],!1,!0),i=0;return Yu(t).Ot({index:Ws.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Wu(t).get(e).next((function(t){return t?Su(t):null}))},t}();function Wu(t){return pu(t,Gs.store)}function Xu(t){return pu(t,Xs.store)}function Yu(t){return pu(t,Ws.store)}function Qu(t){return oi(this,void 0,void 0,(function(){return ai(this,(function(e){if(t.code!==ci.FAILED_PRECONDITION||t.message!==tu)throw t;return di("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function $u(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Ei(n,i);return 0===a?Ei(r,o):a}var Ju=function(){function t(t){this.ne=t,this.buffer=new Ra($u),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();$u(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Zu=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;di("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return oi(e,void 0,void 0,(function(){var e;return ai(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return uu(e=n.sent())?(di("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Qu(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),tc=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return ru.resolve(ui.o);var r=new Ju(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(di("LruGarbageCollector","Garbage collection skipped; disabled"),ru.resolve(Lu)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(di("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Lu):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(di("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),fi()<=C.DEBUG&&di("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-h)+"ms"),ru.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),ec=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new tc(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return nc(t,n)},t.prototype.removeReference=function(t,e,n){return nc(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return nc(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Ku(t).$t((function(r){return ju(t,r,e).next((function(t){return t&&(n=!0),ru.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),Yu(t).delete([0,Rs(a.path)])}))}));i.push(u)}})).next((function(){return ru.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return nc(t,e)},t.prototype.we=function(t,e){var n,r=Yu(t),i=ui.o;return r.Ot({index:Ws.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==ui.o&&e(new Gi(Ls(n)),i),i=s,n=a):i=ui.o})).next((function(){i!==ui.o&&e(new Gi(Ls(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function nc(t,e){return Yu(t).put(function(t,e){return new Ws(0,Rs(t.path),e)}(e,t.currentSequenceNumber))}var rc=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Ci(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return Di(this.inner)},t}(),ic=function(){function t(){this.changes=new rc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Si.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:uo.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?ru.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),oc=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return uc(t).put(cc(e),n)},t.prototype.removeEntry=function(t,e){var n=uc(t),r=cc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return uc(t).get(cc(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return uc(t).get(cc(e)).next((function(t){return{document:n.ye(e,t),size:Vu(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=La();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=La(),i=new xa(Gi.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Vu(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return ru.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return uc(t).Ot({range:r},(function(t,e,r){for(var a=Gi.fromSegments(t);o&&Gi.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=La(),o=e.path.length+1,a={};if(n.isEqual(Si.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=_u(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Ks.collectionReadTimeIndex}return uc(t).Ot(a,(function(t,n,a){if(t.length===o){var s=bu(r.R,n);e.path.isPrefixOf(s.key.path)?Ko(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new ac(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return sc(t).get(zs.key).next((function(t){return yi(!!t),t}))},t.prototype.me=function(t,e){return sc(t).put(zs.key,e)},t.prototype.ye=function(t,e){if(e){var n=bu(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Si.min()))return n}return uo.newInvalidDocument(t)},t}(),ac=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new rc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return ii(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Ra((function(t,e){return Ei(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=wu(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Vu(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var h=wu(e.Ie.R,uo.newNoDocument(o,Si.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),ru.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(ic);function sc(t){return pu(t,zs.store)}function uc(t){return pu(t,Ks.store)}function cc(t){return t.path.toArray()}var hc=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;yi(n<r&&n>=0&&r<=11);var o=new iu("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Us.store)}(t),function(t){t.createObjectStore(Vs.store,{keyPath:Vs.keyPath}),t.createObjectStore(Bs.store,{keyPath:Bs.keyPath,autoIncrement:!0}).createIndex(Bs.userMutationsIndex,Bs.userMutationsKeyPath,{unique:!0}),t.createObjectStore(js.store)}(t),lc(t),function(t){t.createObjectStore(Ks.store)}(t));var a=ru.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ws.store),t.deleteObjectStore(Gs.store),t.deleteObjectStore(Xs.store)}(t),lc(t)),a=a.next((function(){return function(t){var e=t.store(Xs.store),n=new Xs(0,0,Si.min().toTimestamp(),0);return e.put(Xs.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(Bs.store).Nt().next((function(n){t.deleteObjectStore(Bs.store),t.createObjectStore(Bs.store,{keyPath:Bs.keyPath,autoIncrement:!0}).createIndex(Bs.userMutationsIndex,Bs.userMutationsKeyPath,{unique:!0});var r=e.store(Bs.store),i=n.map((function(t){return r.put(t)}));return ru.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(Qs.store,{keyPath:Qs.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(zs.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Ks.store);e.createIndex(Ks.readTimeIndex,Ks.readTimeIndexPath,{unique:!1}),e.createIndex(Ks.collectionReadTimeIndex,Ks.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore($s.store,{keyPath:$s.keyPath})}(t),function(t){t.createObjectStore(Js.store,{keyPath:Js.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(Ks.store).Ot((function(t,n){e+=Vu(n)})).next((function(){var n=new zs(e);return t.store(zs.store).put(zs.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Vs.store),r=t.store(Bs.store);return n.Nt().next((function(n){return ru.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Bs.userMutationsIndex,i).next((function(r){return ru.forEach(r,(function(r){yi(r.userId===n.userId);var i=Tu(e.R,r);return Uu(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Ws.store),n=t.store(Ks.store);return t.store(Xs.store).get(Xs.key).next((function(t){var r=[];return n.Ot((function(n,i){var o=new Ni(n),a=function(t){return[0,Rs(t)]}(o);r.push(e.get(a).next((function(n){return n?ru.resolve():function(n){return e.put(new Ws(0,Rs(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return ru.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Ys.store,{keyPath:Ys.keyPath});var n=e.store(Ys.store),r=new Ru,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Rs(i)})}};return e.store(Ks.store).Ot({kt:!0},(function(t,e){var n=new Ni(t);return i(n.popLast())})).next((function(){return e.store(js.store).Ot({kt:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Ls(n));return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Gs.store);return n.Ot((function(t,r){var i=Su(r),o=Au(e.R,i);return n.put(o)}))},t}();function lc(t){t.createObjectStore(Ws.store,{keyPath:Ws.keyPath}).createIndex(Ws.documentTargetsIndex,Ws.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Gs.store,{keyPath:Gs.keyPath}).createIndex(Gs.queryTargetsIndexName,Gs.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Xs.store)}var fc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",dc=function(){function t(e,n,r,i,o,a,s,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new hi(ci.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ec(this,i),this.Le=n+"main",this.R=new yu(u),this.Be=new ou(this.Le,11,new hc(this.R)),this.qe=new Gu(this.referenceDelegate,this.R),this.Ut=new Pu,this.Ue=function(t,e){return new oc(t,e)}(this.R,this.Ut),this.Qe=new Du,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===h&&pi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new hi(ci.FAILED_PRECONDITION,fc);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new ui(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return oi(e,void 0,void 0,(function(){return ai(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return oi(e,void 0,void 0,(function(){return ai(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return oi(e,void 0,void 0,(function(){return ai(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return vc(e).put(new Qs(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(uu(e))return di("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return di("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return pc(t).get(Us.key).next((function(t){return ru.resolve(e.tn(t))}))},t.prototype.en=function(t){return vc(t).delete(this.clientId)},t.prototype.nn=function(){return oi(this,void 0,void 0,(function(){var t,e,n,r,i=this;return ai(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=pu(t,Qs.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return ru.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)r=n[e],this.Ke.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?ru.resolve(!0):pc(t).get(Us.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new hi(ci.FAILED_PRECONDITION,fc);return!1}}return!(!e.networkEnabled||!e.inForeground)||vc(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&di("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return oi(this,void 0,void 0,(function(){var t=this;return ai(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Us.store,Qs.store],(function(e){var n=new du(e,ui.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return vc(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Bu.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;di("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Zs,(function(o){return i=new du(o,r.Ne?r.Ne.next():ui.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw pi("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new hi(ci.FAILED_PRECONDITION,tu);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return pc(t).get(Us.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new hi(ci.FAILED_PRECONDITION,fc)}))},t.prototype.Ze=function(t){var e=new Us(this.clientId,this.allowTabSynchronization,Date.now());return pc(t).put(Us.key,e)},t.yt=function(){return ou.yt()},t.prototype.Xe=function(t){var e=this,n=pc(t);return n.get(Us.key).next((function(t){return e.tn(t)?(di("IndexedDbPersistence","Releasing primary lease."),n.delete(Us.key)):ru.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(pi("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return di("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return pi("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){pi("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function pc(t){return pu(t,Us.store)}function vc(t){return pu(t,Qs.store)}function gc(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var mc=function(t,e){this.progress=t,this.wn=e},yc=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Gi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Fo(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Gi(e)).next((function(t){var e=Ua();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Ua();return this.Ut.getCollectionParents(t,i).next((function(a){return ru.forEach(a,(function(a){var s=function(t,e){return new xo(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,h=r.get(c);null==h&&(h=uo.newInvalidDocument(c),r=r.insert(c,h)),pa(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Ko(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=qa(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof ba&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),bc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=qa(),i=qa(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),wc=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Si.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(Ro(e)||Po(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(fi()<=C.DEBUG&&di("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ho(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Ra(zo(t));return e.forEach((function(e,r){Ko(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return fi()<=C.DEBUG&&di("QueryEngine","Using full collection scan to execute query:",Ho(e)),this.Sn.getDocumentsMatchingQuery(t,e,Si.min())},t}(),_c=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new xa(Ei),this.kn=new rc((function(t){return lo(t)}),fo),this.On=Si.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new yc(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();function Ec(t,e,n,r){return new _c(t,e,n,r)}function kc(t,e){return oi(this,void 0,void 0,(function(){var n,r,i,o;return ai(this,(function(a){switch(a.label){case 0:return n=bi(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new yc(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=qa(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){var v=p[d];r.push(v.batchId);for(var g=0,m=v.mutations;g<m.length;g++){var y=m[g];a=a.add(y.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Ic(t,e){var n=bi(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=ru.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);yi(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Tc(t){var e=bi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Sc(t,e){var n=bi(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return yi(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=La();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Ac(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(Si.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return ru.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.Fn=i,t}))}function Ac(t,e,n,r,i){var o=qa();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=La();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Si.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):di("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Cc(t,e){var n=bi(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Dc(t,e){var n=bi(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,ru.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new mu(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function xc(t,e,n){return oi(this,void 0,void 0,(function(){var r,i,o,a;return ai(this,(function(s){switch(s.label){case 0:r=bi(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!uu(a=s.sent()))throw a;return di("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function Nc(t,e,n){var r=bi(t),i=Si.min(),o=qa();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=bi(t),i=r.kn.get(n);return void 0!==i?ru.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Vo(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Si.min(),n?o:qa())})).next((function(t){return{documents:t,Bn:o}}))}))}function Oc(t,e){var n=bi(t),r=bi(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Rc(t){var e=bi(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=bi(t),i=La(),o=_u(n),a=uc(e),s=IDBKeyRange.lowerBound(o,!0);return a.Ot({index:Ks.readTimeIndex,range:s},(function(t,e){var n=bu(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Eu(o)}}))}(e.$n,t,e.On)})).then((function(t){var n=t.wn,r=t.readTime;return e.On=r,n}))}function Pc(t){return oi(this,void 0,void 0,(function(){var e;return ai(this,(function(n){return[2,(e=bi(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=uc(t),n=Si.min();return e.Ot({index:Ks.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Eu(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.On=t}))]}))}))}function Mc(t,e,n,r){return oi(this,void 0,void 0,(function(){var i,o,a,s,u,c,h,l,f,d;return ai(this,(function(p){switch(p.label){case 0:for(i=bi(t),o=qa(),a=La(),s=Ba(),u=0,c=n;u<c.length;u++)h=c[u],l=e.qn(h.metadata.name),h.document&&(o=o.add(l)),a=a.insert(l,e.Un(h)),s=s.insert(l,e.Qn(h.metadata.readTime));return f=i.$n.newChangeBuffer({trackRemovals:!0}),[4,Dc(i,function(t){return Vo(Oo(Ni.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Ac(t,f,a,Si.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.qe.addMatchingKeys(t,o,d.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function Lc(t,e,n){return void 0===n&&(n=qa()),oi(this,void 0,void 0,(function(){var r,i;return ai(this,(function(o){switch(o.label){case 0:return[4,Dc(t,Vo(Cu(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=bi(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=as(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var a=r.withResumeToken(Mi.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Qe.saveNamedQuery(t,e)}))}))]}}))}))}var Fc=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return ru.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:as(n.createTime)}),ru.resolve()},t.prototype.getNamedQuery=function(t,e){return ru.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Cu(t.bundledQuery),readTime:as(t.readTime)}}(e)),ru.resolve()},t}(),Uc=function(){function t(){this.Wn=new Ra(Vc.Gn),this.zn=new Ra(Vc.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Vc(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Vc(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new Gi(new Ni([])),r=new Vc(n,t),i=new Vc(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Gi(new Ni([])),n=new Vc(e,t),r=new Vc(e,t+1),i=qa();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Vc(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Vc=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Gi.comparator(t.key,e.key)||Ei(t.ns,e.ns)},t.Hn=function(t,e){return Ei(t.ns,e.ns)||Gi.comparator(t.key,e.key)},t}(),Bc=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Ra(Vc.Gn)}return t.prototype.checkEmpty=function(t){return ru.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new vu(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new Vc(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return ru.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return ru.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return ru.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return ru.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return ru.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Vc(e,0),i=new Vc(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),ru.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ra(Ei);return e.forEach((function(t){var e=new Vc(t,0),i=new Vc(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),ru.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Gi.isDocumentKey(i)||(i=i.child(""));var o=new Vc(new Gi(i),0),a=new Ra(Ei);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),ru.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;yi(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return ru.forEach(e.mutations,(function(i){var o=new Vc(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Vc(e,0),r=this.rs.firstAfterOrEqual(n);return ru.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,ru.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),jc=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new xa(Gi.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return ru.resolve(n?n.document.clone():uo.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=La();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():uo.newInvalidDocument(t))})),ru.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=La(),i=new Gi(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(s.path))break;h.compareTo(n)<=0||Ko(e,c)&&(r=r.insert(c.key,c.clone()))}return ru.resolve(r)},t.prototype.fs=function(t,e){return ru.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new qc(this)},t.prototype.getSize=function(t){return ru.resolve(this.size)},t}(),qc=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return ii(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),ru.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(ic),Hc=function(){function t(t){this.persistence=t,this.ds=new rc((function(t){return lo(t)}),fo),this.lastRemoteSnapshotVersion=Si.min(),this.highestTargetId=0,this.ws=0,this._s=new Uc,this.targetCount=0,this.ys=zu.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),ru.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return ru.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return ru.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),ru.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),ru.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new zu(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,ru.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),ru.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,ru.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),ru.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return ru.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return ru.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),ru.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),ru.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),ru.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return ru.resolve(n)},t.prototype.containsKey=function(t,e){return ru.resolve(this._s.containsKey(e))},t}(),Kc=function(){function t(t,e){var n=this;this.gs={},this.Ne=new ui(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Hc(this),this.Ut=new Ou,this.Ue=function(t,e){return new jc(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new yu(e),this.Qe=new Fc(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Bc(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;di("MemoryPersistence","Starting transaction:",t);var i=new zc(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return ru.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),zc=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return ii(e,t),e}(eu),Gc=function(){function t(t){this.persistence=t,this.As=new Uc,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw mi()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),ru.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),ru.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),ru.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ru.forEach(this.vs,(function(r){var i=Gi.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return ru.or([function(){return ru.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Wc=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Xc(t,e){return"firestore_clients_"+t+"_"+e}function Yc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Qc(t,e){return"firestore_targets_"+t+"_"+e}Wc.UNAUTHENTICATED=new Wc(null),Wc.GOOGLE_CREDENTIALS=new Wc("google-credentials-uid"),Wc.FIRST_PARTY=new Wc("first-party-uid");var $c=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new hi(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(pi("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Jc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new hi(i.error.code,i.error.message)),o?new t(e,i.state,r):(pi("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Zc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ka(),a=0;i&&a<r.activeTargetIds.length;++a)i=zi(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(pi("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),th=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(pi("SharedClientState","Failed to parse online state: "+e),null)},t}(),eh=function(){function t(){this.activeTargetIds=Ka()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),nh=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new xa(Ei),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=Xc(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new eh),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return oi(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,h,l=this;return ai(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Xc(this.persistenceKey,r)))&&(o=Zc.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.Os;u<c.length;u++)h=c[u],this.Fs(h);return this.Os=[],this.window.addEventListener("unload",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Qc(this.persistenceKey,t));if(n){var r=Jc.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Qc(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return di("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){di("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){di("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(di("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void pi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return oi(e,void 0,void 0,(function(){var t,e,r,i,o,a;return ai(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=ui.o;if(null!=t)try{var n=JSON.parse(t);yi("number"==typeof n),e=n}catch(t){pi("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ui.o&&this.sequenceNumberHandler(a);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new $c(this.currentUser,t,e,n),i=Yc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Yc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Qc(this.persistenceKey,t),i=new Jc(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Zc.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return $c.Vs(new Wc(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Jc.Vs(r,e)},t.prototype.js=function(t){return th.Vs(t)},t.prototype.ii=function(t){return oi(this,void 0,void 0,(function(){return ai(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(di("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Ka();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),rh=function(){function t(){this.li=new eh,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new eh,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),ih=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),oh=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){di("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){di("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ah={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},sh=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),uh=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return ii(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new ni;a.listenOnce($r.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Qr.NO_ERROR:var e=a.getResponseJson();di("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Qr.TIMEOUT:di("Connection",'RPC "'+t+'" timed out'),o(new hi(ci.DEADLINE_EXCEEDED,"Request time out"));break;case Qr.HTTP_ERROR:var n=a.getStatus();if(di("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(ci).indexOf(e)>=0?e:ci.UNKNOWN}(r.status);o(new hi(s,r.message))}else o(new hi(ci.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new hi(ci.UNAVAILABLE,"Connection failed."));break;default:mi()}}finally{di("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.$i=function(t,e){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new zr,o=Ge(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(a.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(u())||"object"==typeof navigator&&"ReactNative"===navigator.product||u().indexOf("Electron/")>=0||function(){var t=u();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||u().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");di("Connection","Creating WebChannel: "+s,a);var c=i.createWebChannel(s,a),h=!1,l=!1,f=new sh({Ei:function(t){l?di("Connection","Not sending because WebChannel is closed:",t):(h||(di("Connection","Opening WebChannel transport."),c.open(),h=!0),di("Connection","WebChannel sending:",t),c.send(t))},Ti:function(){return c.close()}}),d=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return d(c,ei.EventType.OPEN,(function(){l||di("Connection","WebChannel transport opened.")})),d(c,ei.EventType.CLOSE,(function(){l||(l=!0,di("Connection","WebChannel transport closed"),f.Vi())})),d(c,ei.EventType.ERROR,(function(t){l||(l=!0,vi("Connection","WebChannel transport errored:",t),f.Vi(new hi(ci.UNAVAILABLE,"The operation could not be completed")))})),d(c,ei.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];yi(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){di("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=ka[t];if(void 0!==e)return Da(e)}(o),s=i.message;void 0===a&&(a=ci.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),l=!0,f.Vi(new hi(a,s)),c.close()}else di("Connection","WebChannel received:",n),f.Si(n)}})),d(o,Jr.STAT_EVENT,(function(t){t.stat===Zr?di("Connection","Detected buffering proxy"):t.stat===ti&&di("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Pi()}),0),f},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);di("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return di("RestConnection","Received: ",t),t}),(function(e){throw vi("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.2",t["X-Firebase-GMPID"]=this.databaseInfo.appId,t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=ah[t];return this.Di+"/v1/"+e+":"+n},t}());function ch(){return"undefined"!=typeof window?window:null}function hh(){return"undefined"!=typeof document?document:null}function lh(t){return new ns(t,!0)}var fh=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&di("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),dh=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new fh(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return oi(this,void 0,void 0,(function(){return ai(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return oi(this,void 0,void 0,(function(){return ai(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return oi(this,void 0,void 0,(function(){return ai(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===ci.RESOURCE_EXHAUSTED?(pi(e.toString()),pi("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===ci.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new hi(ci.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return oi(t,void 0,void 0,(function(){return ai(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return di("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(di("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),ph=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return ii(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:mi()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(yi(void 0===e||"string"==typeof e),Mi.fromBase64String(e||"")):(yi(void 0===e||e instanceof Uint8Array),Mi.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?ci.UNKNOWN:Da(t.code);return new hi(e,t.message||"")}(s);n=new Ya(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=hs(t,r.document.name),o=as(r.document.updateTime);var s=new ao({mapValue:{fields:r.document.fields}}),u=(a=uo.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new Wa(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=hs(t,r.document),o=r.readTime?as(r.readTime):Si.min(),s=uo.newNoDocument(i,o),a=r.removedTargetIds||[],n=new Wa([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=hs(t,r.document),o=r.removedTargetIds||[],n=new Wa([],o,i,null);else{if(!("filter"in e))return mi();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Aa(r),o=h.targetId,n=new Xa(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Si.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Si.min():e.readTime?as(e.readTime):Si.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=ds(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=po(r)?{documents:bs(t,r)}:{query:ws(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=is(t,e.resumeToken):e.snapshotVersion.compareTo(Si.min())>0&&(n.readTime=rs(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return mi()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=ds(this.R),e.removeTarget=t,this.cr(e)},e}(dh),vh=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return ii(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(yi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(yi(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?as(t.updateTime):as(e);return n.isEqual(Si.min())&&(n=as(e)),new ca(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=as(t.commitTime);return this.listener.Tr(n,e)}return yi(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=ds(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return ms(e.R,t)}))};this.cr(n)},e}(dh),gh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return ii(e,t),e.prototype.br=function(){if(this.Rr)throw new hi(ci.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw t.code===ci.UNAUTHENTICATED&&r.credentials.invalidateToken(),t}))},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Oi(t,e,n,i)})).catch((function(t){throw t.code===ci.UNAUTHENTICATED&&r.credentials.invalidateToken(),t}))},e.prototype.terminate=function(){this.Rr=!1},e}((function(){})),mh=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(pi(e),this.Vr=!1):di("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),yh=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return oi(o,void 0,void 0,(function(){return ai(this,(function(t){switch(t.label){case 0:return Ah(this)?(di("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return oi(this,void 0,void 0,(function(){var e;return ai(this,(function(n){switch(n.label){case 0:return(e=bi(t)).$r.add(4),[4,wh(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,bh(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new mh(n,r)};function bh(t){return oi(this,void 0,void 0,(function(){var e,n;return ai(this,(function(r){switch(r.label){case 0:if(!Ah(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function wh(t){return oi(this,void 0,void 0,(function(){var e,n;return ai(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function _h(t,e){var n=bi(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),Sh(n)?Th(n):qh(n).er()&&kh(n,e))}function Eh(t,e){var n=bi(t),r=qh(n);n.Or.delete(e),r.er()&&Ih(n,e),0===n.Or.size&&(r.er()?r.ir():Ah(n)&&n.Br.set("Unknown"))}function kh(t,e){t.qr.U(e.targetId),qh(t).mr(e)}function Ih(t,e){t.qr.U(e),qh(t).yr(e)}function Th(t){t.qr=new $a({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),qh(t).start(),t.Br.Sr()}function Sh(t){return Ah(t)&&!qh(t).tr()&&t.Or.size>0}function Ah(t){return 0===bi(t).$r.size}function Ch(t){t.qr=void 0}function Dh(t){return oi(this,void 0,void 0,(function(){return ai(this,(function(e){return t.Or.forEach((function(e,n){kh(t,e)})),[2]}))}))}function xh(t,e){return oi(this,void 0,void 0,(function(){return ai(this,(function(n){return Ch(t),Sh(t)?(t.Br.Nr(e),Th(t)):t.Br.set("Unknown"),[2]}))}))}function Nh(t,e,n){return oi(this,void 0,void 0,(function(){var r,i,o;return ai(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof Ya&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return oi(this,void 0,void 0,(function(){var n,r,i,o;return ai(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.Or.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.Or.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),di("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Oh(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Wa?t.qr.X(e):e instanceof Xa?t.qr.rt(e):t.qr.et(e),n.isEqual(Si.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Tc(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(Mi.EMPTY_BYTE_STRING,n.snapshotVersion)),Ih(t,e);var r=new mu(n.target,e,1,n.sequenceNumber);kh(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return di("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,Oh(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function Oh(t,e,n){return oi(this,void 0,void 0,(function(){var r=this;return ai(this,(function(i){switch(i.label){case 0:if(!uu(e))throw e;return t.$r.add(1),[4,wh(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Tc(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return oi(r,void 0,void 0,(function(){return ai(this,(function(e){switch(e.label){case 0:return di("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,bh(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Rh(t,e){return e().catch((function(n){return Oh(t,n,e)}))}function Ph(t){return oi(this,void 0,void 0,(function(){var e,n,r,i,o;return ai(this,(function(a){switch(a.label){case 0:e=bi(t),n=Hh(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return Ah(t)&&t.kr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Cc(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Hh(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,Oh(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return Mh(e)&&Lh(e),[2]}}))}))}function Mh(t){return Ah(t)&&!Hh(t).tr()&&t.kr.length>0}function Lh(t){Hh(t).start()}function Fh(t){return oi(this,void 0,void 0,(function(){return ai(this,(function(e){return Hh(t).Ar(),[2]}))}))}function Uh(t){return oi(this,void 0,void 0,(function(){var e,n,r,i;return ai(this,(function(o){for(e=Hh(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function Vh(t,e,n){return oi(this,void 0,void 0,(function(){var r,i;return ai(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=gu.from(r,e,n),[4,Rh(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Ph(t)];case 2:return o.sent(),[2]}}))}))}function Bh(t,e){return oi(this,void 0,void 0,(function(){return ai(this,(function(n){switch(n.label){case 0:return e&&Hh(t).pr?[4,function(t,e){return oi(this,void 0,void 0,(function(){var n,r;return ai(this,(function(i){switch(i.label){case 0:return Ca(r=e.code)&&r!==ci.ABORTED?(n=t.kr.shift(),Hh(t).sr(),[4,Rh(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Ph(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Mh(t)&&Lh(t),[2]}}))}))}function jh(t,e){return oi(this,void 0,void 0,(function(){var n;return ai(this,(function(r){switch(r.label){case 0:return n=bi(t),e?(n.$r.delete(2),[4,bh(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,wh(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function qh(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=bi(t);return r.br(),new ph(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Dh.bind(null,t),Ri:xh.bind(null,t),_r:Nh.bind(null,t)}),t.Mr.push((function(n){return oi(e,void 0,void 0,(function(){return ai(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Sh(t)?Th(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Ch(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function Hh(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=bi(t);return r.br(),new vh(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Fh.bind(null,t),Ri:Bh.bind(null,t),Ir:Uh.bind(null,t),Tr:Vh.bind(null,t)}),t.Mr.push((function(n){return oi(e,void 0,void 0,(function(){return ai(this,(function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,Ph(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(di("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qr}var Kh=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new nu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new hi(ci.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function zh(t,e){if(pi("AsyncQueue",e+": "+t),uu(t))return new hi(ci.UNAVAILABLE,e+": "+t);throw t}var Gh=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Gi.comparator(e.key,n.key)}:function(t,e){return Gi.comparator(t.key,e.key)},this.keyedMap=Ua(),this.sortedSet=new xa(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Wh=function(){function t(){this.Kr=new xa(Gi.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):mi():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Xh=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Gh.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&jo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Yh=function(){this.Wr=void 0,this.listeners=[]},Qh=function(){this.queries=new rc((function(t){return qo(t)}),jo),this.onlineState="Unknown",this.Gr=new Set};function $h(t,e){return oi(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return ai(this,(function(c){switch(c.label){case 0:if(n=bi(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Yh),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=zh(s,"Initialization of query '"+Ho(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&el(n),[2]}}))}))}function Jh(t,e){return oi(this,void 0,void 0,(function(){var n,r,i,o,a;return ai(this,(function(s){return n=bi(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Zh(t,e){for(var n=bi(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(a)&&(r=!0);u.Wr=a}}r&&el(n)}function tl(t,e,n){var r=bi(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function el(t){t.Gr.forEach((function(t){t.next()}))}var nl=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Xh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Xh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),rl=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),il=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return hs(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?gs(this.R,t.document,!1):uo.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return as(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new il(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],h=(e.get(c)||qa()).add(a);e.set(c,h)}}return e},t.prototype.complete=function(){return oi(this,void 0,void 0,(function(){var t,e,n,r,i;return ai(this,(function(o){switch(o.label){case 0:return[4,Mc(this.localStore,new il(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Lc(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new mc(Object.assign({},this.progress),t))]}}))}))}}();var ol=function(t){this.key=t},al=function(t){this.key=t},sl=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=qa(),this.mutatedKeys=qa(),this.lo=zo(t),this.fo=new Gh(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Wh,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Ro(this.query)&&i.size===this.query.limit?i.last():null,c=Po(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=Ko(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),d=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),p=!1;h&&l?h.data.isEqual(l.data)?f!==d&&(r.track({type:3,doc:l}),p=!0):n.yo(h,l)||(r.track({type:2,doc:l}),p=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(s=!0)):!h&&l?(r.track({type:0,doc:l}),p=!0):h&&!l&&(r.track({type:1,doc:h}),p=!0,(u||c)&&(s=!0)),p&&(l?(a=a.add(l),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),Ro(this.query)||Po(this.query))for(;a.size>this.query.limit;){var h=Ro(this.query)?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mi()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new Xh(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Wh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=qa(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new al(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new ol(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=qa();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Xh.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),ul=function(t,e,n){this.query=t,this.targetId=e,this.view=n},cl=function(t){this.key=t,this.bo=!1},hl=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new rc((function(t){return qo(t)}),jo),this.Vo=new Map,this.So=new Set,this.Do=new xa(Gi.comparator),this.Co=new Map,this.No=new Uc,this.xo={},this.Fo=new Map,this.ko=zu.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function ll(t,e){return oi(this,void 0,void 0,(function(){var n,r,i,o,a,s;return ai(this,(function(u){switch(u.label){case 0:return n=Bl(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Dc(n.localStore,Vo(e))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,fl(n,e,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&_h(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function fl(t,e,n,r){return oi(this,void 0,void 0,(function(){var i,o,a,s,u,c;return ai(this,(function(h){switch(h.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return oi(this,void 0,void 0,(function(){var i,o,a;return ai(this,(function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,Nc(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Tl(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,r)},[4,Nc(t.localStore,e,!0)];case 1:return i=h.sent(),o=new sl(e,i.Bn),a=o._o(i.documents),s=Ga.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),Tl(t,n,u.To),c=new ul(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function dl(t,e){return oi(this,void 0,void 0,(function(){var n,r,i;return ai(this,(function(o){switch(o.label){case 0:return n=bi(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!jo(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,xc(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Eh(n.remoteStore,r.targetId),kl(n,r.targetId)})).catch(Qu)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return kl(n,r.targetId),[4,xc(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function pl(t,e,n){return oi(this,void 0,void 0,(function(){var r,i,o,a;return ai(this,(function(s){switch(s.label){case 0:r=jl(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=bi(t),i=Ti.now(),o=e.reduce((function(t,e){return t.add(e.key)}),qa());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],h=va(c,n.get(c.key));null!=h&&a.push(new ba(c.key,h,so(h.toProto().mapValue),ha.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new xa(Ei)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Cl(r,i.changes)];case 3:return s.sent(),[4,Ph(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=zh(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function vl(t,e){return oi(this,void 0,void 0,(function(){var n,r;return ai(this,(function(i){switch(i.label){case 0:n=bi(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Sc(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(yi(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?yi(r.bo):t.removedDocuments.size>0&&(yi(r.bo),r.bo=!1))})),[4,Cl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Qu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function gl(t,e,n){var r=bi(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=bi(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&el(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ml(t,e,n){return oi(this,void 0,void 0,(function(){var r,i,o,a,s,u;return ai(this,(function(c){switch(c.label){case 0:return(r=bi(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new xa(Gi.comparator)).insert(o,uo.newNoDocument(o,Si.min())),s=qa().add(o),u=new za(Si.min(),new Map,new Ra(Ei),a,s),[4,vl(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Al(r),[3,4];case 2:return[4,xc(r.localStore,e,!1).then((function(){return kl(r,e,n)})).catch(Qu)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function yl(t,e){return oi(this,void 0,void 0,(function(){var n,r,i;return ai(this,(function(o){switch(o.label){case 0:n=bi(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Ic(n.localStore,e)];case 2:return i=o.sent(),El(n,r,null),_l(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Cl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Qu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function bl(t,e,n){return oi(this,void 0,void 0,(function(){var r,i;return ai(this,(function(o){switch(o.label){case 0:r=bi(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=bi(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return yi(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),El(r,e,n),_l(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Cl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Qu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function wl(t,e){return oi(this,void 0,void 0,(function(){var n,r,i,o,a;return ai(this,(function(s){switch(s.label){case 0:Ah((n=bi(t)).remoteStore)||di("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=bi(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=s.sent(),a=zh(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function _l(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function El(t,e,n){var r=bi(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function kl(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Il(t,e)}))}function Il(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Eh(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Al(t))}function Tl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ol?(t.No.addReference(o.key,e),Sl(t,o)):o instanceof al?(di("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Il(t,o.key)):mi()}}function Sl(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(di("SyncEngine","New document in limbo: "+n),t.So.add(r),Al(t))}function Al(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Gi(Ni.fromString(e)),r=t.ko.next();t.Co.set(r,new cl(n)),t.Do=t.Do.insert(n,r),_h(t.remoteStore,new mu(Vo(Oo(n.path)),r,2,ui.o))}}function Cl(t,e,n){return oi(this,void 0,void 0,(function(){var r,i,o,a;return ai(this,(function(s){switch(s.label){case 0:return r=bi(t),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.$o(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=bc.Pn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return oi(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h;return ai(this,(function(l){switch(l.label){case 0:n=bi(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return ru.forEach(e,(function(e){return ru.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return ru.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!uu(r=l.sent()))throw r;return di("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.Fn.get(s),c=u.snapshotVersion,h=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(s,h));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Dl(t,e){return oi(this,void 0,void 0,(function(){var n,r;return ai(this,(function(i){switch(i.label){case 0:return(n=bi(t)).currentUser.isEqual(e)?[3,3]:(di("SyncEngine","User change. New user:",e.toKey()),[4,kc(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new hi(ci.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Cl(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function xl(t,e){var n=bi(t),r=n.Co.get(e);if(r&&r.bo)return qa().add(r.key);var i=qa(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Nl(t,e){return oi(this,void 0,void 0,(function(){var n,r,i;return ai(this,(function(o){switch(o.label){case 0:return[4,Nc((n=bi(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Tl(n,e.targetId,i.To),i)]}}))}))}function Ol(t){return oi(this,void 0,void 0,(function(){var e;return ai(this,(function(n){return[2,Rc((e=bi(t)).localStore).then((function(t){return Cl(e,t)}))]}))}))}function Rl(t,e,n,r){return oi(this,void 0,void 0,(function(){var i,o;return ai(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=bi(t),r=bi(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):ru.resolve(null)}))}))}((i=bi(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,Ph(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(El(i,e,r||null),_l(i,e),function(t,e){bi(bi(t)._n).Gt(e)}(i.localStore,e)):mi(),a.label=4;case 4:return[4,Cl(i,o)];case 5:return a.sent(),[3,7];case 6:di("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function Pl(t,e){return oi(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return ai(this,(function(h){switch(h.label){case 0:return Bl(n=bi(t)),jl(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Ml(n,r.toArray())]);case 1:return i=h.sent(),n.Oo=!0,[4,jh(n.remoteStore,!0)];case 2:for(h.sent(),o=0,a=i;o<a.length;o++)s=a[o],_h(n.remoteStore,s);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return kl(n,e),xc(n.localStore,e,!0)})),Eh(n.remoteStore,e)})),[4,c]);case 4:return h.sent(),[4,Ml(n,u)];case 5:return h.sent(),function(t){var e=bi(t);e.Co.forEach((function(t,n){Eh(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new xa(Gi.comparator)}(n),n.Oo=!1,[4,jh(n.remoteStore,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function Ml(t,e,n){return oi(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h,l,f,d,p,v;return ai(this,(function(g){switch(g.label){case 0:n=bi(t),r=[],i=[],o=0,a=e,g.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,Dc(n.localStore,Vo(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),h=0,l=c,g.label=3;case 3:return h<l.length?(f=l[h],d=n.Po.get(f),[4,Nl(n,d)]):[3,6];case 4:(p=g.sent()).snapshot&&i.push(p.snapshot),g.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Oc(n.localStore,s)];case 8:return v=g.sent(),[4,Dc(n.localStore,v)];case 9:return u=g.sent(),[4,fl(n,Ll(v),s,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Ll(t){return No(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Fl(t){var e=bi(t);return bi(bi(e.localStore).persistence).fn()}function Ul(t,e,n,r){return oi(this,void 0,void 0,(function(){var i,o,a;return ai(this,(function(s){switch(s.label){case 0:return(i=bi(t)).Oo?(di("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Rc(i.localStore)];case 3:return o=s.sent(),a=za.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Cl(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,xc(i.localStore,e,!0)];case 6:return s.sent(),kl(i,e,r),[3,8];case 7:mi(),s.label=8;case 8:return[2]}}))}))}function Vl(t,e,n){return oi(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,h,l,f;return ai(this,(function(d){switch(d.label){case 0:if(!(r=Bl(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(di("SyncEngine","Adding an already active target "+a),[3,5]):[4,Oc(r.localStore,a)]):[3,6];case 2:return s=d.sent(),[4,Dc(r.localStore,s)];case 3:return u=d.sent(),[4,fl(r,Ll(s),u.targetId,!1)];case 4:d.sent(),_h(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return ai(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,xc(r.localStore,t,!1).then((function(){Eh(r.remoteStore,t),kl(r,t)})).catch(Qu)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,d.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:d.sent(),d.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Bl(t){var e=bi(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vl.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xl.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ml.bind(null,e),e.vo._r=Zh.bind(null,e.eventManager),e.vo.Mo=tl.bind(null,e.eventManager),e}function jl(t){var e=bi(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yl.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bl.bind(null,e),e}var ql=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return oi(this,void 0,void 0,(function(){return ai(this,(function(e){switch(e.label){case 0:return this.R=lh(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Ec(this.persistence,new wc,t.initialUser,this.R)},t.prototype.qo=function(t){return new Kc(Gc.bs,this.R)},t.prototype.Bo=function(t){return new rh},t.prototype.terminate=function(){return oi(this,void 0,void 0,(function(){return ai(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Hl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return ii(e,t),e.prototype.initialize=function(e){return oi(this,void 0,void 0,(function(){return ai(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Pc(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,jl(this.Ko.syncEngine)];case 4:return n.sent(),[4,Ph(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Qo=function(t){return Ec(this.persistence,new wc,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Zu(e,t.asyncQueue)},e.prototype.qo=function(t){var e=gc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Fu.withCacheSize(this.cacheSizeBytes):Fu.DEFAULT;return new dc(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,ch(),hh(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new rh},e}(ql),Kl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return ii(e,t),e.prototype.initialize=function(e){return oi(this,void 0,void 0,(function(){var n,r=this;return ai(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof nh?(this.sharedClientState.syncEngine={ui:Rl.bind(null,n),ai:Ul.bind(null,n),hi:Vl.bind(null,n),fn:Fl.bind(null,n),ci:Ol.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return oi(r,void 0,void 0,(function(){return ai(this,(function(e){switch(e.label){case 0:return[4,Pl(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=ch();if(!nh.yt(e))throw new hi(ci.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=gc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new nh(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Hl),zl=function(){function t(){}return t.prototype.initialize=function(t,e){return oi(this,void 0,void 0,(function(){var n=this;return ai(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return gl(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Dl.bind(null,this.syncEngine),[4,jh(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Qh},t.prototype.createDatastore=function(t){var e,n=lh(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new uh(e));return function(t,e,n){return new gh(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return gl(a.syncEngine,t,0)},o=oh.yt()?new oh:new ih,new yh(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new hl(t,e,n,r,i,o);return a&&(s.Oo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return oi(this,void 0,void 0,(function(){var e;return ai(this,(function(n){switch(n.label){case 0:return e=bi(t),di("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,wh(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),Gl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Wl=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new nu,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return oi(this,void 0,void 0,(function(){return ai(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return oi(this,void 0,void 0,(function(){return ai(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return oi(this,void 0,void 0,(function(){var t,e,n,r;return ai(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new rl(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return oi(this,void 0,void 0,(function(){var t,e;return ai(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return oi(this,void 0,void 0,(function(){var e;return ai(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return oi(this,void 0,void 0,(function(){var t,e;return ai(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return oi(this,void 0,void 0,(function(){var e,n=this;return ai(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new hi(ci.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return oi(this,void 0,void 0,(function(){var n,r,i,o,a,s;return ai(this,(function(u){switch(u.label){case 0:return n=bi(t),r=ds(n.R)+"/documents",i={documents:e.map((function(t){return cs(n.R,t)}))},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){yi(!!e.found),e.found.name,e.found.updateTime;var n=hs(t,e.found.name),r=as(e.found.updateTime),i=new ao({mapValue:{fields:e.found.fields}});return uo.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){yi(!!e.missing),yi(!!e.readTime);var n=hs(t,e.missing),r=as(e.readTime);return uo.newNoDocument(n,r)}(t,e):mi()}(n.R,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());yi(!!e),s.push(e)})),s)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Ta(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return oi(this,void 0,void 0,(function(){var t,e=this;return ai(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Gi.fromPath(n);e.mutations.push(new Sa(r,e.precondition(r)))})),[4,function(t,e){return oi(this,void 0,void 0,(function(){var n,r,i;return ai(this,(function(o){switch(o.label){case 0:return n=bi(t),r=ds(n.R)+"/documents",i={writes:e.map((function(t){return ms(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw mi();e=Si.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new hi(ci.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ha.updateTime(e):ha.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Si.min()))throw new hi(ci.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ha.updateTime(e)}return ha.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Xl=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new fh(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return oi(t,void 0,void 0,(function(){var t,e,n=this;return ai(this,(function(r){return t=new Wl(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Hi(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ca(e)}return!1},t}(),Yl=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Wc.UNAUTHENTICATED,this.clientId=_i.u(),this.credentialListener=function(){},this.receivedInitialUser=new nu,this.credentials.setChangeListener((function(t){di("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()}))}return t.prototype.getConfiguration=function(){return oi(this,void 0,void 0,(function(){return ai(this,(function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}}))}))},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then((function(){return e.credentialListener(e.user)}))},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new hi(ci.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new nu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return oi(t,void 0,void 0,(function(){var t,n;return ai(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=zh(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function Ql(t,e){return oi(this,void 0,void 0,(function(){var n,r,i=this;return ai(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),di("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable((function(){return oi(i,void 0,void 0,(function(){return ai(this,(function(t){switch(t.label){case 0:return[4,kc(e.localStore,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function $l(t,e){return oi(this,void 0,void 0,(function(){var n,r;return ai(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Jl(t)];case 1:return n=i.sent(),di("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(n){return t.asyncQueue.enqueueRetryable((function(){return function(t,e){return oi(this,void 0,void 0,(function(){var n,r;return ai(this,(function(i){switch(i.label){case 0:return(n=bi(t)).asyncQueue.verifyOperationInProgress(),di("RemoteStore","RemoteStore received new credentials"),r=Ah(n),n.$r.add(3),[4,wh(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,bh(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,n)}))})),t.onlineComponents=e,[2]}}))}))}function Jl(t){return oi(this,void 0,void 0,(function(){return ai(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(di("FirestoreClient","Using default OfflineComponentProvider"),[4,Ql(t,new ql)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Zl(t){return oi(this,void 0,void 0,(function(){return ai(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(di("FirestoreClient","Using default OnlineComponentProvider"),[4,$l(t,new zl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function tf(t){return Jl(t).then((function(t){return t.persistence}))}function ef(t){return Jl(t).then((function(t){return t.localStore}))}function nf(t){return Zl(t).then((function(t){return t.remoteStore}))}function rf(t){return Zl(t).then((function(t){return t.syncEngine}))}function of(t){return oi(this,void 0,void 0,(function(){var e,n;return ai(this,(function(r){switch(r.label){case 0:return[4,Zl(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=ll.bind(null,e.syncEngine),n.onUnlisten=dl.bind(null,e.syncEngine),n)]}}))}))}function af(t,e,n){var r=this;void 0===n&&(n={});var i=new nu;return t.asyncQueue.enqueueAndForget((function(){return oi(r,void 0,void 0,(function(){var r;return ai(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Gl({next:function(o){e.enqueueAndForget((function(){return Jh(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new hi(ci.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new hi(ci.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new nl(Oo(n.path),o,{includeMetadataChanges:!0,so:!0});return $h(t,a)},[4,of(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function sf(t,e,n){var r=this;void 0===n&&(n={});var i=new nu;return t.asyncQueue.enqueueAndForget((function(){return oi(r,void 0,void 0,(function(){var r;return ai(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Gl({next:function(n){e.enqueueAndForget((function(){return Jh(t,a)})),n.fromCache&&"server"===r.source?i.reject(new hi(ci.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new nl(n,o,{includeMetadataChanges:!0,so:!0});return $h(t,a)},[4,of(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var uf=function(t,e,n,r,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},cf=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),hf=new Map,lf=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},ff=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(Wc.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),df=function(){function t(t){var e=this;this.oc=null,this.currentUser=Wc.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then((function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(di("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(yi("string"==typeof n.accessToken),new lf(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return yi(null===t||"string"==typeof t),new Wc(t)},t}(),pf=function(){function t(t,e){this.ac=t,this.hc=e,this.type="FirstParty",this.user=Wc.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),vf=function(){function t(t,e){this.ac=t,this.hc=e}return t.prototype.getToken=function(){return Promise.resolve(new pf(this.ac,this.hc))},t.prototype.setChangeListener=function(t){t(Wc.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function gf(t,e,n){if(!n)throw new hi(ci.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function mf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new hi(ci.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function yf(t,e,n,r){if(!0===e&&!0===r)throw new hi(ci.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function bf(t){if(!Gi.isDocumentKey(t))throw new hi(ci.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function wf(t){if(Gi.isDocumentKey(t))throw new hi(ci.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function _f(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":mi()}function Ef(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new hi(ci.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=_f(t);throw new hi(ci.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function kf(t,e){if(e<=0)throw new hi(ci.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var If=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new hi(ci.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new hi(ci.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,yf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Tf=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new If({}),this._settingsFrozen=!1,t instanceof cf?(this._databaseId=t,this._credentials=new ff):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new hi(ci.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cf(t.options.projectId)}(t),this._credentials=new df(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new hi(ci.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new hi(ci.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new If(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new ff;switch(t.type){case"gapi":var e=t.client;return yi(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new vf(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new hi(ci.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=hf.get(this))&&(di("ComponentProvider","Removing Datastore"),hf.delete(this),t.terminate()),Promise.resolve();var t},t}(),Sf=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Cf(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Af=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Cf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Oo(r))||this).firestore=e,i._path=r,i.type="collection",i}return ii(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Sf(this.firestore,null,new Gi(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Af);function Df(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=y(t),gf("collection","path",e),t instanceof Tf)return wf(n=Ni.fromString.apply(Ni,si([e],r))),new Cf(t,null,n);if(!(t instanceof Sf||t instanceof Cf))throw new hi(ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return wf(n=Ni.fromString.apply(Ni,si([t.path],r)).child(Ni.fromString(e))),new Cf(t.firestore,null,n)}function xf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=y(t),1===arguments.length&&(e=_i.u()),gf("doc","path",e),t instanceof Tf)return bf(n=Ni.fromString.apply(Ni,si([e],r))),new Sf(t,null,new Gi(n));if(!(t instanceof Sf||t instanceof Cf))throw new hi(ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return bf(n=t._path.child(Ni.fromString.apply(Ni,si([e],r)))),new Sf(t.firestore,t instanceof Cf?t._converter:null,new Gi(n))}function Nf(t,e){return t=y(t),e=y(e),(t instanceof Sf||t instanceof Cf)&&(e instanceof Sf||e instanceof Cf)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function Of(t,e){return t=y(t),e=y(e),t instanceof Af&&e instanceof Af&&t.firestore===e.firestore&&jo(t._query,e._query)&&t._converter===e._converter}var Rf=function(){function t(){var t=this;this.lc=Promise.resolve(),this.fc=[],this.dc=!1,this.wc=[],this._c=null,this.mc=!1,this.yc=[],this.Zi=new fh(this,"async_queue_retry"),this.gc=function(){var e=hh();e&&di("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=hh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.gc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.dc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ec(),this.Tc(t)},t.prototype.enterRestrictedMode=function(){if(!this.dc){this.dc=!0;var t=hh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.gc)}},t.prototype.enqueue=function(t){return this.Ec(),this.dc?new Promise((function(t){})):this.Tc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.fc.push(t),e.Ic()}))},t.prototype.Ic=function(){return oi(this,void 0,void 0,(function(){var t,e=this;return ai(this,(function(n){switch(n.label){case 0:if(0===this.fc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.fc[0]()];case 2:return n.sent(),this.fc.shift(),this.Zi.reset(),[3,4];case 3:if(!uu(t=n.sent()))throw t;return di("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.fc.length>0&&this.Zi.ji((function(){return e.Ic()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Tc=function(t){var e=this,n=this.lc.then((function(){return e.mc=!0,t().catch((function(t){throw e._c=t,e.mc=!1,pi("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.mc=!1,t}))}));return this.lc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ec(),this.yc.indexOf(t)>-1&&(e=0);var i=Kh.createAndSchedule(this,t,e,n,(function(t){return r.Ac(t)}));return this.wc.push(i),i},t.prototype.Ec=function(){this._c&&mi()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Rc=function(){return oi(this,void 0,void 0,(function(){var t;return ai(this,(function(e){switch(e.label){case 0:return[4,t=this.lc];case 1:e.sent(),e.label=2;case 2:if(t!==this.lc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.bc=function(t){for(var e=0,n=this.wc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.vc=function(t){var e=this;return this.Rc().then((function(){e.wc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.wc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Rc()}))},t.prototype.Pc=function(t){this.yc.push(t)},t.prototype.Ac=function(t){var e=this.wc.indexOf(t);this.wc.splice(e,1)},t}();function Pf(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new nu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Mf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new Rf,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return ii(e,t),e.prototype._terminate=function(){return this._firestoreClient||Ff(this),this._firestoreClient.terminate()},e}(Tf);function Lf(t){return t._firestoreClient||Ff(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Ff(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new uf(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Yl(t._credentials,t._queue,r)}function Uf(t,e,n){var r=this,i=new nu;return t.asyncQueue.enqueue((function(){return oi(r,void 0,void 0,(function(){var r;return ai(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Ql(t,n)];case 1:return o.sent(),[4,$l(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===ci.FAILED_PRECONDITION||t.code===ci.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Vf(t){if(t._initialized||t._terminated)throw new hi(ci.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Bf=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new hi(ci.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ri(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),jf=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Mi.fromBase64String(e))}catch(e){throw new hi(ci.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Mi.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),qf=function(t){this._methodName=t},Hf=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new hi(ci.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new hi(ci.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Ei(this._lat,t._lat)||Ei(this._long,t._long)},t}(),Kf=/^__.*__$/,zf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ba(t,this.data,this.fieldMask,e,this.fieldTransforms):new ya(t,this.data,e,this.fieldTransforms)},t}(),Gf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ba(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Wf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mi()}}var Xf=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Vc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Sc",{get:function(){return this.settings.Sc},enumerable:!1,configurable:!0}),t.prototype.Dc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Cc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Dc({path:n,Nc:!1});return r.xc(t),r},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Dc({path:n,Nc:!1});return r.Vc(),r},t.prototype.kc=function(t){return this.Dc({path:void 0,Nc:!0})},t.prototype.Oc=function(t){return pd(t,this.settings.methodName,this.settings.$c||!1,this.path,this.settings.Mc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Vc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.xc(this.path.get(t))},t.prototype.xc=function(t){if(0===t.length)throw this.Oc("Document fields must not be empty");if(Wf(this.Sc)&&Kf.test(t))throw this.Oc('Document fields cannot begin and end with "__"')},t}(),Yf=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||lh(t)}return t.prototype.Lc=function(t,e,n,r){return void 0===r&&(r=!1),new Xf({Sc:t,methodName:e,Mc:n,path:Ri.emptyPath(),Nc:!1,$c:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Qf(t){var e=t._freezeSettings(),n=lh(t._databaseId);return new Yf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $f(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Lc(o.merge||o.mergeFields?2:0,e,n,i);hd("Data must be an object, but it was:",a,r);var s,u,c=ud(r,a);if(o.merge)s=new Pi(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var d=ld(e,f[l],n);if(!a.contains(d))throw new hi(ci.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");vd(h,d)||h.push(d)}s=new Pi(h),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new zf(new ao(c),s,u)}var Jf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Sc)throw 1===t.Sc?t.Oc(this._methodName+"() can only appear at the top level of your update data"):t.Oc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(qf);function Zf(t,e,n){return new Xf({Sc:3,Mc:e.settings.Mc,methodName:t._methodName,Nc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var td=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype._toFieldTransform=function(t){return new ua(t.path,new ta)},e.prototype.isEqual=function(t){return t instanceof e},e}(qf),ed=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Bc=n,r}return ii(e,t),e.prototype._toFieldTransform=function(t){var e=Zf(this,t,!0),n=this.Bc.map((function(t){return sd(t,e)})),r=new ea(n);return new ua(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(qf),nd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Bc=n,r}return ii(e,t),e.prototype._toFieldTransform=function(t){var e=Zf(this,t,!0),n=this.Bc.map((function(t){return sd(t,e)})),r=new ra(n);return new ua(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(qf),rd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return ii(e,t),e.prototype._toFieldTransform=function(t){var e=new oa(t.R,Yo(t.R,this.qc));return new ua(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(qf);function id(t,e,n,r){var i=t.Lc(1,e,n);hd("Data must be an object, but it was:",i,r);var o=[],a=ao.empty();Ci(r,(function(t,r){var s=dd(e,t,n);r=y(r);var u=i.Fc(s);if(r instanceof Jf)o.push(s);else{var c=sd(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new Pi(o);return new Gf(a,s,i.fieldTransforms)}function od(t,e,n,r,i,o){var a=t.Lc(1,e,n),s=[ld(e,r,n)],u=[i];if(o.length%2!=0)throw new hi(ci.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(ld(e,o[c])),u.push(o[c+1]);for(var h=[],l=ao.empty(),f=s.length-1;f>=0;--f)if(!vd(h,s[f])){var d=s[f],p=u[f];p=y(p);var v=a.Fc(d);if(p instanceof Jf)h.push(d);else{var g=sd(p,v);null!=g&&(h.push(d),l.set(d,g))}}var m=new Pi(h);return new Gf(l,m,a.fieldTransforms)}function ad(t,e,n,r){return void 0===r&&(r=!1),sd(n,t.Lc(r?4:3,e))}function sd(t,e){if(cd(t=y(t)))return hd("Unsupported field value:",e,t),ud(t,e);if(t instanceof qf)return function(t,e){if(!Wf(e.Sc))throw e.Oc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Oc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nc&&4!==e.Sc)throw e.Oc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=sd(o[i],e.kc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=y(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Yo(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ti.fromDate(t);return{timestampValue:rs(e.R,n)}}if(t instanceof Ti)return n=new Ti(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:rs(e.R,n)};if(t instanceof Hf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof jf)return{bytesValue:is(e.R,t._byteString)};if(t instanceof Sf){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Oc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:ss(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Oc("Unsupported field value: "+_f(t))}(t,e)}function ud(t,e){var n={};return Di(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ci(t,(function(t,r){var i=sd(r,e.Cc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function cd(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ti||t instanceof Hf||t instanceof jf||t instanceof Sf||t instanceof qf)}function hd(t,e,n){if(!cd(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=_f(n);throw"an object"===r?e.Oc(t+" a custom object"):e.Oc(t+" "+r)}}function ld(t,e,n){if((e=y(e))instanceof Bf)return e._internalPath;if("string"==typeof e)return dd(t,e);throw pd("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var fd=new RegExp("[~\\*/\\[\\]]");function dd(t,e,n){if(e.search(fd)>=0)throw pd("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Bf.bind.apply(Bf,si([void 0],e.split(".")))))._internalPath}catch(r){throw pd("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function pd(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new hi(ci.INVALID_ARGUMENT,(s+=". ")+t+u)}function vd(t,e){return t.some((function(t){return t.isEqual(e)}))}var gd=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Sf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new md(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(yd("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),md=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(gd);function yd(t,e){return"string"==typeof e?dd(t,e):e instanceof Bf?e._internalPath:e._delegate._internalPath}var bd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),wd=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return ii(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new _d(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(yd("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(gd),_d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(wd),Ed=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new bd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new _d(n._firestore,n._userDataWriter,r.key,r,new bd(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new hi(ci.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var r=new _d(t._firestore,t._userDataWriter,e.doc.key,e.doc,new bd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new _d(t._firestore,t._userDataWriter,e.doc.key,e.doc,new bd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:kd(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function kd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mi()}}function Id(t,e){return t instanceof wd&&e instanceof wd?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ed&&e instanceof Ed&&t._firestore===e._firestore&&Of(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Td(t){if(Po(t)&&0===t.explicitOrderBy.length)throw new hi(ci.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Sd=function(){};function Ad(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Cd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Uc=e,i.Qc=n,i.Kc=r,i.type="where",i}return ii(e,t),e.prototype._apply=function(t){var e=Qf(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new hi(ci.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Md(a,o);for(var u=[],c=0,h=a;c<h.length;c++){var l=h[c];u.push(Pd(r,t,l))}s={arrayValue:{values:u}}}else s=Pd(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Md(a,o),s=ad(n,"where",a,"in"===o||"not-in"===o);var f=vo.create(i,o,s);return function(t,e){if(e.g()){var n=Lo(t);if(null!==n&&!n.isEqual(e.field))throw new hi(ci.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Mo(t);null!==r&&Ld(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new hi(ci.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new hi(ci.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.Uc,this.Qc,this.Kc);return new Af(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Sd),Dd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Uc=e,r.jc=n,r.type="orderBy",r}return ii(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new hi(ci.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new hi(ci.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new So(e,n);return function(t,e){if(null===Mo(t)){var n=Lo(t);null!==n&&Ld(0,n,e.field)}}(t,r),r}(t._query,this.Uc,this.jc);return new Af(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new xo(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Sd),xd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Wc=n,i.Gc=r,i}return ii(e,t),e.prototype._apply=function(t){return new Af(t.firestore,t._converter,Bo(t._query,this.Wc,this.Gc))},e}(Sd),Nd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return ii(e,t),e.prototype._apply=function(t){var e=Rd(t,this.type,this.zc,this.Hc);return new Af(t.firestore,t._converter,function(t,e){return new xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Sd),Od=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return ii(e,t),e.prototype._apply=function(t){var e=Rd(t,this.type,this.zc,this.Hc);return new Af(t.firestore,t._converter,function(t,e){return new xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Sd);function Rd(t,e,n,r){if(n[0]=y(n[0]),n[0]instanceof gd)return function(t,e,n,r,i){if(!r)throw new hi(ci.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Uo(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(to(e,r.key));else{var c=r.data.field(u.field);if(Bi(c))throw new hi(ci.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new hi(ci.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Io(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Qf(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new hi(ci.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new hi(ci.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Fo(t)&&-1!==c.indexOf("/"))throw new hi(ci.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Ni.fromString(c));if(!Gi.isDocumentKey(h))throw new hi(ci.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new Gi(h);s.push(to(e,l))}else{var f=ad(n,r,c);s.push(f)}}return new Io(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Pd(t,e,n){if("string"==typeof(n=y(n))){if(""===n)throw new hi(ci.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fo(e)&&-1!==n.indexOf("/"))throw new hi(ci.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Ni.fromString(n));if(!Gi.isDocumentKey(r))throw new hi(ci.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return to(t,new Gi(r))}if(n instanceof Sf)return to(t,n._key);throw new hi(ci.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+_f(n)+".")}function Md(t,e){if(!Array.isArray(t)||0===t.length)throw new hi(ci.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new hi(ci.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Ld(t,e,n){if(!n.isEqual(e))throw new hi(ci.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Fd=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Wi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ui(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Vi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw mi()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Ci(t.fields||{},(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Hf(Ui(t.latitude),Ui(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=ji(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(qi(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Fi(t);return new Ti(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Ni.fromString(t);yi(Os(n));var r=new cf(n.get(1),n.get(3)),i=new Gi(n.popFirst(5));return r.isEqual(e)||pi("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Ud(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Vd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ii(e,t),e.prototype.convertBytes=function(t){return new jf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Sf(this.firestore,null,e)},e}(Fd),Bd=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Qf(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=jd(t,this._firestore),i=Ud(r._converter,e,n),o=$f(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,ha.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=jd(t,this._firestore);return o="string"==typeof(e=y(e))||e instanceof Bf?od(this._dataReader,"WriteBatch.update",a._key,e,n,r):id(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,ha.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=jd(t,this._firestore);return this._mutations=this._mutations.concat(new Ta(e._key,ha.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new hi(ci.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function jd(t,e){if((t=y(t)).firestore!==e)throw new hi(ci.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var qd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ii(e,t),e.prototype.convertBytes=function(t){return new jf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Sf(this.firestore,null,e)},e}(Fd);function Hd(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Ef(t,Sf);var o=Ef(t.firestore,Mf),a=Qf(o);return zd(o,[("string"==typeof(e=y(e))||e instanceof Bf?od(a,"updateDoc",t._key,e,n,r):id(a,"updateDoc",t._key,e)).toMutation(t._key,ha.exists(!0))])}function Kd(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=y(t);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||Pf(i[s])||(a=i[s],s++);var u,c,h,l={includeMetadataChanges:a.includeMetadataChanges};if(Pf(i[s])){var f=i[s];i[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Sf)c=Ef(t.firestore,Mf),h=Oo(t._key.path),u={next:function(e){i[s]&&i[s](Gd(c,t,e))},error:i[s+1],complete:i[s+2]};else{var d=Ef(t,Af);c=Ef(d.firestore,Mf),h=d._query;var p=new qd(c);u={next:function(t){i[s]&&i[s](new Ed(c,p,d,t))},error:i[s+1],complete:i[s+2]},Td(t._query)}return function(t,e,n,r){var i=this,o=new Gl(r),a=new nl(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return oi(i,void 0,void 0,(function(){var e;return ai(this,(function(n){switch(n.label){case 0:return e=$h,[4,of(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return oi(i,void 0,void 0,(function(){var e;return ai(this,(function(n){switch(n.label){case 0:return e=Jh,[4,of(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(Lf(c),h,l,u)}function zd(t,e){return function(t,e){var n=this,r=new nu;return t.asyncQueue.enqueueAndForget((function(){return oi(n,void 0,void 0,(function(){var n;return ai(this,(function(i){switch(i.label){case 0:return n=pl,[4,rf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Lf(t),e)}function Gd(t,e,n){var r=n.docs.get(e._key),i=new qd(t);return new wd(t,i,e._key,r,new bd(n.hasPendingWrites,n.fromCache),e._converter)}var Wd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return ii(e,t),e.prototype.get=function(e){var n=this,r=jd(e,this._firestore),i=new qd(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new wd(n._firestore,i,r._key,t._document,new bd(!1,!1),r._converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Qf(t)}return t.prototype.get=function(t){var e=this,n=jd(t,this._firestore),r=new Vd(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return mi();var i=t[0];if(i.isFoundDocument())return new gd(e._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new gd(e._firestore,r,n._key,null,n._converter);throw mi()}))},t.prototype.set=function(t,e,n){var r=jd(t,this._firestore),i=Ud(r._converter,e,n),o=$f(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=jd(t,this._firestore);return o="string"==typeof(e=y(e))||e instanceof Bf?od(this._dataReader,"Transaction.update",a._key,e,n,r):id(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=jd(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Xd(){if("undefined"==typeof Uint8Array)throw new hi(ci.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Yd(){if("undefined"==typeof atob)throw new hi(ci.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Qd=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Yd(),new t(jf.fromBase64String(e))},t.fromUint8Array=function(e){return Xd(),new t(jf.fromUint8Array(e))},t.prototype.toBase64=function(){return Yd(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Xd(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),$d=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Vf(t=Ef(t,Mf));var n=Lf(t),r=t._freezeSettings(),i=new zl;return Uf(n,i,new Hl(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Vf(t=Ef(t,Mf));var e=Lf(t),n=t._freezeSettings(),r=new zl;return Uf(e,r,new Kl(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new hi(ci.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new nu;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return oi(e,void 0,void 0,(function(){var e;return ai(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return oi(this,void 0,void 0,(function(){var e;return ai(this,(function(n){switch(n.label){case 0:return ou.yt()?(e=t+"main",[4,ou.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(gc(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Jd=function(){function t(t,e,n){var r=this;this._delegate=e,this.Jc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof cf||(this.Yc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Ef(t,Tf))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&vi("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return oi(e,void 0,void 0,(function(){var e,n;return ai(this,(function(r){switch(r.label){case 0:return[4,tf(t)];case 1:return e=r.sent(),[4,nf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=bi(t);return e.$r.delete(0),bh(e)}(n))]}}))}))}))}(Lf(Ef(this._delegate,Mf)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return oi(e,void 0,void 0,(function(){var e,n;return ai(this,(function(r){switch(r.label){case 0:return[4,tf(t)];case 1:return e=r.sent(),[4,nf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return oi(this,void 0,void 0,(function(){var e;return ai(this,(function(n){switch(n.label){case 0:return(e=bi(t)).$r.add(0),[4,wh(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Lf(Ef(this._delegate,Mf)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&yf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Jc.enableMultiTabIndexedDbPersistence(this):this.Jc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Jc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Yc&&(this.Yc._removeServiceInstance("firestore"),this.Yc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new nu;return t.asyncQueue.enqueueAndForget((function(){return oi(e,void 0,void 0,(function(){var e;return ai(this,(function(r){switch(r.label){case 0:return e=wl,[4,rf(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Lf(Ef(this._delegate,Mf)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Gl(e);return t.asyncQueue.enqueueAndForget((function(){return oi(n,void 0,void 0,(function(){var e;return ai(this,(function(n){switch(n.label){case 0:return e=function(t,e){bi(t).Gr.add(e),e.next()},[4,of(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return oi(n,void 0,void 0,(function(){var e;return ai(this,(function(n){switch(n.label){case 0:return e=function(t,e){bi(t).Gr.delete(e)},[4,of(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Lf(t=Ef(t,Mf)),Pf(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Yc)throw new hi(ci.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Yc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new fp(this,Df(this._delegate,t))}catch(t){throw ip(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new rp(this,xf(this._delegate,t))}catch(t){throw ip(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new cp(this,function(t,e){if(t=Ef(t,Tf),gf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new hi(ci.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Af(t,null,function(t){return new xo(Ni.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw ip(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new nu;return t.asyncQueue.enqueueAndForget((function(){return oi(n,void 0,void 0,(function(){var n;return ai(this,(function(i){switch(i.label){case 0:return[4,function(t){return Zl(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new Xl(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(Lf(t),(function(n){return e(new Wd(t,n))}))}(this._delegate,(function(n){return t(new tp(e,n))}))},t.prototype.batch=function(){var t=this;return Lf(this._delegate),new ep(new Bd(this._delegate,(function(e){return zd(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new hi(ci.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new hi(ci.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Zd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ii(e,t),e.prototype.convertBytes=function(t){return new Qd(new jf(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return rp.Xc(e,this.firestore,null)},e}(Fd),tp=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Zd(t)}return t.prototype.get=function(t){var e=this,n=dp(t);return this._delegate.get(n).then((function(t){return new sp(e._firestore,new wd(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))}))},t.prototype.set=function(t,e,n){var r=dp(t);return n?(mf("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=dp(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,si([a,e,n],i)),this},t.prototype.delete=function(t){var e=dp(t);return this._delegate.delete(e),this},t}(),ep=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=dp(t);return n?(mf("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=dp(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,si([a,e,n],i)),this},t.prototype.delete=function(t){var e=dp(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),np=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new _d(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new up(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.Zc=function(e,n){var r=t.tu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Zd(e),n),i.set(n,o)),o},t}();np.tu=new WeakMap;var rp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Zd(t)}return t.eu=function(e,n,r){if(e.length%2!=0)throw new hi(ci.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Sf(n._delegate,r,new Gi(e)))},t.Xc=function(e,n,r){return new t(n,new Sf(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new fp(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new fp(this.firestore,Df(this._delegate,t))}catch(t){throw ip(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=y(t))instanceof Sf&&Nf(this._delegate,t)},t.prototype.set=function(t,e){e=mf("DocumentReference.set",e);try{return function(t,e,n){t=Ef(t,Sf);var r=Ef(t.firestore,Mf),i=Ud(t._converter,e,n);return zd(r,[$f(Qf(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,ha.none())])}(this._delegate,t,e)}catch(t){throw ip(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Hd(this._delegate,t):Hd.apply(void 0,si([this._delegate,t,e],n))}catch(t){throw ip(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return zd(Ef((t=this._delegate).firestore,Mf),[new Ta(t._key,ha.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=op(e),i=ap(e,(function(e){return new sp(t.firestore,new wd(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))}));return Kd(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ef(t,Sf);var e=Ef(t.firestore,Mf),n=Lf(e),r=new qd(e);return function(t,e){var n=this,r=new nu;return t.asyncQueue.enqueueAndForget((function(){return oi(n,void 0,void 0,(function(){var n;return ai(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return oi(this,void 0,void 0,(function(){var r,i;return ai(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=bi(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new hi(ci.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=zh(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,ef(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new wd(e,r,t._key,n,new bd(null!==n&&n.hasLocalMutations,!0),t._converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ef(t,Sf);var e=Ef(t.firestore,Mf);return af(Lf(e),t._key,{source:"server"}).then((function(n){return Gd(e,t,n)}))}(this._delegate):function(t){t=Ef(t,Sf);var e=Ef(t.firestore,Mf);return af(Lf(e),t._key).then((function(n){return Gd(e,t,n)}))}(this._delegate)).then((function(t){return new sp(e.firestore,new wd(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(np.Zc(this.firestore,e)):this._delegate.withConverter(null))},t}();function ip(t,e,n){return t.message=t.message.replace(e,n),t}function op(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Pf(r))return r}return{}}function ap(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Pf(t[0])?t[0]:Pf(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var sp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new rp(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Id(this._delegate,t._delegate)},t}(),up=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(sp),cp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Zd(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Ad(this._delegate,function(t,e,n){var r=e,i=yd("where",t);return new Cd(i,r,n)}(e,n,r)))}catch(e){throw ip(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Ad(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=yd("orderBy",t);return new Dd(r,n)}(e,n)))}catch(e){throw ip(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Ad(this._delegate,function(t){return kf("limit",t),new xd("limit",t,"F")}(e)))}catch(e){throw ip(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Ad(this._delegate,function(t){return kf("limitToLast",t),new xd("limitToLast",t,"L")}(e)))}catch(e){throw ip(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Ad(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Nd("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw ip(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Ad(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Nd("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw ip(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Ad(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Od("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw ip(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Ad(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Od("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw ip(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Of(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ef(t,Af);var e=Ef(t.firestore,Mf),n=Lf(e),r=new qd(e);return function(t,e){var n=this,r=new nu;return t.asyncQueue.enqueueAndForget((function(){return oi(n,void 0,void 0,(function(){var n;return ai(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return oi(this,void 0,void 0,(function(){var r,i,o,a,s;return ai(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Nc(t,e,!0)];case 1:return s=u.sent(),r=new sl(e,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=zh(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,ef(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Ed(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ef(t,Af);var e=Ef(t.firestore,Mf),n=Lf(e),r=new qd(e);return sf(n,t._query,{source:"server"}).then((function(n){return new Ed(e,r,t,n)}))}(this._delegate):function(t){t=Ef(t,Af);var e=Ef(t.firestore,Mf),n=Lf(e),r=new qd(e);return Td(t._query),sf(n,t._query).then((function(n){return new Ed(e,r,t,n)}))}(this._delegate)).then((function(t){return new lp(e.firestore,new Ed(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=op(e),i=ap(e,(function(e){return new lp(t.firestore,new Ed(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Kd(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(np.Zc(this.firestore,e)):this._delegate.withConverter(null))},t}(),hp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new up(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),lp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new cp(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new up(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new hp(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new up(n._firestore,r))}))},t.prototype.isEqual=function(t){return Id(this._delegate,t._delegate)},t}(),fp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return ii(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new rp(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new rp(this.firestore,void 0===t?xf(this._delegate):xf(this._delegate,t))}catch(t){throw ip(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Ef(t.firestore,Mf),r=xf(t),i=Ud(t._converter,e);return zd(n,[$f(Qf(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,ha.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new rp(e.firestore,t)}))},e.prototype.isEqual=function(t){return Nf(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(np.Zc(this.firestore,t)):this._delegate.withConverter(null))},e}(cp);function dp(t){return Ef(t,Sf)}var pp,vp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Bf.bind.apply(Bf,si([void 0],t)))}return t.documentId=function(){return new t(Ri.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=y(t))instanceof Bf&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),gp=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new td("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Jf("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ed("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nd("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new rd("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),mp={Firestore:Jd,GeoPoint:Hf,Timestamp:Ti,Blob:Qd,Transaction:tp,WriteBatch:ep,DocumentReference:rp,DocumentSnapshot:sp,Query:cp,QueryDocumentSnapshot:up,QuerySnapshot:lp,CollectionReference:fp,FieldPath:vp,FieldValue:gp,setLogLevel:function(t){var e;e=t,li.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new k("firestore",(function(t){return function(t,e){return new Jd(t,new Mf(t,e),new $d)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},mp)))})(pp=Q),pp.registerVersion("@firebase/firestore","2.2.2");var yp=function(t,e){return(yp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},bp=function(){return(bp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function wp(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function _p(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Ep(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create,Object.create;var kp="firebasestorage.googleapis.com",Ip=function(t){function e(n,r){var i=t.call(this,Tp(n),"Firebase Storage: "+r+" ("+Tp(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}yp(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._codeEquals=function(t){return Tp(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(h);function Tp(t){return"storage/"+t}function Sp(){return new Ip("unknown","An unknown error occurred, please check the error payload for server response.")}function Ap(){return new Ip("canceled","User canceled the upload/download.")}function Cp(){return new Ip("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Dp(t){return new Ip("invalid-argument",t)}function xp(){return new Ip("app-deleted","The Firebase app was deleted.")}function Np(t){return new Ip("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Op(t,e){return new Ip("invalid-format","String does not match format '"+t+"': "+e)}function Rp(t){throw new Ip("internal-error","Internal error: "+t)}var Pp={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Mp=function(t,e){this.data=t,this.contentType=e||null};function Lp(t,e){switch(t){case Pp.RAW:return new Mp(Fp(e));case Pp.BASE64:case Pp.BASE64URL:return new Mp(Up(t,e));case Pp.DATA_URL:return new Mp((n=new Bp(e)).base64?Up(Pp.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw Op(Pp.DATA_URL,"Malformed data URL.")}return Fp(e)}(n.rest),new Bp(e).contentType)}var n;throw Sp()}function Fp(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Up(t,e){switch(t){case Pp.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Op(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Pp.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Op(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(e){throw Op(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var Vp,Bp=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Op(Pp.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(r=";base64",(n=i).length>=r.length&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)},jp={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function qp(t){switch(t){case"running":case"pausing":case"canceling":return jp.RUNNING;case"paused":return jp.PAUSED;case"success":return jp.SUCCESS;case"canceled":return jp.CANCELED;case"error":default:return jp.ERROR}}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(Vp||(Vp={}));var Hp=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Vp.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Vp.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Vp.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Rp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Rp("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Rp("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Rp("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Kp=function(){function t(){}return t.prototype.createXhrIo=function(){return new Hp},t}(),zp=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw new Ip("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var a=kp.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<s.length;u++){var c=s[u],h=c.regex.exec(e);if(h){var l=h[c.indices.bucket],f=h[c.indices.path];f||(f=""),n=new t(l,f),c.postModify(n);break}}if(null==n)throw function(t){return new Ip("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}(),Gp=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function Wp(t){return"string"==typeof t||t instanceof String}function Xp(t){return Yp()&&t instanceof Blob}function Yp(){return"undefined"!=typeof Blob}function Qp(t,e,n,r){if(r<e)throw Dp("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Dp("Invalid value for '"+t+"'. Expected "+n+" or less.")}function $p(t){return"https://"+kp+"/v0"+t}function Jp(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var Zp=function(){function t(t,e,n,r,i,o,a,s,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());!function(t){return void 0!==t}(s)?i():i(s)}catch(t){o(t)}else null!==a?((r=Sp()).serverResponse=a.getResponseText(),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?xp():Ap()):o(r=new Ip("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new tv(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,a=!1,s=0;function u(){return 2===s}var c=!1;function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function l(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new tv(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Vp.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new tv(a,n))}else{var s=n.getErrorCode()===Vp.ABORT;e(!1,new tv(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)h.call.apply(h,Ep([null,t],e));else{var r;u()||a?h.call.apply(h,Ep([null,t],e)):(i<64&&(i*=2),1===s?(s=2,r=0):r=1e3*(i+Math.random()),l(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(s=2),clearTimeout(o),l(0)):t||(s=1)))}return l(0),setTimeout((function(){a=!0,p(!0)}),r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),tv=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function ev(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function nv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ev();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Yp())return new Blob(t);throw new Ip("unsupported-environment","This browser doesn't seem to support creating Blobs")}var rv=function(){function t(t,e){var n=0,r="";Xp(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Xp(this.data_)){var r=(i=this.data_,o=e,a=n,i.webkitSlice?i.webkitSlice(o,a):i.mozSlice?i.mozSlice(o,a):i.slice?i.slice(o,a):null);return null===r?null:new t(r)}var i,o,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Yp()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(nv.apply(null,r))}var i=e.map((function(t){return Wp(t)?Lp(Pp.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function iv(t){var e;try{e=JSON.parse(t)}catch(t){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function ov(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function av(t,e){return e}var sv=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||av},uv=null;function cv(){if(uv)return uv;var t=[];t.push(new sv("bucket")),t.push(new sv("generation")),t.push(new sv("metageneration")),t.push(new sv("name","fullPath",!0));var e=new sv("name");e.xform=function(t,e){return function(t){return!Wp(t)||t.length<2?t:ov(t)}(e)},t.push(e);var n=new sv("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new sv("timeCreated")),t.push(new sv("updated")),t.push(new sv("md5Hash",null,!0)),t.push(new sv("cacheControl",null,!0)),t.push(new sv("contentDisposition",null,!0)),t.push(new sv("contentEncoding",null,!0)),t.push(new sv("contentLanguage",null,!0)),t.push(new sv("contentType",null,!0)),t.push(new sv("metadata","customMetadata",!0)),uv=t}function hv(t,e,n){var r=iv(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new zp(n,r);return e._makeStorageReference(i)}})}(r,t),r}(t,r,n)}function lv(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var fv=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function dv(t){if(!t)throw Sp()}function pv(t,e){return function(n,r){var i=hv(t,r,e);return dv(null!==i),i}}function vv(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=new Ip("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new Ip("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new Ip("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function gv(t){var e=vv(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new Ip("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function mv(t,e,n){var r=$p(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new fv(r,"GET",pv(t,n),i);return o.errorHandler=gv(e),o}function yv(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=$p(e.bucketOnlyServerUrl()),s=t.maxOperationRetryTime,u=new fv(a,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=iv(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new zp(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var h=c[u];s=t._makeStorageReference(new zp(e,h.name)),r.items.push(s)}return r}(t,e,r)}(t,e,r);return dv(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=vv(e),u}function bv(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var wv=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function _v(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){dv(!1)}return dv(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Ev=262144;var kv=function(t,e,n){if(function(t){return"function"==typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};function Iv(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var Tv=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=cv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage._getAuthToken().then((function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=bv(e,r,i),s={name:a.fullPath},u=$p(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},h=lv(a,n),l=t.maxUploadRetryTime,f=new fv(u,"POST",(function(t){var e;_v(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){dv(!1)}return dv(Wp(e)),e}),l);return f.urlParams=s,f.headers=c,f.body=h,f.errorHandler=vv(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new fv(n,"POST",(function(t){var e=_v(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){dv(!1)}n||dv(!1);var i=Number(n);return dv(!isNaN(i)),new wv(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=vv(e),o}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage._makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=Ev*this._chunkMultiplier,n=new wv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=function(t,e,n,r,i,o,a,s){var u=new wv(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Ip("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,f=l+h,d={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},p=r.slice(l,f);if(null===p)throw Cp();var v=e.maxUploadRetryTime,g=new fv(n,"POST",(function(t,n){var i,a=_v(t,["active","final"]),s=u.current+h,c=r.size();return i="final"===a?pv(e,o)(t,n):null,new wv(s,c,"final"===a,i)}),v);return g.headers=d,g.body=p.uploadData(),g.progressCallback=s||null,g.errorHandler=vv(t),g}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(e){return t._error=e,void t._transition("error")}var a=t._ref.storage._makeRequest(o,i);t._request=a,a.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){Ev*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=mv(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=bv(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+lv(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+s+"--",l=rv.getBlob(c,r,h);if(null===l)throw Cp();var f={name:u.fullPath},d=$p(o),p=t.maxUploadRetryTime,v=new fv(d,"POST",pv(t,n),p);return v.urlParams=f,v.headers=a,v.body=l.uploadData(),v.errorHandler=vv(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Ap(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=qp(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new kv(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(qp(this._state)){case jp.SUCCESS:Iv(this._resolve.bind(null,this.snapshot))();break;case jp.CANCELED:case jp.ERROR:Iv(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(qp(this._state)){case jp.RUNNING:case jp.PAUSED:t.next&&Iv(t.next.bind(t,this.snapshot))();break;case jp.SUCCESS:t.complete&&Iv(t.complete.bind(t))();break;case jp.CANCELED:case jp.ERROR:t.error&&Iv(t.error.bind(t,this._error))();break;default:t.error&&Iv(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),Sv=function(){function t(t,e){this._service=t,this._location=e instanceof zp?e:zp.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new zp(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return ov(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new zp(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Np(t)},t}();function Av(t){var e={prefixes:[],items:[]};return Cv(t,e).then((function(){return e}))}function Cv(t,e,n){return wp(this,void 0,void 0,(function(){var r,i,o;return _p(this,(function(a){switch(a.label){case 0:return[4,Dv(t,{pageToken:n})];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,Cv(t,e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Dv(t,e){return wp(this,void 0,void 0,(function(){var n,r,i;return _p(this,(function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&Qp("options.maxResults",1,1e3,e.maxResults),[4,t.storage._getAuthToken()];case 1:return n=o.sent(),r=e||{},i=yv(t.storage,t._location,"/",r.pageToken,r.maxResults),[2,t.storage._makeRequest(i,n).getPromise()]}}))}))}function xv(t){return wp(this,void 0,void 0,(function(){var e,n;return _p(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=$p(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new fv(r,"GET",function(t,e){return function(n,r){var i=hv(t,r,e);return dv(null!==i),function(t,e){var n=iv(e);if(null===n)return null;if(!Wp(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.bucket,r=t.fullPath;return $p("/b/"+i(n)+"/o/"+i(r))+Jp({alt:"media",token:e})}))[0]}(i,r)}}(t,n),i);return o.errorHandler=gv(e),o}(t.storage,t._location,cv()),[2,t.storage._makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new Ip("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function Nv(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new zp(t._location.bucket,n);return new Sv(t.storage,r)}function Ov(t){return/^[A-Za-z]+:\/\//.test(t)}function Rv(t,e){if(t instanceof Mv){var n=t;if(null==n._bucket)throw new Ip("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Sv(n,n._bucket);return null!=e?Rv(r,e):r}if(void 0!==e){if(e.includes(".."))throw Dp('`path` param cannot contain ".."');return Nv(t,e)}return t}function Pv(t,e){if(e&&Ov(e)){if(t instanceof Mv)return new Sv(t,e);throw Dp("To use ref(service, url), the first argument must be a Storage instance.")}return Rv(t,e)}var Mv=function(){function t(t,e,n,r,i){var o,a;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?zp.makeFromBucketSpec(r):null==(a=null==(o=this.app.options)?void 0:o.storageBucket)?null:zp.makeFromBucketSpec(a)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Qp("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Qp("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return wp(this,void 0,void 0,(function(){var t,e;return _p(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new Sv(this,t)},t.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new Gp(xp());var r=function(t,e,n,r,i){var o=Jp(t.urlParams),a=t.url+o,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(s,i),new Zp(a,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}();function Lv(t,e){return Pv(t,e)}var Fv,Uv,Vv=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Bv=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Vv(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Vv(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new Vv(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Vv(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),jv=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new qv(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new qv(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),qv=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return Nv(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Bv(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Tv(t,new rv(e),n)}(t,e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=Pp.RAW),this._throwIfRoot("putString");var r=Lp(e,t),i=bp({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Bv(new Tv(this._delegate,new rv(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return Av(t)}(this._delegate).then((function(e){return new jv(e,t.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return Dv(t,e)}(this._delegate,t||void 0).then((function(t){return new jv(t,e.storage)}))},t.prototype.getMetadata=function(){return function(t){return function(t){return wp(this,void 0,void 0,(function(){var e,n;return _p(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=mv(t.storage,t._location,cv()),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}(t)}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return wp(this,void 0,void 0,(function(){var n,r;return _p(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=$p(e.fullServerUrl()),o=lv(n,r),a=t.maxOperationRetryTime,s=new fv(i,"PATCH",pv(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=gv(e),s}(t.storage,t._location,e,cv()),[2,t.storage._makeRequest(r,n).getPromise()]}}))}))}(t,e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return xv(t)}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return function(t){return wp(this,void 0,void 0,(function(){var e,n;return _p(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=$p(e.fullServerUrl()),r=t.maxOperationRetryTime,i=new fv(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=gv(e),i}(t.storage,t._location),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}(t)}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Np(t)},t}(),Hv=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Ov(t))throw Dp("ref() expected a child path but got a URL, use refFromURL instead.");return new qv(Lv(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Ov(t))throw Dp("refFromURL() expected a full URL but got a child path, use ref() instead.");try{zp.makeFromUrl(t)}catch(t){throw Dp("refFromUrl() expected a valid full URL but got an invalid one.")}return new qv(Lv(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();Uv={TaskState:jp,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:Pp,Storage:Mv,Reference:qv},(Fv=Q).INTERNAL.registerComponent(new k("storage",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return new Hv(r,new Mv(r,i,new Kp,n,Q.SDK_VERSION))}),"PUBLIC").setServiceProps(Uv).setMultipleInstances(!0)),Fv.registerVersion("@firebase/storage","0.4.6"),Q.apps.lenght?Q.app():Q.initializeApp(r);const Kv=Q}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var __webpack_exports__={};(()=>{"use strict";var t=__webpack_require__(653),e=__webpack_require__(257);const n=class{constructor(){this.auth=t.Z.auth(),this.utils=new e.Z}getLoginData(){return this.auth}changeSection(t){const e=document.querySelector("#login");e.querySelectorAll("section").forEach((t=>{t.classList.remove("show")}));const n=e.querySelector("section.signup"),r=e.querySelector("section.access"),i=e.querySelector("section.forget");switch(t){case"#signup":n.classList.add("show");break;case"#forget":i.classList.add("show");break;default:r.classList.add("show")}}createAccount(t){this.auth.createUserWithEmailAndPassword(t.signup_email,t.signup_password).then((e=>{const{user:n}=e;n.updateProfile({displayName:t.signup_name}),window.location.href="index.html"})).catch((t=>{sessionStorage.setItem("error",this.utils.errorHandler(t.code)),window.location.href="login.html"}))}recoveryPassword(t){this.auth.sendPasswordResetEmail(t.forget_email).then((()=>{sessionStorage.setItem("success","As instruções para alterar sua senha foram enviados ao seu e-mail"),window.location.hash="#",this.utils.showAlert("access","success",sessionStorage.getItem("success")),sessionStorage.removeItem("success")})).catch((t=>{sessionStorage.setItem("error",this.utils.errorHandler(t.code)),window.location.hash="#",this.utils.showAlert("access","error",sessionStorage.getItem("error")),sessionStorage.removeItem("error")}))}authenticate(t){this.auth.signInWithEmailAndPassword(t.access_email,t.access_password).then((t=>{window.location.href="index.html"})).catch((t=>{this.utils.showAlert("access","error",this.utils.errorHandler(t.code)),document.querySelector(".access form button").innerHTML='<svg id="_057-check" data-name="057-check" xmlns="http://www.w3.org/2000/svg" width="78.661" height="78.661" viewBox="0 0 78.661 78.661">\n            <g id="Grupo_263" data-name="Grupo 263">\n                <g id="Grupo_262" data-name="Grupo 262">\n                <path id="Caminho_141" data-name="Caminho 141" d="M39.33,0a39.33,39.33,0,1,0,39.33,39.33A39.373,39.373,0,0,0,39.33,0Zm0,72.568A33.237,33.237,0,1,1,72.568,39.33,33.276,33.276,0,0,1,39.33,72.568Z" fill="#fff"/>\n                </g>\n            </g>\n            <g id="Grupo_265" data-name="Grupo 265" transform="translate(20.292 24.862)">\n                <g id="Grupo_264" data-name="Grupo 264">\n                <path id="Caminho_142" data-name="Caminho 142" d="M169.162,162.614a3.048,3.048,0,0,0-4.3.207l-18.584,20.463-8.978-9.127a3.046,3.046,0,0,0-4.344,4.271l11.238,11.424a3.043,3.043,0,0,0,2.172.911.365.365,0,0,1,.058,0,3.048,3.048,0,0,0,2.2-1l20.75-22.849A3.048,3.048,0,0,0,169.162,162.614Z" transform="translate(-132.079 -161.824)" fill="#fff"/>\n                </g>\n            </g>\n            </svg>\n            <span>enviar</span>'}))}signout(){this.auth.signOut().then((()=>{window.location.href="/login.html"}))}};var r=__webpack_require__(627),i=__webpack_require__(366),o=__webpack_require__(129),a=__webpack_require__.n(o);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function v(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}function m(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}function y(t,e,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=m(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function b(t,e,n,r){return(b="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var i,o=m(t,e);if(o){if((i=Object.getOwnPropertyDescriptor(o,e)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,e)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,e,i)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function w(t,e,n,r,i){if(!b(t,e,n,r||t)&&i)throw new Error("failed to set property");return n}function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function k(t){return"string"==typeof t||t instanceof String}document.querySelectorAll("main#login").forEach((t=>{const r=new n,i=new e.Z;window.addEventListener("load",(()=>{r.changeSection(window.location.hash)})),window.addEventListener("hashchange",(()=>{r.changeSection(window.location.hash)})),r.getLoginData().onAuthStateChanged((e=>{if(e)window.location.href="/index.html";else{const e=t.querySelector(".signup form");e&&(e.querySelectorAll("input").forEach((t=>{t.addEventListener("focus",(t=>{t.target.closest("div").classList.add("input-focus")})),t.addEventListener("blur",(t=>{t.target.closest("div").classList.remove("input-focus")}))})),e.addEventListener("submit",(t=>{t.preventDefault();const n=e.querySelector("button"),o=e.querySelectorAll(".field");e.querySelectorAll("input").forEach((t=>{t.disabled=!0})),o.forEach((t=>{t.classList.add("loading")})),n.disabled=!0,n.innerHTML='<?xml version="1.0" encoding="utf-8"?>\n                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; display: block; shape-rendering: auto;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">\n                    <circle cx="50" cy="50" fill="none" stroke="#fff" stroke-width="10" r="35" stroke-dasharray="164.93361431346415 56.97787143782138">\n                    <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform>\n                    </circle>',r.createAccount(i.getFormValues(e))})));const n=t.querySelector(".forget form");n&&n.addEventListener("submit",(t=>{t.preventDefault();const e=n.querySelector("button");e.disabled=!0,e.innerHTML='<?xml version="1.0" encoding="utf-8"?>\n                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; display: block; shape-rendering: auto;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">\n                    <circle cx="50" cy="50" fill="none" stroke="#fff" stroke-width="10" r="35" stroke-dasharray="164.93361431346415 56.97787143782138">\n                    <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform>\n                    </circle>',r.recoveryPassword(i.getFormValues(n))}));const o=t.querySelector(".access form");if(o){sessionStorage.getItem("success")&&(i.showAlert("access","success",sessionStorage.getItem("success")),sessionStorage.removeItem("success")),sessionStorage.getItem("error")&&(i.showAlert("access","error",sessionStorage.getItem("error")),sessionStorage.removeItem("error"));const t=o.querySelector("button");o.addEventListener("submit",(e=>{e.preventDefault(),t.disabled=!0,t.innerHTML='<?xml version="1.0" encoding="utf-8"?>\n                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; display: block; shape-rendering: auto;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">\n                    <circle cx="50" cy="50" fill="none" stroke="#fff" stroke-width="10" r="35" stroke-dasharray="164.93361431346415 56.97787143782138">\n                    <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform>\n                    </circle>',r.authenticate(i.getFormValues(o))})),o.querySelectorAll("input").forEach((e=>{console.log(e),e.addEventListener("focus",(()=>{t.disabled=!1}))}))}}}))}));var I="NONE",T="LEFT",S="FORCE_LEFT",A="RIGHT",C="FORCE_RIGHT";function D(t){switch(t){case T:return S;case A:return C;default:return t}}function x(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function N(t,e){if(e===t)return!0;var n,r=Array.isArray(e),i=Array.isArray(t);if(r&&i){if(e.length!=t.length)return!1;for(n=0;n<e.length;n++)if(!N(e[n],t[n]))return!1;return!0}if(r!=i)return!1;if(e&&t&&"object"===s(e)&&"object"===s(t)){var o=e instanceof Date,a=t instanceof Date;if(o&&a)return e.getTime()==t.getTime();if(o!=a)return!1;var u=e instanceof RegExp,c=t instanceof RegExp;if(u&&c)return e.toString()==t.toString();if(u!=c)return!1;var h=Object.keys(e);for(n=0;n<h.length;n++)if(!Object.prototype.hasOwnProperty.call(t,h[n]))return!1;for(n=0;n<h.length;n++)if(!N(t[h[n]],e[h[n]]))return!1;return!0}return!(!e||!t||"function"!=typeof e||"function"!=typeof t)&&e.toString()===t.toString()}const O=function(){function t(e,n,r,i){for(u(this,t),this.value=e,this.cursorPos=n,this.oldValue=r,this.oldSelection=i;this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start}return h(t,[{key:"startChangePos",get:function(){return Math.min(this.cursorPos,this.oldSelection.start)}},{key:"insertedCount",get:function(){return this.cursorPos-this.startChangePos}},{key:"inserted",get:function(){return this.value.substr(this.startChangePos,this.insertedCount)}},{key:"removedCount",get:function(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}},{key:"removed",get:function(){return this.oldValue.substr(this.startChangePos,this.removedCount)}},{key:"head",get:function(){return this.value.substring(0,this.startChangePos)}},{key:"tail",get:function(){return this.value.substring(this.startChangePos+this.insertedCount)}},{key:"removeDirection",get:function(){return!this.removedCount||this.insertedCount?I:this.oldSelection.end===this.cursorPos||this.oldSelection.start===this.cursorPos?A:T}}]),t}(),R=function(){function t(e){u(this,t),Object.assign(this,{inserted:"",rawInserted:"",skip:!1,tailShift:0},e)}return h(t,[{key:"aggregate",value:function(t){return this.rawInserted+=t.rawInserted,this.skip=this.skip||t.skip,this.inserted+=t.inserted,this.tailShift+=t.tailShift,this}},{key:"offset",get:function(){return this.tailShift+this.inserted.length}}]),t}(),P=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;u(this,t),this.value=e,this.from=n,this.stop=r}return h(t,[{key:"toString",value:function(){return this.value}},{key:"extend",value:function(t){this.value+=String(t)}},{key:"appendTo",value:function(t){return t.append(this.toString(),{tail:!0}).aggregate(t._appendPlaceholder())}},{key:"state",get:function(){return{value:this.value,from:this.from,stop:this.stop}},set:function(t){Object.assign(this,t)}},{key:"shiftBefore",value:function(t){if(this.from>=t||!this.value.length)return"";var e=this.value[0];return this.value=this.value.slice(1),e}}]),t}(),M=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new t.InputMask(e,n)};var L=function(){function t(e){u(this,t),this._value="",this._update(Object.assign({},t.DEFAULTS,e)),this.isInitialized=!0}return h(t,[{key:"updateOptions",value:function(t){Object.keys(t).length&&this.withValueRefresh(this._update.bind(this,t))}},{key:"_update",value:function(t){Object.assign(this,t)}},{key:"state",get:function(){return{_value:this.value}},set:function(t){this._value=t._value}},{key:"reset",value:function(){this._value=""}},{key:"value",get:function(){return this._value},set:function(t){this.resolve(t)}},{key:"resolve",value:function(t){return this.reset(),this.append(t,{input:!0},""),this.doCommit(),this.value}},{key:"unmaskedValue",get:function(){return this.value},set:function(t){this.reset(),this.append(t,{},""),this.doCommit()}},{key:"typedValue",get:function(){return this.doParse(this.value)},set:function(t){this.value=this.doFormat(t)}},{key:"rawInputValue",get:function(){return this.extractInput(0,this.value.length,{raw:!0})},set:function(t){this.reset(),this.append(t,{raw:!0},""),this.doCommit()}},{key:"isComplete",get:function(){return!0}},{key:"nearestInputPos",value:function(t,e){return t}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return this.value.slice(t,e)}},{key:"extractTail",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return new P(this.extractInput(t,e),t)}},{key:"appendTail",value:function(t){return k(t)&&(t=new P(String(t))),t.appendTo(this)}},{key:"_appendCharRaw",value:function(t){return t?(this._value+=t,new R({inserted:t,rawInserted:t})):new R}},{key:"_appendChar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=this.state,i=this._appendCharRaw(this.doPrepare(t,e),e);if(i.inserted){var o,a=!1!==this.doValidate(e);if(a&&null!=n){var s=this.state;this.overwrite&&(o=n.state,n.shiftBefore(this.value.length));var u=this.appendTail(n);(a=u.rawInserted===n.toString())&&u.inserted&&(this.state=s)}a||(i=new R,this.state=r,n&&o&&(n.state=o))}return i}},{key:"_appendPlaceholder",value:function(){return new R}},{key:"append",value:function(t,e,n){if(!k(t))throw new Error("value should be string");var r=new R,i=k(n)?new P(String(n)):n;e&&e.tail&&(e._beforeTailState=this.state);for(var o=0;o<t.length;++o)r.aggregate(this._appendChar(t[o],e,i));return null!=i&&(r.tailShift+=this.appendTail(i).tailShift),r}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return this._value=this.value.slice(0,t)+this.value.slice(e),new R}},{key:"withValueRefresh",value:function(t){if(this._refreshing||!this.isInitialized)return t();this._refreshing=!0;var e=this.rawInputValue,n=this.value,r=t();return this.rawInputValue=e,this.value&&this.value!==n&&0===n.indexOf(this.value)&&this.append(n.slice(this.value.length),{},""),delete this._refreshing,r}},{key:"runIsolated",value:function(t){if(this._isolated||!this.isInitialized)return t(this);this._isolated=!0;var e=this.state,n=t(this);return this.state=e,delete this._isolated,n}},{key:"doPrepare",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.prepare?this.prepare(t,this,e):t}},{key:"doValidate",value:function(t){return(!this.validate||this.validate(this.value,this,t))&&(!this.parent||this.parent.doValidate(t))}},{key:"doCommit",value:function(){this.commit&&this.commit(this.value,this)}},{key:"doFormat",value:function(t){return this.format?this.format(t,this):t}},{key:"doParse",value:function(t){return this.parse?this.parse(t,this):t}},{key:"splice",value:function(t,e,n,r){var i=t+e,o=this.extractTail(i),a=this.nearestInputPos(t,r);return new R({tailShift:a-t}).aggregate(this.remove(a)).aggregate(this.append(n,{input:!0},o))}}]),t}();L.DEFAULTS={format:function(t){return t},parse:function(t){return t}},M.Masked=L;const F=L;function U(t){if(null==t)throw new Error("mask property should be defined");return t instanceof RegExp?M.MaskedRegExp:k(t)?M.MaskedPattern:t instanceof Date||t===Date?M.MaskedDate:t instanceof Number||"number"==typeof t||t===Number?M.MaskedNumber:Array.isArray(t)||t===Array?M.MaskedDynamic:M.Masked&&t.prototype instanceof M.Masked?t:t instanceof Function?M.MaskedFunction:t instanceof M.Masked?t.constructor:(console.warn("Mask not found for mask",t),M.Masked)}function V(t){if(M.Masked&&t instanceof M.Masked)return t;var e=(t=Object.assign({},t)).mask;if(M.Masked&&e instanceof M.Masked)return e;var n=U(e);if(!n)throw new Error("Masked class is not found for provided mask, appropriate module needs to be import manually before creating mask.");return new n(t)}M.createMask=V;const B=V;var j={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./};const q=function(){function t(e){u(this,t);var n=e.mask,r=p(e,["mask"]);this.masked=B({mask:n}),Object.assign(this,r)}return h(t,[{key:"reset",value:function(){this._isFilled=!1,this.masked.reset()}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return 0===t&&e>=1?(this._isFilled=!1,this.masked.remove(t,e)):new R}},{key:"value",get:function(){return this.masked.value||(this._isFilled&&!this.isOptional?this.placeholderChar:"")}},{key:"unmaskedValue",get:function(){return this.masked.unmaskedValue}},{key:"isComplete",get:function(){return Boolean(this.masked.value)||this.isOptional}},{key:"_appendChar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._isFilled)return new R;var n=this.masked.state,r=this.masked._appendChar(t,e);return r.inserted&&!1===this.doValidate(e)&&(r.inserted=r.rawInserted="",this.masked.state=n),r.inserted||this.isOptional||this.lazy||e.input||(r.inserted=this.placeholderChar),r.skip=!r.inserted&&!this.isOptional,this._isFilled=Boolean(r.inserted),r}},{key:"append",value:function(){var t;return(t=this.masked).append.apply(t,arguments)}},{key:"_appendPlaceholder",value:function(){var t=new R;return this._isFilled||this.isOptional||(this._isFilled=!0,t.inserted=this.placeholderChar),t}},{key:"extractTail",value:function(){var t;return(t=this.masked).extractTail.apply(t,arguments)}},{key:"appendTail",value:function(){var t;return(t=this.masked).appendTail.apply(t,arguments)}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=arguments.length>2?arguments[2]:void 0;return this.masked.extractInput(t,e,n)}},{key:"nearestInputPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I,n=0,r=this.value.length,i=Math.min(Math.max(t,n),r);switch(e){case T:case S:return this.isComplete?i:n;case A:case C:return this.isComplete?i:r;case I:default:return i}}},{key:"doValidate",value:function(){var t,e;return(t=this.masked).doValidate.apply(t,arguments)&&(!this.parent||(e=this.parent).doValidate.apply(e,arguments))}},{key:"doCommit",value:function(){this.masked.doCommit()}},{key:"state",get:function(){return{masked:this.masked.state,_isFilled:this._isFilled}},set:function(t){this.masked.state=t.masked,this._isFilled=t._isFilled}}]),t}(),H=function(){function t(e){u(this,t),Object.assign(this,e),this._value=""}return h(t,[{key:"value",get:function(){return this._value}},{key:"unmaskedValue",get:function(){return this.isUnmasking?this.value:""}},{key:"reset",value:function(){this._isRawInput=!1,this._value=""}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._value.length;return this._value=this._value.slice(0,t)+this._value.slice(e),this._value||(this._isRawInput=!1),new R}},{key:"nearestInputPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I,n=0,r=this._value.length;switch(e){case T:case S:return n;case I:case A:case C:default:return r}}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._value.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.raw&&this._isRawInput&&this._value.slice(t,e)||""}},{key:"isComplete",get:function(){return!0}},{key:"_appendChar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new R;if(this._value)return n;var r=this.char===t[0],i=r&&(this.isUnmasking||e.input||e.raw)&&!e.tail;return i&&(n.rawInserted=this.char),this._value=n.inserted=this.char,this._isRawInput=i&&(e.raw||e.input),n}},{key:"_appendPlaceholder",value:function(){var t=new R;return this._value||(this._value=t.inserted=this.char),t}},{key:"extractTail",value:function(){return arguments.length>1&&void 0!==arguments[1]||this.value.length,new P("")}},{key:"appendTail",value:function(t){return k(t)&&(t=new P(String(t))),t.appendTo(this)}},{key:"append",value:function(t,e,n){var r=this._appendChar(t,e);return null!=n&&(r.tailShift+=this.appendTail(n).tailShift),r}},{key:"doCommit",value:function(){}},{key:"state",get:function(){return{_value:this._value,_isRawInput:this._isRawInput}},set:function(t){Object.assign(this,t)}}]),t}(),K=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u(this,t),this.chunks=e,this.from=n}return h(t,[{key:"toString",value:function(){return this.chunks.map(String).join("")}},{key:"extend",value:function(e){if(String(e)){k(e)&&(e=new P(String(e)));var n=this.chunks[this.chunks.length-1],r=n&&(n.stop===e.stop||null==e.stop)&&e.from===n.from+n.toString().length;if(e instanceof P)r?n.extend(e.toString()):this.chunks.push(e);else if(e instanceof t){if(null==e.stop)for(var i;e.chunks.length&&null==e.chunks[0].stop;)(i=e.chunks.shift()).from+=e.from,this.extend(i);e.toString()&&(e.stop=e.blockIndex,this.chunks.push(e))}}}},{key:"appendTo",value:function(e){if(!(e instanceof M.MaskedPattern))return new P(this.toString()).appendTo(e);for(var n=new R,r=0;r<this.chunks.length&&!n.skip;++r){var i=this.chunks[r],o=e._mapPosToBlock(e.value.length),a=i.stop,s=void 0;if(null!=a&&(!o||o.index<=a)&&((i instanceof t||e._stops.indexOf(a)>=0)&&n.aggregate(e._appendPlaceholder(a)),s=i instanceof t&&e._blocks[a]),s){var u=s.appendTail(i);u.skip=!1,n.aggregate(u),e._value+=u.inserted;var c=i.toString().slice(u.rawInserted.length);c&&n.aggregate(e.append(c,{tail:!0}))}else n.aggregate(e.append(i.toString(),{tail:!0}))}return n}},{key:"state",get:function(){return{chunks:this.chunks.map((function(t){return t.state})),from:this.from,stop:this.stop,blockIndex:this.blockIndex}},set:function(e){var n=e.chunks,r=p(e,["chunks"]);Object.assign(this,r),this.chunks=n.map((function(e){var n="chunks"in e?new t:new P;return n.state=e,n}))}},{key:"shiftBefore",value:function(t){if(this.from>=t||!this.chunks.length)return"";for(var e=t-this.from,n=0;n<this.chunks.length;){var r=this.chunks[n],i=r.shiftBefore(e);if(r.toString()){if(!i)break;++n}else this.chunks.splice(n,1);if(i)return i}return""}}]),t}();M.MaskedRegExp=function(t){l(n,t);var e=g(n);function n(){return u(this,n),e.apply(this,arguments)}return h(n,[{key:"_update",value:function(t){t.mask&&(t.validate=function(e){return e.search(t.mask)>=0}),y(f(n.prototype),"_update",this).call(this,t)}}]),n}(F);var z=function(t){l(n,t);var e=g(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u(this,n),t.definitions=Object.assign({},j,t.definitions),e.call(this,Object.assign({},n.DEFAULTS,t))}return h(n,[{key:"_update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.definitions=Object.assign({},this.definitions,t.definitions),y(f(n.prototype),"_update",this).call(this,t),this._rebuildMask()}},{key:"_rebuildMask",value:function(){var t=this,e=this.definitions;this._blocks=[],this._stops=[],this._maskedBlocks={};var r=this.mask;if(r&&e)for(var i=!1,o=!1,a=0;a<r.length;++a)if(!this.blocks||"continue"!==function(){var e=r.slice(a),n=Object.keys(t.blocks).filter((function(t){return 0===e.indexOf(t)}));n.sort((function(t,e){return e.length-t.length}));var i=n[0];if(i){var o=B(Object.assign({parent:t,lazy:t.lazy,placeholderChar:t.placeholderChar,overwrite:t.overwrite},t.blocks[i]));return o&&(t._blocks.push(o),t._maskedBlocks[i]||(t._maskedBlocks[i]=[]),t._maskedBlocks[i].push(t._blocks.length-1)),a+=i.length-1,"continue"}}()){var s=r[a],u=s in e;if(s!==n.STOP_CHAR)if("{"!==s&&"}"!==s)if("["!==s&&"]"!==s){if(s===n.ESCAPE_CHAR){if(++a,!(s=r[a]))break;u=!1}var c=u?new q({parent:this,lazy:this.lazy,placeholderChar:this.placeholderChar,mask:e[s],isOptional:o}):new H({char:s,isUnmasking:i});this._blocks.push(c)}else o=!o;else i=!i;else this._stops.push(this._blocks.length)}}},{key:"state",get:function(){return Object.assign({},y(f(n.prototype),"state",this),{_blocks:this._blocks.map((function(t){return t.state}))})},set:function(t){var e=t._blocks,r=p(t,["_blocks"]);this._blocks.forEach((function(t,n){return t.state=e[n]})),w(f(n.prototype),"state",r,this,!0)}},{key:"reset",value:function(){y(f(n.prototype),"reset",this).call(this),this._blocks.forEach((function(t){return t.reset()}))}},{key:"isComplete",get:function(){return this._blocks.every((function(t){return t.isComplete}))}},{key:"doCommit",value:function(){this._blocks.forEach((function(t){return t.doCommit()})),y(f(n.prototype),"doCommit",this).call(this)}},{key:"unmaskedValue",get:function(){return this._blocks.reduce((function(t,e){return t+e.unmaskedValue}),"")},set:function(t){w(f(n.prototype),"unmaskedValue",t,this,!0)}},{key:"value",get:function(){return this._blocks.reduce((function(t,e){return t+e.value}),"")},set:function(t){w(f(n.prototype),"value",t,this,!0)}},{key:"appendTail",value:function(t){return y(f(n.prototype),"appendTail",this).call(this,t).aggregate(this._appendPlaceholder())}},{key:"_appendCharRaw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._mapPosToBlock(this.value.length),r=new R;if(!n)return r;for(var i=n.index;;++i){var o=this._blocks[i];if(!o)break;var a=o._appendChar(t,e),s=a.skip;if(r.aggregate(a),s||a.rawInserted)break}return r}},{key:"extractTail",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,r=new K;return e===n||this._forEachBlocksInRange(e,n,(function(e,n,i,o){var a=e.extractTail(i,o);a.stop=t._findStopBefore(n),a.from=t._blockStartPos(n),a instanceof K&&(a.blockIndex=n),r.extend(a)})),r}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t===e)return"";var r="";return this._forEachBlocksInRange(t,e,(function(t,e,i,o){r+=t.extractInput(i,o,n)})),r}},{key:"_findStopBefore",value:function(t){for(var e,n=0;n<this._stops.length;++n){var r=this._stops[n];if(!(r<=t))break;e=r}return e}},{key:"_appendPlaceholder",value:function(t){var e=this,n=new R;if(this.lazy&&null==t)return n;var r=this._mapPosToBlock(this.value.length);if(!r)return n;var i=r.index,o=null!=t?t:this._blocks.length;return this._blocks.slice(i,o).forEach((function(r){if(!r.lazy||null!=t){var i=null!=r._blocks?[r._blocks.length]:[],o=r._appendPlaceholder.apply(r,i);e._value+=o.inserted,n.aggregate(o)}})),n}},{key:"_mapPosToBlock",value:function(t){for(var e="",n=0;n<this._blocks.length;++n){var r=this._blocks[n],i=e.length;if(t<=(e+=r.value).length)return{index:n,offset:t-i}}}},{key:"_blockStartPos",value:function(t){return this._blocks.slice(0,t).reduce((function(t,e){return t+e.value.length}),0)}},{key:"_forEachBlocksInRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=arguments.length>2?arguments[2]:void 0,r=this._mapPosToBlock(t);if(r){var i=this._mapPosToBlock(e),o=i&&r.index===i.index,a=r.offset,s=i&&o?i.offset:this._blocks[r.index].value.length;if(n(this._blocks[r.index],r.index,a,s),i&&!o){for(var u=r.index+1;u<i.index;++u)n(this._blocks[u],u,0,this._blocks[u].value.length);n(this._blocks[i.index],i.index,0,i.offset)}}}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,r=y(f(n.prototype),"remove",this).call(this,t,e);return this._forEachBlocksInRange(t,e,(function(t,e,n,i){r.aggregate(t.remove(n,i))})),r}},{key:"nearestInputPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I,n=this._mapPosToBlock(t)||{index:0,offset:0},r=n.offset,i=n.index,o=this._blocks[i];if(!o)return t;var a=r;0!==a&&a<o.value.length&&(a=o.nearestInputPos(r,D(e)));var s=a===o.value.length,u=0===a;if(!u&&!s)return this._blockStartPos(i)+a;var c=s?i+1:i;if(e===I){if(c>0){var h=c-1,l=this._blocks[h],f=l.nearestInputPos(0,I);if(!l.value.length||f!==l.value.length)return this._blockStartPos(c)}for(var d=c,p=d;p<this._blocks.length;++p){var v=this._blocks[p],g=v.nearestInputPos(0,I);if(!v.value.length||g!==v.value.length)return this._blockStartPos(p)+g}for(var m=c-1;m>=0;--m){var y=this._blocks[m],b=y.nearestInputPos(0,I);if(!y.value.length||b!==y.value.length)return this._blockStartPos(m)+y.value.length}return t}if(e===T||e===S){for(var w,_=c;_<this._blocks.length;++_)if(this._blocks[_].value){w=_;break}if(null!=w){var E=this._blocks[w],k=E.nearestInputPos(0,A);if(0===k&&E.unmaskedValue.length)return this._blockStartPos(w)+k}for(var x,N=-1,O=c-1;O>=0;--O){var R=this._blocks[O],P=R.nearestInputPos(R.value.length,S);if(R.value&&0===P||(x=O),0!==P){if(P!==R.value.length)return this._blockStartPos(O)+P;N=O;break}}if(e===T)for(var M=N+1;M<=Math.min(c,this._blocks.length-1);++M){var L=this._blocks[M],F=L.nearestInputPos(0,I),U=this._blockStartPos(M)+F;if(U>t)break;if(F!==L.value.length)return U}if(N>=0)return this._blockStartPos(N)+this._blocks[N].value.length;if(e===S||this.lazy&&!this.extractInput()&&!G(this._blocks[c]))return 0;if(null!=x)return this._blockStartPos(x);for(var V=c;V<this._blocks.length;++V){var B=this._blocks[V],j=B.nearestInputPos(0,I);if(!B.value.length||j!==B.value.length)return this._blockStartPos(V)+j}return 0}if(e===A||e===C){for(var q,H,K=c;K<this._blocks.length;++K){var z=this._blocks[K],W=z.nearestInputPos(0,I);if(W!==z.value.length){H=this._blockStartPos(K)+W,q=K;break}}if(null!=q&&null!=H){for(var X=q;X<this._blocks.length;++X){var Y=this._blocks[X],Q=Y.nearestInputPos(0,C);if(Q!==Y.value.length)return this._blockStartPos(X)+Q}return e===C?this.value.length:H}for(var $=Math.min(c,this._blocks.length-1);$>=0;--$){var J=this._blocks[$],Z=J.nearestInputPos(J.value.length,T);if(0!==Z){var tt=this._blockStartPos($)+Z;if(tt>=t)return tt;break}}}return t}},{key:"maskedBlock",value:function(t){return this.maskedBlocks(t)[0]}},{key:"maskedBlocks",value:function(t){var e=this,n=this._maskedBlocks[t];return n?n.map((function(t){return e._blocks[t]})):[]}}]),n}(F);function G(t){if(!t)return!1;var e=t.value;return!e||t.nearestInputPos(0,I)!==e.length}z.DEFAULTS={lazy:!0,placeholderChar:"_"},z.STOP_CHAR="`",z.ESCAPE_CHAR="\\",z.InputDefinition=q,z.FixedDefinition=H,M.MaskedPattern=z;const W=z;var X=function(t){l(n,t);var e=g(n);function n(){return u(this,n),e.apply(this,arguments)}return h(n,[{key:"_matchFrom",get:function(){return this.maxLength-String(this.from).length}},{key:"_update",value:function(t){t=Object.assign({to:this.to||0,from:this.from||0},t);var e=String(t.to).length;null!=t.maxLength&&(e=Math.max(e,t.maxLength)),t.maxLength=e;for(var r=String(t.from).padStart(e,"0"),i=String(t.to).padStart(e,"0"),o=0;o<i.length&&i[o]===r[o];)++o;t.mask=i.slice(0,o).replace(/0/g,"\\0")+"0".repeat(e-o),y(f(n.prototype),"_update",this).call(this,t)}},{key:"isComplete",get:function(){return y(f(n.prototype),"isComplete",this)&&Boolean(this.value)}},{key:"boundaries",value:function(t){var e="",n="",r=_(t.match(/^(\D*)(\d*)(\D*)/)||[],3),i=r[1],o=r[2];return o&&(e="0".repeat(i.length)+o,n="9".repeat(i.length)+o),[e=e.padEnd(this.maxLength,"0"),n=n.padEnd(this.maxLength,"9")]}},{key:"doPrepare",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=y(f(n.prototype),"doPrepare",this).call(this,t,e).replace(/\D/g,""),!this.autofix)return t;for(var r=String(this.from).padStart(this.maxLength,"0"),i=String(this.to).padStart(this.maxLength,"0"),o=this.value,a="",s=0;s<t.length;++s){var u=o+a+t[s],c=this.boundaries(u),h=_(c,2),l=h[0],d=h[1];Number(d)<this.from?a+=r[u.length-1]:Number(l)>this.to?a+=i[u.length-1]:a+=t[s]}return a}},{key:"doValidate",value:function(){var t,e=this.value,r=e.search(/[^0]/);if(-1===r&&e.length<=this._matchFrom)return!0;for(var i=this.boundaries(e),o=_(i,2),a=o[0],s=o[1],u=arguments.length,c=new Array(u),h=0;h<u;h++)c[h]=arguments[h];return this.from<=Number(s)&&Number(a)<=this.to&&(t=y(f(n.prototype),"doValidate",this)).call.apply(t,[this].concat(c))}}]),n}(W);M.MaskedRange=X;const Y=X;var Q=function(t){l(n,t);var e=g(n);function n(t){return u(this,n),e.call(this,Object.assign({},n.DEFAULTS,t))}return h(n,[{key:"_update",value:function(t){t.mask===Date&&delete t.mask,t.pattern&&(t.mask=t.pattern);var e=t.blocks;t.blocks=Object.assign({},n.GET_DEFAULT_BLOCKS()),t.min&&(t.blocks.Y.from=t.min.getFullYear()),t.max&&(t.blocks.Y.to=t.max.getFullYear()),t.min&&t.max&&t.blocks.Y.from===t.blocks.Y.to&&(t.blocks.m.from=t.min.getMonth()+1,t.blocks.m.to=t.max.getMonth()+1,t.blocks.m.from===t.blocks.m.to&&(t.blocks.d.from=t.min.getDate(),t.blocks.d.to=t.max.getDate())),Object.assign(t.blocks,e),Object.keys(t.blocks).forEach((function(e){var n=t.blocks[e];"autofix"in n||(n.autofix=t.autofix)})),y(f(n.prototype),"_update",this).call(this,t)}},{key:"doValidate",value:function(){for(var t,e=this.date,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=y(f(n.prototype),"doValidate",this)).call.apply(t,[this].concat(i))&&(!this.isComplete||this.isDateExist(this.value)&&null!=e&&(null==this.min||this.min<=e)&&(null==this.max||e<=this.max))}},{key:"isDateExist",value:function(t){return this.format(this.parse(t,this),this).indexOf(t)>=0}},{key:"date",get:function(){return this.typedValue},set:function(t){this.typedValue=t}},{key:"typedValue",get:function(){return this.isComplete?y(f(n.prototype),"typedValue",this):null},set:function(t){w(f(n.prototype),"typedValue",t,this,!0)}}]),n}(W);Q.DEFAULTS={pattern:"d{.}`m{.}`Y",format:function(t){return[String(t.getDate()).padStart(2,"0"),String(t.getMonth()+1).padStart(2,"0"),t.getFullYear()].join(".")},parse:function(t){var e=_(t.split("."),3),n=e[0],r=e[1],i=e[2];return new Date(i,r-1,n)}},Q.GET_DEFAULT_BLOCKS=function(){return{d:{mask:Y,from:1,to:31,maxLength:2},m:{mask:Y,from:1,to:12,maxLength:2},Y:{mask:Y,from:1900,to:9999}}},M.MaskedDate=Q;const $=Q;var J=function(){function t(){u(this,t)}return h(t,[{key:"selectionStart",get:function(){var t;try{t=this._unsafeSelectionStart}catch(t){}return null!=t?t:this.value.length}},{key:"selectionEnd",get:function(){var t;try{t=this._unsafeSelectionEnd}catch(t){}return null!=t?t:this.value.length}},{key:"select",value:function(t,e){if(null!=t&&null!=e&&(t!==this.selectionStart||e!==this.selectionEnd))try{this._unsafeSelect(t,e)}catch(t){}}},{key:"_unsafeSelect",value:function(t,e){}},{key:"isActive",get:function(){return!1}},{key:"bindEvents",value:function(t){}},{key:"unbindEvents",value:function(){}}]),t}();M.MaskElement=J;const Z=J;var tt=function(t){l(n,t);var e=g(n);function n(t){var r;return u(this,n),(r=e.call(this)).input=t,r._handlers={},r}return h(n,[{key:"rootElement",get:function(){return this.input.getRootNode?this.input.getRootNode():document}},{key:"isActive",get:function(){return this.input===this.rootElement.activeElement}},{key:"_unsafeSelectionStart",get:function(){return this.input.selectionStart}},{key:"_unsafeSelectionEnd",get:function(){return this.input.selectionEnd}},{key:"_unsafeSelect",value:function(t,e){this.input.setSelectionRange(t,e)}},{key:"value",get:function(){return this.input.value},set:function(t){this.input.value=t}},{key:"bindEvents",value:function(t){var e=this;Object.keys(t).forEach((function(r){return e._toggleEventHandler(n.EVENTS_MAP[r],t[r])}))}},{key:"unbindEvents",value:function(){var t=this;Object.keys(this._handlers).forEach((function(e){return t._toggleEventHandler(e)}))}},{key:"_toggleEventHandler",value:function(t,e){this._handlers[t]&&(this.input.removeEventListener(t,this._handlers[t]),delete this._handlers[t]),e&&(this.input.addEventListener(t,e),this._handlers[t]=e)}}]),n}(Z);tt.EVENTS_MAP={selectionChange:"keydown",input:"input",drop:"drop",click:"click",focus:"focus",commit:"blur"},M.HTMLMaskElement=tt;const et=tt;var nt=function(t){l(n,t);var e=g(n);function n(){return u(this,n),e.apply(this,arguments)}return h(n,[{key:"_unsafeSelectionStart",get:function(){var t=this.rootElement,e=t.getSelection&&t.getSelection();return e&&e.anchorOffset}},{key:"_unsafeSelectionEnd",get:function(){var t=this.rootElement,e=t.getSelection&&t.getSelection();return e&&this._unsafeSelectionStart+String(e).length}},{key:"_unsafeSelect",value:function(t,e){if(this.rootElement.createRange){var n=this.rootElement.createRange();n.setStart(this.input.firstChild||this.input,t),n.setEnd(this.input.lastChild||this.input,e);var r=this.rootElement,i=r.getSelection&&r.getSelection();i&&(i.removeAllRanges(),i.addRange(n))}}},{key:"value",get:function(){return this.input.textContent},set:function(t){this.input.textContent=t}}]),n}(et);M.HTMLContenteditableMaskElement=nt;const rt=nt;M.InputMask=function(){function t(e,n){u(this,t),this.el=e instanceof Z?e:e.isContentEditable&&"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName?new rt(e):new et(e),this.masked=B(n),this._listeners={},this._value="",this._unmaskedValue="",this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}return h(t,[{key:"mask",get:function(){return this.masked.mask},set:function(t){if(!this.maskEquals(t))if(t instanceof M.Masked||this.masked.constructor!==U(t)){var e=B({mask:t});e.unmaskedValue=this.masked.unmaskedValue,this.masked=e}else this.masked.updateOptions({mask:t})}},{key:"maskEquals",value:function(t){return null==t||t===this.masked.mask||t===Date&&this.masked instanceof $}},{key:"value",get:function(){return this._value},set:function(t){this.masked.value=t,this.updateControl(),this.alignCursor()}},{key:"unmaskedValue",get:function(){return this._unmaskedValue},set:function(t){this.masked.unmaskedValue=t,this.updateControl(),this.alignCursor()}},{key:"typedValue",get:function(){return this.masked.typedValue},set:function(t){this.masked.typedValue=t,this.updateControl(),this.alignCursor()}},{key:"_bindEvents",value:function(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange})}},{key:"_unbindEvents",value:function(){this.el&&this.el.unbindEvents()}},{key:"_fireEvent",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=this._listeners[t];i&&i.forEach((function(t){return t.apply(void 0,n)}))}},{key:"selectionStart",get:function(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}},{key:"cursorPos",get:function(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd},set:function(t){this.el&&this.el.isActive&&(this.el.select(t,t),this._saveSelection())}},{key:"_saveSelection",value:function(){this.value!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}},{key:"updateValue",value:function(){this.masked.value=this.el.value,this._value=this.masked.value}},{key:"updateControl",value:function(){var t=this.masked.unmaskedValue,e=this.masked.value,n=this.unmaskedValue!==t||this.value!==e;this._unmaskedValue=t,this._value=e,this.el.value!==e&&(this.el.value=e),n&&this._fireChangeEvents()}},{key:"updateOptions",value:function(t){var e=t.mask,n=p(t,["mask"]),r=!this.maskEquals(e),i=!N(this.masked,n);r&&(this.mask=e),i&&this.masked.updateOptions(n),(r||i)&&this.updateControl()}},{key:"updateCursor",value:function(t){null!=t&&(this.cursorPos=t,this._delayUpdateCursor(t))}},{key:"_delayUpdateCursor",value:function(t){var e=this;this._abortUpdateCursor(),this._changingCursorPos=t,this._cursorChanging=setTimeout((function(){e.el&&(e.cursorPos=e._changingCursorPos,e._abortUpdateCursor())}),10)}},{key:"_fireChangeEvents",value:function(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}},{key:"_abortUpdateCursor",value:function(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}},{key:"alignCursor",value:function(){this.cursorPos=this.masked.nearestInputPos(this.cursorPos,T)}},{key:"alignCursorFriendly",value:function(){this.selectionStart===this.cursorPos&&this.alignCursor()}},{key:"on",value:function(t,e){return this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),this}},{key:"off",value:function(t,e){if(!this._listeners[t])return this;if(!e)return delete this._listeners[t],this;var n=this._listeners[t].indexOf(e);return n>=0&&this._listeners[t].splice(n,1),this}},{key:"_onInput",value:function(t){if(this._inputEvent=t,this._abortUpdateCursor(),!this._selection)return this.updateValue();var e=new O(this.el.value,this.cursorPos,this.value,this._selection),n=this.masked.rawInputValue,r=this.masked.splice(e.startChangePos,e.removed.length,e.inserted,e.removeDirection).offset,i=n===this.masked.rawInputValue?e.removeDirection:I,o=this.masked.nearestInputPos(e.startChangePos+r,i);this.updateControl(),this.updateCursor(o),delete this._inputEvent}},{key:"_onChange",value:function(){this.value!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}},{key:"_onDrop",value:function(t){t.preventDefault(),t.stopPropagation()}},{key:"_onFocus",value:function(t){this.alignCursorFriendly()}},{key:"_onClick",value:function(t){this.alignCursorFriendly()}},{key:"destroy",value:function(){this._unbindEvents(),this._listeners.length=0,delete this.el}}]),t}(),M.MaskedEnum=function(t){l(n,t);var e=g(n);function n(){return u(this,n),e.apply(this,arguments)}return h(n,[{key:"_update",value:function(t){t.enum&&(t.mask="*".repeat(t.enum[0].length)),y(f(n.prototype),"_update",this).call(this,t)}},{key:"doValidate",value:function(){for(var t,e=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return this.enum.some((function(t){return t.indexOf(e.unmaskedValue)>=0}))&&(t=y(f(n.prototype),"doValidate",this)).call.apply(t,[this].concat(i))}}]),n}(W);var it=function(t){l(n,t);var e=g(n);function n(t){return u(this,n),e.call(this,Object.assign({},n.DEFAULTS,t))}return h(n,[{key:"_update",value:function(t){y(f(n.prototype),"_update",this).call(this,t),this._updateRegExps()}},{key:"_updateRegExps",value:function(){var t="^"+(this.allowNegative?"[+|\\-]?":""),e=(this.scale?"("+x(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExpInput=new RegExp(t+"(0|([1-9]+\\d*))?"+e),this._numberRegExp=new RegExp(t+"\\d*"+e),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(x).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(x(this.thousandsSeparator),"g")}},{key:"_removeThousandsSeparators",value:function(t){return t.replace(this._thousandsSeparatorRegExp,"")}},{key:"_insertThousandsSeparators",value:function(t){var e=t.split(this.radix);return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),e.join(this.radix)}},{key:"doPrepare",value:function(t){for(var e,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return(e=y(f(n.prototype),"doPrepare",this)).call.apply(e,[this,this._removeThousandsSeparators(t.replace(this._mapToRadixRegExp,this.radix))].concat(i))}},{key:"_separatorsCount",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0,r=0;r<t;++r)this._value.indexOf(this.thousandsSeparator,r)===r&&(++n,e&&(t+=this.thousandsSeparator.length));return n}},{key:"_separatorsCountFromSlice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._value;return this._separatorsCount(this._removeThousandsSeparators(t).length,!0)}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,r=arguments.length>2?arguments[2]:void 0,i=this._adjustRangeWithSeparators(t,e),o=_(i,2);return t=o[0],e=o[1],this._removeThousandsSeparators(y(f(n.prototype),"extractInput",this).call(this,t,e,r))}},{key:"_appendCharRaw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.thousandsSeparator)return y(f(n.prototype),"_appendCharRaw",this).call(this,t,e);var r=e.tail&&e._beforeTailState?e._beforeTailState._value:this._value,i=this._separatorsCountFromSlice(r);this._value=this._removeThousandsSeparators(this.value);var o=y(f(n.prototype),"_appendCharRaw",this).call(this,t,e);this._value=this._insertThousandsSeparators(this._value);var a=e.tail&&e._beforeTailState?e._beforeTailState._value:this._value,s=this._separatorsCountFromSlice(a);return o.tailShift+=(s-i)*this.thousandsSeparator.length,o.skip=!o.rawInserted&&t===this.thousandsSeparator,o}},{key:"_findSeparatorAround",value:function(t){if(this.thousandsSeparator){var e=t-this.thousandsSeparator.length+1,n=this.value.indexOf(this.thousandsSeparator,e);if(n<=t)return n}return-1}},{key:"_adjustRangeWithSeparators",value:function(t,e){var n=this._findSeparatorAround(t);n>=0&&(t=n);var r=this._findSeparatorAround(e);return r>=0&&(e=r+this.thousandsSeparator.length),[t,e]}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=this._adjustRangeWithSeparators(t,e),r=_(n,2);t=r[0],e=r[1];var i=this.value.slice(0,t),o=this.value.slice(e),a=this._separatorsCount(i.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(i+o));var s=this._separatorsCountFromSlice(i);return new R({tailShift:(s-a)*this.thousandsSeparator.length})}},{key:"nearestInputPos",value:function(t,e){if(!this.thousandsSeparator)return t;switch(e){case I:case T:case S:var n=this._findSeparatorAround(t-1);if(n>=0){var r=n+this.thousandsSeparator.length;if(t<r||this.value.length<=r||e===S)return n}break;case A:case C:var i=this._findSeparatorAround(t);if(i>=0)return i+this.thousandsSeparator.length}return t}},{key:"doValidate",value:function(t){var e=(t.input?this._numberRegExpInput:this._numberRegExp).test(this._removeThousandsSeparators(this.value));if(e){var r=this.number;e=e&&!isNaN(r)&&(null==this.min||this.min>=0||this.min<=this.number)&&(null==this.max||this.max<=0||this.number<=this.max)}return e&&y(f(n.prototype),"doValidate",this).call(this,t)}},{key:"doCommit",value:function(){if(this.value){var t=this.number,e=t;null!=this.min&&(e=Math.max(e,this.min)),null!=this.max&&(e=Math.min(e,this.max)),e!==t&&(this.unmaskedValue=String(e));var r=this.value;this.normalizeZeros&&(r=this._normalizeZeros(r)),this.padFractionalZeros&&(r=this._padFractionalZeros(r)),this._value=r}y(f(n.prototype),"doCommit",this).call(this)}},{key:"_normalizeZeros",value:function(t){var e=this._removeThousandsSeparators(t).split(this.radix);return e[0]=e[0].replace(/^(\D*)(0*)(\d*)/,(function(t,e,n,r){return e+r})),t.length&&!/\d$/.test(e[0])&&(e[0]=e[0]+"0"),e.length>1&&(e[1]=e[1].replace(/0*$/,""),e[1].length||(e.length=1)),this._insertThousandsSeparators(e.join(this.radix))}},{key:"_padFractionalZeros",value:function(t){if(!t)return t;var e=t.split(this.radix);return e.length<2&&e.push(""),e[1]=e[1].padEnd(this.scale,"0"),e.join(this.radix)}},{key:"unmaskedValue",get:function(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,".")},set:function(t){w(f(n.prototype),"unmaskedValue",t.replace(".",this.radix),this,!0)}},{key:"typedValue",get:function(){return Number(this.unmaskedValue)},set:function(t){w(f(n.prototype),"unmaskedValue",String(t),this,!0)}},{key:"number",get:function(){return this.typedValue},set:function(t){this.typedValue=t}},{key:"allowNegative",get:function(){return this.signed||null!=this.min&&this.min<0||null!=this.max&&this.max<0}}]),n}(F);it.DEFAULTS={radix:",",thousandsSeparator:"",mapToRadix:["."],scale:2,signed:!1,normalizeZeros:!0,padFractionalZeros:!1},M.MaskedNumber=it,M.MaskedFunction=function(t){l(n,t);var e=g(n);function n(){return u(this,n),e.apply(this,arguments)}return h(n,[{key:"_update",value:function(t){t.mask&&(t.validate=t.mask),y(f(n.prototype),"_update",this).call(this,t)}}]),n}(F);var ot=function(t){l(n,t);var e=g(n);function n(t){var r;return u(this,n),(r=e.call(this,Object.assign({},n.DEFAULTS,t))).currentMask=null,r}return h(n,[{key:"_update",value:function(t){y(f(n.prototype),"_update",this).call(this,t),"mask"in t&&(this.compiledMasks=Array.isArray(t.mask)?t.mask.map((function(t){return B(t)})):[])}},{key:"_appendCharRaw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._applyDispatch(t,e);return this.currentMask&&n.aggregate(this.currentMask._appendChar(t,e)),n}},{key:"_applyDispatch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.tail&&null!=e._beforeTailState?e._beforeTailState._value:this.value,r=this.rawInputValue,i=e.tail&&null!=e._beforeTailState?e._beforeTailState._rawInputValue:r,o=r.slice(i.length),a=this.currentMask,s=new R,u=a&&a.state;if(this.currentMask=this.doDispatch(t,Object.assign({},e)),this.currentMask)if(this.currentMask!==a){if(this.currentMask.reset(),i){var c=this.currentMask.append(i,{raw:!0});s.tailShift=c.inserted.length-n.length}o&&(s.tailShift+=this.currentMask.append(o,{raw:!0,tail:!0}).tailShift)}else this.currentMask.state=u;return s}},{key:"_appendPlaceholder",value:function(){var t=this._applyDispatch.apply(this,arguments);return this.currentMask&&t.aggregate(this.currentMask._appendPlaceholder()),t}},{key:"doDispatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.dispatch(t,this,e)}},{key:"doValidate",value:function(){for(var t,e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=y(f(n.prototype),"doValidate",this)).call.apply(t,[this].concat(i))&&(!this.currentMask||(e=this.currentMask).doValidate.apply(e,i))}},{key:"reset",value:function(){this.currentMask&&this.currentMask.reset(),this.compiledMasks.forEach((function(t){return t.reset()}))}},{key:"value",get:function(){return this.currentMask?this.currentMask.value:""},set:function(t){w(f(n.prototype),"value",t,this,!0)}},{key:"unmaskedValue",get:function(){return this.currentMask?this.currentMask.unmaskedValue:""},set:function(t){w(f(n.prototype),"unmaskedValue",t,this,!0)}},{key:"typedValue",get:function(){return this.currentMask?this.currentMask.typedValue:""},set:function(t){var e=String(t);this.currentMask&&(this.currentMask.typedValue=t,e=this.currentMask.unmaskedValue),this.unmaskedValue=e}},{key:"isComplete",get:function(){return!!this.currentMask&&this.currentMask.isComplete}},{key:"remove",value:function(){var t,e=new R;return this.currentMask&&e.aggregate((t=this.currentMask).remove.apply(t,arguments)).aggregate(this._applyDispatch()),e}},{key:"state",get:function(){return Object.assign({},y(f(n.prototype),"state",this),{_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map((function(t){return t.state})),currentMaskRef:this.currentMask,currentMask:this.currentMask&&this.currentMask.state})},set:function(t){var e=t.compiledMasks,r=t.currentMaskRef,i=t.currentMask,o=p(t,["compiledMasks","currentMaskRef","currentMask"]);this.compiledMasks.forEach((function(t,n){return t.state=e[n]})),null!=r&&(this.currentMask=r,this.currentMask.state=i),w(f(n.prototype),"state",o,this,!0)}},{key:"extractInput",value:function(){var t;return this.currentMask?(t=this.currentMask).extractInput.apply(t,arguments):""}},{key:"extractTail",value:function(){for(var t,e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return this.currentMask?(t=this.currentMask).extractTail.apply(t,i):(e=y(f(n.prototype),"extractTail",this)).call.apply(e,[this].concat(i))}},{key:"doCommit",value:function(){this.currentMask&&this.currentMask.doCommit(),y(f(n.prototype),"doCommit",this).call(this)}},{key:"nearestInputPos",value:function(){for(var t,e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return this.currentMask?(t=this.currentMask).nearestInputPos.apply(t,i):(e=y(f(n.prototype),"nearestInputPos",this)).call.apply(e,[this].concat(i))}},{key:"overwrite",get:function(){return this.currentMask?this.currentMask.overwrite:y(f(n.prototype),"overwrite",this)},set:function(t){console.warn('"overwrite" option is not available in dynamic mask, use this option in siblings')}}]),n}(F);ot.DEFAULTS={dispatch:function(t,e,n){if(e.compiledMasks.length){var r=e.rawInputValue,i=e.compiledMasks.map((function(e,i){return e.reset(),e.append(r,{raw:!0}),e.append(t,n),{weight:e.rawInputValue.length,index:i}}));return i.sort((function(t,e){return e.weight-t.weight})),e.compiledMasks[i[0].index]}}},M.MaskedDynamic=ot;var at={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function st(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:at.MASKED,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:at.MASKED,r=B(t);return function(t){return r.runIsolated((function(r){return r[e]=t,r[n]}))}}M.PIPE_TYPE=at,M.createPipe=st,M.pipe=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return st.apply(void 0,n)(t)};try{globalThis.IMask=M}catch(t){}document.querySelectorAll("#app").forEach((t=>{const o=new n,s=new r.Z,u=new e.Z;window.addEventListener("load",(()=>{u.changeSection(window.location.hash),u.addOpen()})),window.addEventListener("hashchange",(()=>{u.changeSection(window.location.hash),u.addOpen()})),t.querySelector("header div.logo").addEventListener("click",(t=>{window.location.hash="#"})),t.querySelector("header button").addEventListener("click",(e=>{u.menuHandler(t.querySelector("nav"))}));const c=t.querySelector("header nav .links a#signout");c&&c.addEventListener("click",(t=>{t.preventDefault(),o.signout()})),o.getLoginData().onAuthStateChanged((e=>{if(e){t.querySelector("header nav div.profile strong").innerHTML=e.displayName,t.querySelector("header nav div.profile img").src=e.photoURL||"assets/img/blank-profile.png",s.data().collection(`vaults/${e.uid}/vault`).onSnapshot((t=>{const n=[];t.forEach((t=>{n.push(t.data())})),n.length>=1&&new i.Z(e.uid,n).renderVaults()}));const n=t.querySelector("section#new_vault");n&&n.querySelector("form").addEventListener("submit",(t=>{t.preventDefault();const n=u.getFormValues(t.target);s.insert(n,e.uid),window.location.hash="#home"}));const r=t.querySelector("section#profile");if(r){const t=r.querySelector("form"),n=t.querySelector("input[name=zipcode]"),i=t.querySelector("input[name=address]"),o=t.querySelector("input[name=district]"),c=t.querySelector("input[name=city]"),h=t.querySelector("input[name=state]"),l=t.querySelector("input[name=birthday]"),f=t.querySelector("#file"),d=r.querySelector("footer button[type=submit]");let p;n&&(new M(n,{mask:"00.000-000"}),n.addEventListener("blur",(e=>{const r=[i,o,c,h];r.forEach((t=>{t.parentElement.classList.add("loading")}));let a=n.value.replace("-","").replace(".","");fetch(`https://viacep.com.br/ws/${a}/json/`,{method:"GET",mode:"cors",cache:"default"}).then((e=>{e.json().then((e=>{e.data||i.focus();let n=null,o=null,a=null,s=null;switch(e.logradouro?n=e.logradouro:i.focus(),e.bairro&&(o=e.bairro),e.localidade&&(a=e.localidade),e.uf){case"AC":s="Acre";break;case"AL":s="Alagoas";break;case"AP":s="Amapá";break;case"AM":s="Amazonas";break;case"BA":s="Bahia";break;case"CE":s="Ceará";break;case"DF":s="Distrito Federal";break;case"ES":s="Espírito Santo";break;case"GO":s="Goiás";break;case"MA":s="Maranhão";break;case"MT":s="Mato Grosso";break;case"MS":s="Mato Grosso do Sul";break;case"MG":s="Minas Gerais";break;case"PA":s="Pará";break;case"PB":s="Paraíba";break;case"PR":s="Paraná";break;case"PE":s="Pernambuco";break;case"PI":s="Piauí";break;case"RJ":s="Rio de Janeiro";break;case"RN":s="Rio Grande do Norte";break;case"RS":s="Rio Grande do Sul";break;case"RO":s="Rondônia";break;case"RR":s="Roraima";break;case"SC":s="Santa Catarina";break;case"SP":s="São Paulo";break;case"SE":s="Sergipe";break;case"TO":s="Tocantins"}u.setFormValues(t,{address:n,district:o,city:a,state:s}),r.forEach((t=>{t.parentElement.classList.remove("loading")}))}))})).catch((t=>{console.error(t)}))}))),l&&new M(l,{mask:"00/00/0000"});const v=r.querySelector("#photo-preview");v.src=e.photoURL||"assets/img/blank-profile.png";const g=r.querySelector(".choose-photo");v.addEventListener("click",(t=>{f.click()})),g.addEventListener("click",(t=>{f.click()})),f.addEventListener("change",(t=>{const e=t.target.files[0],n=new FileReader;n.onload=()=>{v.src=n.result,v.style.borderRadius=0,p=new(a())(v,{aspectRatio:1,viewMode:2,movable:!1,zoomable:!1}),g.innerHTML="Escolher Outra Foto"},n.readAsDataURL(e),t.target.value=""})),t.addEventListener("submit",(n=>{n.preventDefault(),t.classList.remove("cropping"),d.innerHTML='<?xml version="1.0" encoding="utf-8"?>\n                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; display: block; shape-rendering: auto;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">\n                    <circle cx="50" cy="50" fill="none" stroke="#fff" stroke-width="10" r="35" stroke-dasharray="164.93361431346415 56.97787143782138">\n                    <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform>\n                    </circle>',p&&(v.src=p.getCroppedCanvas().toDataURL("image/png"),p.getCroppedCanvas().toBlob((t=>{s.getStorage().ref().child(`profile/photos/${e.uid}`).put(t).then((t=>t.ref.getDownloadURL())).then((t=>e.updateProfile({photoURL:t}))),p.destroy()}))),s.updateProfile(e.uid,u.getFormValues(t)),d.innerHTML='<img src="assets/svg/save.svg" alt="Salvar perfil" />\n\t\t\t\t\t<span>&nbsp;salvar perfil</span>',window.location.hash="#"})),s.data().collection("profile").doc(e.uid).get().then((e=>{let n=e.data();u.setFormValues(t,n)}))}}else window.location.href="/login.html"}))}))})()})();